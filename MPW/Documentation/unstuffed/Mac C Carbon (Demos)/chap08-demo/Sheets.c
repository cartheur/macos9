// *******************************************************************************************// Sheets.c// *******************************************************************************************// ииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииии includes#include "DialogsAndAlerts.h"// ииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииии global variablesWindowRef	gSheetDialogWindowRef = NULL;extern WindowRef	gWindowRef;extern Boolean		gRunningOnX;extern Str255			gCurrentString;// ****************************************************************************** doSheetAlertBoolean  doSheetAlert(void){	AlertStdCFStringAlertParamRec	paramRec;	Str255												messageText, informativeText;	CFStringRef										messageTextCF, informativeTextCF;	OSStatus											osError;	DialogRef											dialogRef;	MenuRef												menuRef;	GetStandardAlertDefaultParams(&paramRec,kStdCFStringAlertVersionOne);	GetIndString(messageText,rSheetStrings,sAlertSheetMessage);	GetIndString(informativeText,rSheetStrings,sAlertSheetInformative);	messageTextCF = CFStringCreateWithPascalString(NULL,messageText,																								 CFStringGetSystemEncoding());	informativeTextCF = CFStringCreateWithPascalString(NULL,informativeText,																										 CFStringGetSystemEncoding());	osError = CreateStandardSheet(kAlertCautionAlert,messageTextCF,informativeTextCF,&paramRec,																GetWindowEventTarget(gWindowRef),&dialogRef);	if(osError == noErr)		osError = ShowSheetWindow(GetDialogWindow(dialogRef),gWindowRef);	CFRelease(messageTextCF);	CFRelease(informativeTextCF);	menuRef = GetMenuRef(mDemonstration);	if(menuRef != NULL)	{		DisableMenuItem(menuRef,iWindowModalDialog);		DisableMenuItem(menuRef,iWindowModalAlert);	}	return (osError == noErr);}// ***************************************************************************** doSheetDialogBoolean  doSheetDialog(void){	DialogRef		dialogRef;	ControlRef	controlRef;	Str255			stringData = "\pBradman";	OSStatus		osError = noErr;	MenuRef			menuRef; 	if(!(dialogRef = GetNewDialog(rSheetDialog,NULL,(WindowRef) -1)))		return false;	SetWRefCon(GetDialogWindow(dialogRef),(SInt32) kSheetDialog);			SetDialogDefaultItem(dialogRef,kStdOkItemIndex);	GetDialogItemAsControl(dialogRef,iEditTextSheetDialog,&controlRef);	SetDialogItemText((Handle) controlRef,stringData);	SelectDialogItemText(dialogRef,iEditTextSheetDialog,0,32767);	gSheetDialogWindowRef = GetDialogWindow(dialogRef);	osError = ShowSheetWindow(gSheetDialogWindowRef,gWindowRef);	menuRef = GetMenuRef(mDemonstration);	if(menuRef != NULL)		DisableMenuItem(menuRef,iWindowModalDialog);	return (osError == noErr);}// ****************************************************************** doButtonHitInSheetDialogvoid  doButtonHitInSheetDialog(void){	DialogRef		dialogRef;	ControlRef	controlRef;	GrafPtr			oldPort;	dialogRef = GetDialogFromWindow(gSheetDialogWindowRef);	GetDialogItemAsControl(dialogRef,iEditTextSheetDialog,&controlRef);	GetDialogItemText((Handle) controlRef,gCurrentString);	HideSheetWindow(gSheetDialogWindowRef);	DisposeDialog(dialogRef);	gSheetDialogWindowRef = NULL;	GetPort(&oldPort);	SetPortWindowPort(gWindowRef);	doDrawMessage(gWindowRef,true);	SetPort(oldPort);}// *******************************************************************************************