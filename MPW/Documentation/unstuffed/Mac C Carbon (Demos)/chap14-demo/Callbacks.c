// *******************************************************************************************// Callbacks.c//********************************************************************************************// ииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииии includes#include "Controls3.h"// ииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииии global variablesextern Boolean					gGroupArrowsProgressActive;extern Boolean					gSlidersActive;extern ControlActionUPP	gArrowsActionFunctionUPP;extern ControlActionUPP	gSliderActionFunction1UPP;extern ControlActionUPP	gSliderActionFunction2UPP;extern ControlRef				gLittleArrowsControlRef;extern ControlRef				gCacheSizeControlRef;extern ControlRef				gSlider1Ref;extern ControlRef				gSlider2Ref;extern ControlRef				gSlider3Ref;extern ControlRef				gSlider4Ref;extern ControlRef				gSlider5Ref;extern ControlRef				gSlider6Ref;extern RGBColor					gRedColour;extern RGBColor					gBlueColour;extern RGBColor					gBlackColour;// ******************************************************************************* eventFilterBoolean  eventFilter(DialogRef dialogRef,EventRecord *eventStrucPtr,SInt16 *itemHit){	Boolean			handledEvent;	GrafPtr			oldPort;	Point				mouseXY;	ControlRef	controlRef;	handledEvent = false;	if((eventStrucPtr->what == updateEvt) && 		 ((WindowRef) eventStrucPtr->message != GetDialogWindow(dialogRef)))	{		doUpdate(eventStrucPtr);	}	else if((eventStrucPtr->what == autoKey) && ((eventStrucPtr->modifiers & cmdKey) != 0))	{		handledEvent = true;		return handledEvent;	}	else	{		GetPort(&oldPort);		SetPortDialogPort(dialogRef);		if(gGroupArrowsProgressActive)		{			if(eventStrucPtr->what == mouseDown)			{				mouseXY = eventStrucPtr->where;				GlobalToLocal(&mouseXY);				if(FindControl(mouseXY,GetDialogWindow(dialogRef),&controlRef))				{					if(controlRef == gLittleArrowsControlRef)					{						TrackControl(controlRef,mouseXY,gArrowsActionFunctionUPP);						handledEvent = true;					}				}			}		}		else if(gSlidersActive)		{			if(eventStrucPtr->what == mouseDown)			{				mouseXY = eventStrucPtr->where;				GlobalToLocal(&mouseXY);				if(FindControl(mouseXY,GetDialogWindow(dialogRef),&controlRef))				{					if(controlRef == gSlider1Ref || controlRef == gSlider2Ref)					{						TrackControl(controlRef,mouseXY,NULL);						doDrawSliderValues(dialogRef,controlRef);						handledEvent = true;					}					else if(controlRef == gSlider3Ref || controlRef == gSlider4Ref)					{						TrackControl(controlRef,mouseXY,gSliderActionFunction1UPP);						handledEvent = true;					}					else if(controlRef == gSlider5Ref || controlRef == gSlider6Ref)					{						TrackControl(controlRef,mouseXY,gSliderActionFunction2UPP);						handledEvent = true;					}				}			}		}		else		{			handledEvent = StdFilterProc(dialogRef,eventStrucPtr,itemHit);		}		SetPort(oldPort);	}	return handledEvent;}// ********************************************************************** arrowsActionFunctionvoid  arrowsActionFunction(ControlRef controlRef,SInt16 partCode){	Str255	theString;	SInt32	controlValue;	if(partCode)	{		controlValue = GetControlValue(controlRef);		switch(partCode)		{			case kControlUpButtonPart:				controlValue += 32;				if(controlValue > GetControlMaximum(controlRef))				{					controlValue = GetControlMaximum(controlRef);					return;				}			break;						case kControlDownButtonPart:				controlValue -= 32;				if(controlValue < GetControlMinimum(controlRef))				{					controlValue = GetControlMinimum(controlRef);					return;				}				break;		}		SetControlValue(controlRef,controlValue);		NumToString((SInt32) controlValue,theString);		doConcatPStrings(theString,"\pK");		SetControlData(gCacheSizeControlRef,kControlEntireControl,kControlStaticTextTextTag,									 theString[0],&theString[1]);		Draw1Control(gCacheSizeControlRef);	}}// ********************************************************************* sliderActionFunction1void  sliderActionFunction1(ControlRef controlRef,SInt16 partCode){	SInt16		staticTextItem;	Str255		theString;	DialogRef	dialogRef;	NumToString((SInt32) GetControlValue(controlRef),theString);	dialogRef = GetDialogFromWindow(GetControlOwner(controlRef));	if(controlRef == gSlider3Ref)		staticTextItem = iSlider3StaticText;	else if(controlRef == gSlider4Ref)		staticTextItem = iSlider4StaticText;	GetDialogItemAsControl(dialogRef,staticTextItem,&controlRef);	SetControlData(controlRef,kControlEntireControl,kControlStaticTextTextTag,theString[0],								 &theString[1]);	Draw1Control(controlRef);}// ********************************************************************* sliderActionFunction2void  sliderActionFunction2(ControlRef controlRef,SInt16 partCode){	SInt16	controlValue;	Rect		theRect;	controlValue = GetControlValue(controlRef);	if(controlRef == gSlider5Ref)	{		gRedColour.red = 2 * controlValue;		RGBForeColor(&gRedColour);		SetRect(&theRect,220,177,236,193);	}	else if(controlRef == gSlider6Ref)	{		gBlueColour.blue = 2 * controlValue;		RGBForeColor(&gBlueColour);		SetRect(&theRect,220,198,236,214);	}		PaintRect(&theRect);	RGBForeColor(&gBlackColour);}// *******************************************************************************************