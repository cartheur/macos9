// *******************************************************************************************// ColourPicker.c// *******************************************************************************************#include "Miscellany.h"// ииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииии global variablesRGBColor					gInColour = { 0xCCCC, 0x0000, 0x0000 };RGBColor					gOutColour;Boolean						gColorPickerButton;extern WindowRef	gWindowRef;extern RGBColor		gWhiteColour;extern RGBColor		gBlueColour;// **************************************************************************** doColourPickervoid  doColourPicker(void){	Rect		portRect, theRect;	Point		where;	Str255	prompt = "\pChoose a rectangle colour:";	GetWindowPortBounds(gWindowRef,&portRect);	theRect = portRect;	RGBBackColor(&gBlueColour);	EraseRect(&theRect);	InsetRect(&theRect,55,55);	RGBForeColor(&gInColour);	PaintRect(&theRect);	where.v = where.h = 0;	gColorPickerButton = GetColor(where,prompt,&gInColour,&gOutColour);	InvalWindowRect(gWindowRef,&portRect);}// ******************************************************************* doDrawColorPickerChoicevoid  doDrawColourPickerChoice(void){	Rect	portRect;	char	*cString;		GetWindowPortBounds(gWindowRef,&portRect);	InsetRect(&portRect,55,55);	if(gColorPickerButton)	{		RGBForeColor(&gOutColour);		PaintRect(&portRect);		RGBForeColor(&gWhiteColour);		MoveTo(55,22);		DrawString("\pRequested Red Value: ");		cString = doDecimalToHexadecimal(gOutColour.red);		MoveTo(170,22);		DrawText(cString,0,6);		MoveTo(55,35);		DrawString("\pRequested Green Value: ");		cString = doDecimalToHexadecimal(gOutColour.green);		MoveTo(170,35);		DrawText(cString,0,6);		MoveTo(55,48);		DrawString("\pRequested Blue Value: ");		cString = doDecimalToHexadecimal(gOutColour.blue);		MoveTo(170,48);		DrawText(cString,0,6);	}	else	{		RGBForeColor(&gInColour);		PaintRect(&portRect);			RGBForeColor(&gWhiteColour);		MoveTo(55,48);		DrawString("\pCancel button was clicked.");	}}// ******************************************************************** doDecimalToHexadecimalchar  *doDecimalToHexadecimal(UInt16 decimalNumber){	static char	cString[] = "0xXXXX";	char				*hexCharas = "0123456789ABCDEF";	SInt16			a;	for (a=0;a<4;decimalNumber >>= 4,++a)		cString[5 - a] = hexCharas[decimalNumber & 0xF];	return cString;}// *******************************************************************************************