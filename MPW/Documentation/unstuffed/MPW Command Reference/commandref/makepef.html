<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML><HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1"><META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css"><LINK REL="STYLESHEET" HREF="cmdref.css" CHARSET="ISO-8859-1" TYPE="text/css"><TITLE>MakePEF</TITLE></HEAD><BODY BGCOLOR="#ffffff"><!--#include file="breadcrumb" --><!--#include virtual="/adcnavbar" --><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD><TABLE WIDTH="600" BGCOLOR="0" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD><P CLASS="BookTitle">MPW Command Reference</P></TD>	</TR></TABLE><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="makeflat.html">Previous</A></P></TD>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="index.html">Table of Contents</A></P></TD>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="makeppccodersrc.html">Next</A></P></TD>	</TR></TABLE><HR WIDTH="600" ALIGN="LEFT"><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="475"><P CLASS="PageHdL">MakePEF</P></TD>		<TD WIDTH="125"><P CLASS="PageHdR">Tool</P></TD>	</TR></TABLE><P CLASS="SectionHd">SYNTAX</P><P CLASS="Syntax">MakePEF <I>xcoffFilename</I> [-a <I>num</I>] [-b] [-c <I>num</I>] [-d <I>num</I>] [-e <I>name</I>]<BR>[-f <I>filename</I>] [-fc <I>creator</I>] [-ft <I>type</I>] [-i <I>name</I>] [-k]<BR>[-l <I>oldName</I>[=<I>newName</I>][#<I>version</I>[-<I>upfv</I>]][!][&#126;]] [-n] [-o <I>filename</I>]<BR>[-r] [-s <I>num</I>] [-t <I>name</I> ] [-u <I>num</I>] [-v <I>section</I>=<I>address</I>]<BR>[-w <I>libName</I>:<I>symName</I>] [-x]</P><P CLASS="SectionHd">DESCRIPTION</P><P CLASS="Text1">You use the MakePEF tool to convert an IBM AIX 3.2 Extended Common Object File Format (XCOFF) file to the Preferred Executable Format (PEF). The PEF file that it creates is smaller and faster than theoriginal XCOFF file. The PEF file supports</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>unlimited numbers of code and data sections</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>version numbers for bidirectional version checking in import libraries </P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>distinguishing between the application entry point, the initialization routine, and the termination routine (useful for C++ static constructors and destructors)</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>a sharing option for each section</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>unresolved load-time import symbols for specially flagged symbols</P><P CLASS="Note"><B>IMPORTANT</B><BR>The PPCLink tool can produce PEF files directly, eliminating the need for MakePEF in many cases. &#149;</P><P CLASS="SectionHd">INPUT</P><P CLASS="Text1">A file of type <FONT FACE="courier">'XCOF'</FONT>.</P><P CLASS="SectionHd">OUTPUT</P><P CLASS="Text1">The MakePEF tool produces a file with the default name <FONT FACE="courier">a.pef.</FONT> To give the output file a more meaningful name, use the <FONT FACE="courier">-o</FONT> option. </P><P CLASS="SectionHd">ALIAS RESOLUTION</P><P CLASS="Text1">This tool does not resolve Finder aliases.</P><P CLASS="SectionHd">STATUS</P><P CLASS="Text1">MakePEF can return the following status codes:<BR><BR></P><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">0</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">no errors</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">1</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">error</P></TD></TR></TABLE><P CLASS="SectionHd">PARAMETERS</P><P CLASS="Option1"><I>xcoffFilename</I></P><P CLASS="OptionText1">Specifies the XCOFF file created by the linker. </P><P CLASS="SectionHd">OPTIONS</P><P CLASS="Option1">-a <I>num</I></P><P CLASS="OptionText1">Aligns code and data sections to the byte boundary specified by <I>num</I>.The value <I>num</I> must be a multiple of 8; the default is 16. </P><P CLASS="Option1">-b</P><P CLASS="OptionText1">Expands uninitialized storage into data that is initialized to zero. By default, uninitialized storage is not represented in the PEF fragment in order to produce a more compact file. Use this option if you are creating an accelerated resource, such as a definition function, and you want it to model the behavior of a 68K resource. (An accelerated resource contains PowerPC code.) This option implicitly turns on the <FONT FACE="courier">-x</FONT> option as well.</P><P CLASS="Option1">-c <I>num</I></P><P CLASS="OptionText1">Sets the current version number to that specified by <I>num</I>.The default value for <I>num</I> is 0. </P><P CLASS="Option1">-d <I>num</I></P><P CLASS="OptionText1">Sets the definition version number to <I>num</I> for import libraries. The definition version number specifies the oldest version for which the definition in the link-time copy of the library is still compatible with the implementation you are building now. The default value for <I>num</I> is 0. </P><P CLASS="Option1">-e <I>name</I></P><P CLASS="OptionText1">Sets the main symbol to the specified name, which must be in the export list of the XCOFF file. The default value is the main symbol specified in the XCOFF file. </P><P CLASS="Option1">-f <I>filename</I></P><P CLASS="OptionText1">Loads an additional export list from <I>filename.</I></P><P CLASS="Option1">-fc <I>creator</I></P><P CLASS="OptionText1">Specifies the creator of the output file.</P><P CLASS="Option1">-ft <I>type</I></P><P CLASS="OptionText1">Specifies the type of the output file.</P><P CLASS="Option1">-i <I>name</I></P><P CLASS="OptionText1">Specifies the name of the initialization routine. You must specify the name of the initialization routine as an export when you link the fragment. You then specify the name using this option to make the initialization routine visible in the PEF file. The default is that the fragment does not have an initialization routine. </P><P CLASS="Option1">-k</P><P CLASS="OptionText1">Keeps initialization, termination, and entry-point names as export symbols in the PEF output file. The default is to remove these routines from the export list because they are specified in a different area in the PEF file.</P><P CLASS="Option1">-l <I>oldName</I>[=<I>newName</I>][#<I>version</I>[-<I>upfv</I>]][!][&#126;]</P><P CLASS="OptionText1">Modifies information about import library <I>oldName</I> in the import table for the code fragment you are building. You must specify options in the order shown. </P><P CLASS="Option2"><I>newName</I></P><P CLASS="OptionText2">Specifies the name to include in the table. Use the name of the runtime (PEF) copy of the library. </P><P CLASS="Option2">#<I>version</I></P><P CLASS="OptionText2">Places the current version number of the library in the table. Use the version number that was set for the library using the <FONT FACE="courier">-c</FONT> option when the library was built. Note that if you specify a version number, you must surround the entire argument in double quotes because of the <FONT FACE="courier">#</FONT> character.</P><P CLASS="Option2">-<I>upfv</I></P><P CLASS="OptionText2">Places the library's implementation version number in the table. Use the implementation version number that was set for the library using the <FONT FACE="courier">-u</FONT> option when the library was built. </P><P CLASS="Option2">!</P><P CLASS="OptionText2">Specifies that the library should be initialized before this fragment.</P><P CLASS="Option2">&#126;</P><P CLASS="OptionText2">Allows all symbols from this library to be undefined at runtime.</P><P CLASS="Option1">-n</P><P CLASS="OptionText1">Pads exported loader symbols with a trailing null. The default is no padding. Padding makes it easier to dump the contents of the file using a tool like DumpFile; however, you do not need to pad if you want to use DumpPEF.</P><P CLASS="Option1">-o <I>filename</I></P><P CLASS="OptionText1">Specifies the name of the output file as <I>filename</I>.The default filename is <FONT FACE="courier">a.pef</FONT>.</P><P CLASS="Option1">-r</P><P CLASS="OptionText1">Specifies the data section to have read-only privileges. By default, data sections have read and write privileges.</P><P CLASS="Option1">-s <I>num</I></P><P CLASS="OptionText1">Sets the share option of the data section of an import library to the specified number. The default value, 1 (<FONT FACE="courier">contextShare</FONT>), specifies that the data is new for each application that uses the library.</P><P CLASS="OptionText1">The value 4 specifies that the data section is globally shared. This option is normally used by the system, by libraries that contain only data, or for Windows DLL compatibility. For additional information, see <I>Inside Macintosh: PowerPC System Software</I>.</P><P CLASS="Option1">-t <I>name</I></P><P CLASS="OptionText1">Sets the termination routine to <I>name</I>.You must specify the name of the termination routine as an export when you link the fragment. You then specify the name using this option to make the termination routine visible in the PEF file. The default is that the fragment does not have a termination routine. </P><P CLASS="Option1">-u <I>num</I></P><P CLASS="OptionText1">Sets the implementation version number to <I>num</I> for import libraries. The implementation version number specifies the oldest version whose runtime implementation is still compatible with the link-time definition for the version you are building now. The default is 0. </P><P CLASS="Option1">-v <I>section</I>=<I>address</I></P><P CLASS="OptionText1">Gives the specified data section the default virtual address of <I>address</I>.By default, data sections have an address of 0.</P><P CLASS="Option1">-w <I>libName</I>:<I>symName</I></P><P CLASS="OptionText1">Allows the symbol name <I>symName</I> from file <I>libName</I> to be undefined at runtime.</P><P CLASS="Option1">-x</P><P CLASS="OptionText1">Turns off automatic data section packing. This option is automatically turned on when you use the <FONT FACE="courier">-b</FONT> option.</P><P CLASS="SectionHd">EXAMPLES</P><P CLASS="Text1">The command below takes the input file <FONT FACE="courier">file.xcoff</FONT> and generates the output file <FONT FACE="courier">file.pef</FONT>. The <FONT FACE="courier">-o</FONT> option specifies the name of the output file. </P><P CLASS="Code">MakePEF file.xcoff -o file.pef</P><P CLASS="Text1">This following command uses the <FONT FACE="courier">-l</FONT> option to rename the import library <FONT FACE="courier">InterfaceLib.xcoff</FONT> to the new name <FONT FACE="courier">InterfaceLib</FONT>.</P><P CLASS="Code">MakePEF -l InterfaceLib.xcoff=InterfaceLib</P><P CLASS="SectionHd">SEE ALSO</P><P CLASS="Option1"><FONT FACE="courier"><A HREF="ppclink.html">PPCLink</A></FONT></P><P CLASS="Text1">&nbsp;<BR>&nbsp;</P><HR WIDTH="600" ALIGN="LEFT"><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="makeflat.html">Previous</A></P></TD>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="index.html">Table of Contents</A></P></TD>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="makeppccodersrc.html">Next</A></P></TD>	</TR></TABLE><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="600">		<P CLASS="Copyright">Copyright Apple Computer, Inc. 1993-2000</P>		<P CLASS="Date">Last Updated July 2000</P>		</TD>	</TR></TABLE></TD></TR></TABLE><!--#include virtual="/footer" --></BODY></HTML>