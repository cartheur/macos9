<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML><HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1"><META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css"><LINK REL="STYLESHEET" HREF="cmdref.css" CHARSET="ISO-8859-1" TYPE="text/css"><TITLE> AddMenu</TITLE></HEAD><BODY BGCOLOR="#ffffff"><!--#include file="breadcrumb" --><!--#include virtual="/adcnavbar" --><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD><TABLE WIDTH="600" BGCOLOR="0" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD><P CLASS="BookTitle">MPW Command Reference</P></TD>	</TR></TABLE><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">    <TR>        <TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="aboutbox.html">Previous</A></P></TD>        <TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="index.html">Table of Contents</A></P></TD>        <TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="addpane.html">Next</A></P></TD>    </TR></TABLE><HR WIDTH="600" ALIGN="LEFT"><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>        <TD WIDTH="475"><P CLASS="PageHdL">AddMenu</P></TD>        <TD WIDTH="125"><P CLASS="PageHdR">Built-in</P></TD>    </TR></TABLE><P CLASS="SectionHd">SYNTAX</P><P CLASS="Syntax">AddMenu [-asis] [[<I>menuName</I> | -help] [<I>itemName</I> [<I>commandString</I>]]<BR>[-link <I>mainMenuName</I> <I>itemName</I> <I>subMenuName</I>]</P><P CLASS="SectionHd">DESCRIPTION</P><P CLASS="Text1">The AddMenu command allows you to add custom menus and menu items to the MPW Shell. In building a menu, you associate a command, tool, or script with a menu item that is placed in a menu. When you choose the new menu item, the command, tool, or script associated with it is executed just as though you had entered and executed the commands in the active window. </P><P CLASS="Text1">To further customize your menus, you can use the special metacharacters listed in <A HREF="#table1">Table 1</A> to define keyboard equivalents, character styles, and other menu item features. Be sure to place quotation marks around the names of menu items (<I>itemName</I>) containing these metacharacters (see the <A HREF="#examples">Examples</A> for samples of their use). For more information about menus and metacharacters, see the information about adding menu items in the chapter &quot;Menu Manager&quot; in <I>Inside Macintosh: Macintosh Toolbox Essentials.</I></P><P CLASS="Text1">If you decide to change the commands associated with a menu item, you can execute AddMenu with the same menu name and item name but with a different string of commands. You can change the metacharacters associated with a menu item in the same manner, this time modifying the item name instead of the commands. Note that neither change affects the position of the item in the menu.</P><P CLASS="Text1">You can also use AddMenu to display information about existing user-defined menus by omitting parameters. After you execute an AddMenu command line that has no parameters, AddMenu commands for the user-defined menus are written to standard output. </P><P CLASS="Text1">The <FONT FACE="courier">-help</FONT> option of the <FONT FACE="courier">AddMenu</FONT> command lets you append commands to the Help menu instead of to a menu that you specify by name. </P><P CLASS="Text1">The <FONT FACE="courier">-link</FONT> option allows you to add hierarchical submenus to your menu list. You must define the main menu name, the item from which the submenu descends, and the submenu name. Note that submenus are not automatically removed when you use <FONT FACE="courier">DeleteMenu</FONT>.</P><P CLASS="Note"><B>Note</B><BR>Menus and menu items created with this command do not persist beyond the current MPW session unless you place the appropriate AddMenu commands in one of your <FONT FACE="courier">UserStartup&#149;<I>name</I></FONT> files.&#149;</P><P CLASS="SectionHd">INPUT</P><P CLASS="Text1">None</P><P CLASS="SectionHd">OUTPUT</P><P CLASS="Text1">None, unless you omit one or more AddMenu parameters. In this case AddMenu writes information about existing user-defined menus to standard output in the form of AddMenu commands. If you do not specify the <I>commandString</I> parameter, AddMenu lists the commands associated with the menu item to standard output. If you also omit the <I>itemName</I> parameter, AddMenu lists all user-defined menu items and their commands in the specified menu. If you do not specify any parameters, AddMenu lists all user-defined menus, menu items, and commands. </P><P CLASS="SectionHd">STATUS</P><P CLASS="Text1">AddMenu can return the following status codes:<BR><BR></P><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">0</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">no errors</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">1</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">syntax error</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">2</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">cannot redefine item</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">3</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">system error</P></TD></TR></TABLE><P CLASS="SectionHd">PARAMETERS</P><P CLASS="Option1"><I>menuName</I></P><P CLASS="OptionText1">Specifies the menu name. You cannot append items to the Window, Mark, or Apple menus.</P><P CLASS="Option1"><I>itemName</I></P><P CLASS="OptionText1">Specifies the menu item. You must place quotation marks around menu items containing any expansion characters or special metacharacters (see <A HREF="#table1">Table 1</A> for a list of metacharacters).</P><P CLASS="OptionNote1"><B>Note</B><BR>You cannot place semicolons within <I>itemName</I>.&#149;</P><P CLASS="Option1"><I>commandString</I></P><P CLASS="OptionText1">Associates a list of commands with a menu item (<I>itemName</I>). Separate commands with semicolons and place quotation marks around the entire command string. Pay special attention to nested quotation marks around variables. </P><P CLASS="OptionText1">A variable enclosed in double quotation marks (for example, <FONT FACE="courier">&quot;{Target}&quot;</FONT>) expands to the value that is current at the time you execute the AddMenu command. A variable enclosed in single quotation marks (for example, <FONT FACE="courier">'{Target}'</FONT>) expands to the value that is current at the time you select the menu item.</P><P CLASS="OptionText1">The MPW Shell processes the string of commands twice--once when you execute the AddMenu command and again when the user selects the menu item. The first time <I>commandString</I> is processed, the MPW Shell strips the quotation marks from the string and &quot;stores&quot; the list of commands contained within the quotation marks with the associated menu item. When you select the menu item, the MPW Shell executes the list of commands as if you had entered them in the active window. This means that <I>commandString</I> must contain a list of syntactically correct commands.</P><P CLASS="SectionHd">OPTIONS</P><P CLASS="Option1">-asis</P><P CLASS="OptionText1">Treats metacharacters (such as &quot;<FONT FACE="courier">/</FONT>&quot;) as literals. See <A HREF="#table1">Table 1</A> for a list of metacharacters.</P><P CLASS="Option1">-help</P><P CLASS="OptionText1">Adds a menu item to the Help menu. </P><P CLASS="Option1">-link <I>mainMenuName</I> <I>itemName</I> <I>subMenuName</I></P><P CLASS="OptionText1">Adds a hierarchical submenu. You must include three parameters with this option. <I>mainMenuName</I> specifies the menu to which you are adding a submenu. <I>itemName</I> specifies the item in the main menu from which the submenu descends. <I>subMenuName</I> specifies the name of the submenu (which is typically the same as <I>itemName</I>). Note that when you use DeleteMenu, submenus are not automatically deleted.</P><P CLASS="SectionHd"><A NAME="examples"></A>EXAMPLES</P><P CLASS="Text1">The following command line creates the Info menu and appends the italicized menu item <I>Files and Directories</I>. This menu item lists the full pathname of each file and directory in the current directory.</P><P CLASS="Code">AddMenu Info 'Files and Directories&lt;I' 'Files -f'</P><P CLASS="Text1">In the following example, AddMenu creates an Extras menu with a TimeStamp item. Choosing the menu item or typing its keyboard equivalent, Command-2, writes the current time and date in the active window. </P><P CLASS="Code">AddMenu Extras &quot;TimeStamp/2&quot; 'Echo The date is: `Date`' </P><P CLASS="Text1">Adding the following commands to your <FONT FACE="courier">UserStartup&#149;<I>name</I></FONT> file appends new menu items to the Find menu to create the menu shown in <A HREF="#figure1">Figure 1</A>.</P><P CLASS="Code">AddMenu Find '(-' ''<BR>AddMenu Find 'Top/6' 'Find &#149; &quot;{Target}&quot;'<BR>AddMenu Find 'Bottom/5' 'Find &#8734; &quot;{Target}&quot;'</P><P CLASS="FigureTitle"><A NAME="figure1"></A>Figure 1: The Find menu with appended menu items</P><P CLASS="Text1"><IMG SRC="images/addmenu.gif"></P><P CLASS="Text1">The first command line creates a new section at the bottom of the menu by inserting a disabled separator (<FONT FACE="courier">'(-'</FONT>) as a menu item. The newly created Top and Bottom menu items appear below the separator and allow the user to position the insertion point at the top (<FONT FACE="courier">&#149;</FONT>) and bottom (<FONT FACE="courier">&#8734;</FONT>) of the target window. Their keyboard equivalents appear to the right of their names.</P><P CLASS="Note"><B>Note</B><BR>In these examples, the <FONT FACE="courier">Find</FONT> command operates on text in a target window (not in the active window), so the new menu items work only if a target window is open. &#149;</P><P CLASS="Text1">Notice the use of quotation marks in the previous example. The menu items (<I>itemName</I>) and command strings (<I>commandString</I>) are placed in single quotation marks so that the MPW Shell does not misinterpret the special characters used in the strings. These special characters include the metacharacters used to create the keyboard equivalents for the menu items. These quotation marks are stripped before the new menu items are added.</P><P CLASS="Text1">The last two command lines also employ nested quotation marks in the <I>commandString</I> parameter. The <FONT FACE="courier">{Target}</FONT> variable is enclosed in double quotation marks so that it expands to the value of the target window when the menu item is chosen rather than when the AddMenu command is executed.</P><P CLASS="Text1">In the following example, the <FONT FACE="courier">-help</FONT> option specifies that AddMenu is to add the menu item Custom Help to the Help menu.</P><P CLASS="Code">AddMenu -help &quot;Custom Help&quot; 'alert &quot;Put your help alert here.&quot;'</P><P CLASS="Text1">When you choose Custom Help from the Help menu, MPW displays the alert dialog box.</P><P CLASS="SectionHd">LIMITATIONS</P><P CLASS="Text1">Menus and menu items created with this command do not persist beyond the current MPW session unless you place the appropriate AddMenu commands in your <FONT FACE="courier">UserStartup&#149;<I>name</I></FONT> file.</P><P CLASS="Text1">You cannot append menu items to the Window, Mark, or Apple menus.</P><P CLASS="Text1">You cannot specify keyboard equivalents for items in the Help menu.</P><P CLASS="Text1">AddMenu allows a maximum of 235 user-defined menus on systems running Mac OS 8.1 or earlier, and a maximum of 996 user-defined menus on systems running Mac OS 8.5 or later.</P><P CLASS="SectionHd">SEE ALSO</P><P CLASS="Text1"><FONT FACE="courier"><A HREF="deletemenu.html">DeleteMenu</A></FONT></P><P CLASS="Text1">The Menu Manager chapter in <I>Inside Macintosh: Macintosh Toolbox Essentials.</I></P><P CLASS="SectionHd"><A NAME="table1"></A>TABLE 1</P><!-- Table Start --><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD ROWSPAN="1" COLSPAN="1" VALIGN="top"><P CLASS="TableHdL">Metacharacter</P></TD><TD ROWSPAN="1" COLSPAN="1" VALIGN="top"><P CLASS="TableHdR">Description</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1" VALIGN="top"><P CLASS="TableCodeL">/<I>char</I></P></TD><TD ROWSPAN="1" COLSPAN="1" VALIGN="top"><P CLASS="TableTextR">Assigns <I>char</I>, in combination with the Command key, as the keyboard equivalent of the menu item.</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1" VALIGN="top"><P CLASS="TableCodeL">!<I>char</I></P></TD><TD ROWSPAN="1" COLSPAN="1" VALIGN="top"><P CLASS="TableTextR">Defines <I>char</I> as a custom mark for the menu item (for example, a bullet or check); <I>char</I> is placed to the left of the menu item.</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1" VALIGN="top"><P CLASS="TableCodeL">^<I>n</I></P></TD><TD ROWSPAN="1" COLSPAN="1" VALIGN="top"><P CLASS="TableTextR">Assigns an icon to a menu item, where <I>n</I> is the icon number.</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1" VALIGN="top"><P CLASS="TableCodeL">(</P></TD><TD ROWSPAN="1" COLSPAN="1" VALIGN="top"><P CLASS="TableTextR">Disables (dims) the menu item.</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1" VALIGN="top"><P CLASS="TableCodeL">&lt;<I>style</I></P></TD><TD ROWSPAN="1" COLSPAN="1" VALIGN="top"><P CLASS="TableTextR">Assigns a special character style; this can be any of the following capital letters:<BR><FONT FACE="courier">B - </FONT>Bold <BR><FONT FACE="courier">I - </FONT>Italic<BR><FONT FACE="courier">U - </FONT>Underline<BR><FONT FACE="courier">O - </FONT>Outline<BR><FONT FACE="courier">S - </FONT>Shadow</P><P CLASS="TableTextR">Multiple styles can be specified for a single menu item; each style must be preceded by the &lt; character.</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1" VALIGN="top"><P CLASS="TableCodeL">-</P></TD><TD ROWSPAN="1" COLSPAN="1" VALIGN="top"><P CLASS="TableTextR">Adds a separator as a menu item when placed at the beginning of <I>itemName</I>.</P></TD></TR></TABLE><!-- Table End --><P CLASS="Text1">&nbsp;<BR>&nbsp;</P><HR WIDTH="600" ALIGN="LEFT"><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">    <TR>        <TD WIDTH="200"><P CLASS="FooterLink"><A HREF="aboutbox.html">Previous</A></P></TD>        <TD WIDTH="200"><P CLASS="FooterLink"><A HREF="index.html">Table of Contents</A></P></TD>        <TD WIDTH="200"><P CLASS="FooterLink"><A HREF="addpane.html">Next</A></P></TD>    </TR></TABLE><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>        <TD WIDTH="600">        <P CLASS="Copyright">Copyright Apple Computer, Inc. 1993-2000</P>        <P CLASS="Date">Last Updated July 2000</P>       </TD>    </TR></TABLE></TD></TR></TABLE><!--#include virtual="/footer" --></BODY></HTML>