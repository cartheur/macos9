<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML><HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1"><META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css"><LINK REL="STYLESHEET" HREF="cmdref.css" CHARSET="ISO-8859-1" TYPE="text/css"><TITLE>MergeFragment</TITLE></HEAD><BODY BGCOLOR="#ffffff"><!--#include file="breadcrumb" --><!--#include virtual="/adcnavbar" --><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD><TABLE WIDTH="600" BGCOLOR="0" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD><P CLASS="BookTitle">MPW Command Reference</P></TD>	</TR></TABLE><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="mergebranch.html">Previous</A></P></TD>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="index.html">Table of Contents</A></P></TD>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="modifyreadonly.html">Next</A></P></TD>	</TR></TABLE><HR WIDTH="600" ALIGN="LEFT"><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="475"><P CLASS="PageHdL">MergeFragment</P></TD>		<TD WIDTH="125"><P CLASS="PageHdR">Tool</P></TD>	</TR></TABLE><P CLASS="SectionHd">SYNTAX</P><P CLASS="Syntax">MergeFragment [<I>pefFile</I>[,<I>pefFile</I>]&#133;] <I>targetFile</I> [-a] [-c] [-d]<BR>[-n <I>fragName</I>] [-p] [-r] [-t <B>pwpc</B> | m68k] [-u] [-x] [-z]</P><P CLASS="SectionHd">DESCRIPTION</P><P CLASS="Text1">There are two ways to use the MergeFragment tool. The most common way is to merge several PEF files into one file. The tool concatenates the data forks of each file and merges the <FONT FACE="courier">'cfrg'</FONT> resources together into a single resource, as shown in the figure below, using the last filename that appears on the command line as the target file.</P><P CLASS="Text1"><IMG SRC="images/mergefragment.gif"></P><P CLASS="Text1">MergeFragment merges a code fragment into the target PEF file only if its name, version, or architecture type differ from an existing PEF code fragment, as indicated by the <FONT FACE="courier">'cfrg'</FONT> resource. The target file might contain a code fragment, which is preserved by MergeFragment.</P><P CLASS="Text1">MergeFragment can also create a <FONT FACE="courier">'cfrg'</FONT> resource for a PEF file that does not have one if the file contains one code fragment. The default values in this resource are <FONT FACE="courier">kIsLib</FONT> for its usage, <FONT FACE="courier">kPowerPCArch</FONT> for its architecture, and a fragment name that is the same as the filename unless you set it to some other name with the <FONT FACE="courier">-n</FONT> option.</P><P CLASS="SectionHd">INPUT</P><P CLASS="Text1">Any number of PEF files. MergeFragment does not accept standard input.</P><P CLASS="SectionHd">OUTPUT</P><P CLASS="Text1">A single PEF file. If you specify multiple input files on the command line, the output file contains all code fragments, along with an entry for each fragment in the <FONT FACE="courier">'cfrg'</FONT> resource.</P><P CLASS="SectionHd">STATUS</P><P CLASS="Text1">MergeFragment can return the following status codes:<BR><BR></P><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">0</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">no errors</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">1</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">fatal error</P></TD></TR></TABLE><P CLASS="SectionHd">PARAMETERS</P><P CLASS="Option1"><I>pefFile</I>[,<I>pefFile</I>]&#133;</P><P CLASS="OptionText1">One or more PEF files, possibly containing <FONT FACE="courier">'cfrg'</FONT> resources. If more than one file is specified, the <FONT FACE="courier">'cfrg'</FONT> resources from those files are merged and the contents of the each file's data fork are appended to <I>targetFile</I>.</P><P CLASS="Option1"><I>targetFile</I></P><P CLASS="OptionText1">A file to which the new <FONT FACE="courier">'cfrg'</FONT> resource is written and to which the contents of the data forks of the other PEF files are appended. No other resources besides the <FONT FACE="courier">'cfrg'</FONT> resource are included in the target file. The target file is created automatically if it does not already exist.</P><P CLASS="SectionHd">OPTIONS</P><P CLASS="Option1">-a</P><P CLASS="OptionText1">Sets the usage type of the code fragment to application (<FONT FACE="courier">kIsApp</FONT>). The default is library (<FONT FACE="courier">kIsLib</FONT>).</P><P CLASS="Option1">-c</P><P CLASS="OptionText1">Creates a default <FONT FACE="courier">'cfrg'</FONT> resource if <I>targetFile </I>does not contain one.</P><P CLASS="OptionNote1"><B>Note</B><BR>MergeFragment doesn't copy the version information from the source PEF container into the <FONT FACE="courier">'cfrg'</FONT> resource when the <FONT FACE="courier">-c</FONT> option is used.  Since both PPCLink and ILink create default <FONT FACE="courier">'cfrg'</FONT> resources when creating PEF output files, there is no need to have MergeFragment create a default <FONT FACE="courier">'cfrg'</FONT> using the <FONT FACE="courier">-c</FONT> option.&#149;</P><P CLASS="Option1">-d</P><P CLASS="OptionText1">Specifies that the data fork of <I>targetFile </I>does not contain a code fragment.</P><P CLASS="Option1">-n <I>fragName</I></P><P CLASS="OptionText1">Sets the name of the code fragment when creating a default <FONT FACE="courier">'cfrg'</FONT>.</P><P CLASS="Option1">-p</P><P CLASS="OptionText1">Displays progress information.</P><P CLASS="Option1">-r</P><P CLASS="OptionText1">Specifies that the <FONT FACE="courier">'cfrg'</FONT> resource entry is for a CFM-68K code fragment (<FONT FACE="courier">'rseg'</FONT> resource).</P><P CLASS="Option1">-t <B>pwpc</B> | m68k</P><P CLASS="OptionText1">Defines the architecture for the created <FONT FACE="courier">'cfrg'</FONT> entry, either the PowerPC (<FONT FACE="courier">pwpc</FONT>) or CFM-68K (<FONT FACE="courier">m68k</FONT>) runtime architecture.</P><P CLASS="Option1">-u</P><P CLASS="OptionText1">Sets <FONT FACE="courier">'cfrg'</FONT> update level to update library (<FONT FACE="courier">kUpdateLib</FONT>).</P><P CLASS="Option1">-x</P><P CLASS="OptionText1">Deletes any existing <FONT FACE="courier">'cfrg'</FONT> resource in the target file.</P><P CLASS="Option1">-z</P><P CLASS="OptionText1">Truncates the data fork of the target file before merging.</P><P CLASS="SectionHd">EXAMPLES</P><P CLASS="Text1">If you have two import libraries and you want to merge them into a single file without creating a new file, use the following command:</P><P CLASS="Code">MergeFragment myImportLib1 myImportLib2</P><P CLASS="Text1">where <FONT FACE="courier">myImportLib2</FONT> is the target file. </P><P CLASS="Text1">To create a fat application that contains both a PowerPC and 68K version of the application, use the following command</P><P CLASS="Code">MergeFragment myApp.PPC myApp.68K</P><P CLASS="Text1">where <FONT FACE="courier">myApp.PPC</FONT>is the PowerPC version and <FONT FACE="courier">MyApp.68K</FONT> is the 68K version. </P><P CLASS="SectionHd">LIMITATIONS</P><P CLASS="Text1">MergeFragment does not verify that the input file contains a valid PEF container.</P><P CLASS="SectionHd">SEE ALSO</P><P CLASS="Text1"><FONT FACE="courier"><A HREF="dumppef.html">DumpPEF</A></FONT></P><P CLASS="Text1"><FONT FACE="courier"><A HREF="ilink.html">ILink</A></FONT></P><P CLASS="Text1"><FONT FACE="courier"><A HREF="ppclink.html">PPCLink</A></FONT></P><P CLASS="Text1">&nbsp;<BR>&nbsp;</P><HR WIDTH="600" ALIGN="LEFT"><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="mergebranch.html">Previous</A></P></TD>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="index.html">Table of Contents</A></P></TD>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="modifyreadonly.html">Next</A></P></TD>	</TR></TABLE><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="600">		<P CLASS="Copyright">Copyright Apple Computer, Inc. 1993-2000</P>		<P CLASS="Date">Last Updated July 2000</P>		</TD>	</TR></TABLE></TD></TR></TABLE><!--#include virtual="/footer" --></BODY></HTML>