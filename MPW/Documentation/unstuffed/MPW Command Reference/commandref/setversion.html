<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML><HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1"><META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css"><LINK REL="STYLESHEET" HREF="cmdref.css" CHARSET="ISO-8859-1" TYPE="text/css"><TITLE>SetVersion </TITLE></HEAD><BODY BGCOLOR="#ffffff"><!--#include file="breadcrumb" --><!--#include virtual="/adcnavbar" --><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD><TABLE WIDTH="600" BGCOLOR="0" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD><P CLASS="BookTitle">MPW Command Reference</P></TD>	</TR></TABLE><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="setshellsize.html">Previous</A></P></TD>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="index.html">Table of Contents</A></P></TD>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="shift.html">Next</A></P></TD>	</TR></TABLE><HR WIDTH="600" ALIGN="LEFT"><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="475"><P CLASS="PageHdL">SetVersion</P></TD>		<TD WIDTH="125"><P CLASS="PageHdR">Tool</P></TD>	</TR></TABLE><P CLASS="SectionHd">SYNTAX</P><P CLASS="Syntax">SetVersion <I>file</I> [-b] [-country <I>name</I>] [-csource <I>file</I>] [-d] [-fmt <I>nf</I>.<I>mf</I>]<BR>[-i <I>id</I>] [-noResolve] [-p] [-prefix <I>prefix</I>] [-[p]source <I>file</I>] [-r]<BR>[-rezsource <I>file</I>] [-sb <I>bugFix</I>] [-sr <I>revision</I>] [-stage <I>stage</I>]<BR>[-suffix <I>suffix</I>] [-sv <I>version</I>] [-sx <I>nonrel</I>] [-sync 1 | 2] [-t <I>type</I>]<BR>[-v] [-verid <I>identifier</I>] [-version <I>fmtString</I>] [-verstring <I>longString</I>] [-x]</P><P CLASS="SectionHd">DESCRIPTION</P><P CLASS="Text1">The SetVersion command allows you to set or increment components of a file's version. To do this you can use either of two version formats that correspond to the two types of resources in which the version can be stored. The components of the first format are stored in an MPW-specific resource of type <FONT FACE="courier">'MPST'</FONT> and ID 0. The components of the second format are stored in a Finder-related resource of type <FONT FACE="courier">'vers'</FONT> and ID 1 or 2.</P><P CLASS="Text1"><BR><B><FONT FACE="courier">'MPST'</FONT> Resource</B></P><P CLASS="Text1">In the <FONT FACE="courier">'MPST'</FONT> format, the version is displayed in a simple form as</P><P CLASS="Code"><I>version.revision</I></P><P CLASS="Text1">where <I>version</I> and <I>revision</I> represent the file's version and revision number (for example, <FONT FACE="courier">1.4</FONT>). The resource containing this version information (<FONT FACE="courier">'MPST'</FONT>, <FONT FACE="courier">0</FONT>) is used by </P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>applications (for example, in their About dialog boxes)</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>MPW tools (for instance, when <FONT FACE="courier">-p</FONT> displays version information)</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>Commando dialog boxes, each of which displays version information below its &quot;do it&quot; button</P><P CLASS="Text1">Since SetVersion uses <FONT FACE="courier">'MPST'</FONT>, <FONT FACE="courier">0</FONT> by default, you can either omit <FONT FACE="courier">-t</FONT> (type) and <FONT FACE="courier">-i</FONT> (ID) or explicitly specify <FONT FACE="courier">'MPST'</FONT> for <FONT FACE="courier">-t</FONT> and <FONT FACE="courier">0</FONT> for <FONT FACE="courier">-i</FONT>. This tells SetVersion that you want to use the <FONT FACE="courier">'MPST'</FONT> resource and thus controls the options that you can use with this tool, although some options can be used for both <FONT FACE="courier">'MPST'</FONT> and <FONT FACE="courier">'vers'</FONT> resources. For instance, both allow you to set and increment version and revision numbers (<FONT FACE="courier">-sv</FONT>, <FONT FACE="courier">-v</FONT>, <FONT FACE="courier">-sr</FONT>, and <FONT FACE="courier">-r</FONT>).</P><P CLASS="Text1">Other options are specific to <FONT FACE="courier">'MPST'</FONT> and allow you to do such things as</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>specify a prefix (<FONT FACE="courier">-prefix</FONT>) for the version number and a suffix (<FONT FACE="courier">-suffix</FONT>) for the revision number (which allows you to create more complex version numbers such as <FONT FACE="courier">&quot;Version x1.23B2&quot;</FONT>)</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>set the format for the version and revision number (<FONT FACE="courier">-fmt</FONT>)</P><P CLASS="Text1"><BR><B><FONT FACE="courier">'vers'</FONT> Resources</B></P><P CLASS="Text1">In the second format, the version is displayed in a more complex form as </P><P CLASS="Code"><I>version.revision.bugFix.release.nonrelease</I></P><P CLASS="Text1">where <I>version</I> and <I>revision</I> refer to the version and revision numbers; <I>bugFix</I> to the bugFix number; <I>release</I> to the release letter (<FONT FACE="courier">d</FONT> for development, <FONT FACE="courier">a</FONT> for alpha, <FONT FACE="courier">b</FONT> for beta, omitted for final); and <I>nonrelease</I> to the nonrelease number. (For instance, <FONT FACE="courier">1.4d2</FONT> is a valid revision number of this format.)</P><P CLASS="Text1">As with the first version number format, the resources containing this information (<FONT FACE="courier">'vers'</FONT>, <FONT FACE="courier">1</FONT> or <FONT FACE="courier">'vers'</FONT>, <FONT FACE="courier">2</FONT>) are used by applications, MPW tools, and Commando dialog boxes. However, unlike the other resource, <FONT FACE="courier">'vers'</FONT> resources are also used by the Finder to</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>view files by their version </P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>display in the file's Get Info window the version of the file (contained in <FONT FACE="courier">'vers'</FONT>, <FONT FACE="courier">1</FONT>) and the version of the set of files, or bundle, of which it is a part (contained in <FONT FACE="courier">'vers'</FONT>, <FONT FACE="courier">2</FONT>)</P><P CLASS="Text1">To use this version format, you must explicitly specify <FONT FACE="courier">'vers'</FONT> for <FONT FACE="courier">-t</FONT> (type) and either <FONT FACE="courier">1</FONT>  or <FONT FACE="courier">2</FONT> for <FONT FACE="courier">-i</FONT> (ID). Doing so controls which  options you can use with this command. In addition to the <FONT FACE="courier">-sv</FONT>, <FONT FACE="courier">-v</FONT>, <FONT FACE="courier">-sr</FONT>, and <FONT FACE="courier">-r</FONT> options that can be used for both <FONT FACE="courier">'vers'</FONT> and <FONT FACE="courier">'MPST'</FONT> resources to set and increment version and revision numbers, you can use other options that are  specific to <FONT FACE="courier">'vers'</FONT> resources. These allow you to do such things as</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>set (<FONT FACE="courier">-sb</FONT>) and increment (<FONT FACE="courier">-b</FONT>) the bug fix number</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>set the release letter (<FONT FACE="courier">-stage</FONT>)</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>set (<FONT FACE="courier">-sx</FONT>) and increment (<FONT FACE="courier">-x</FONT>) the nonrelease number</P><P CLASS="Note"><B>Note</B><BR>For more information on the use of <FONT FACE="courier">'vers'</FONT> resources and on the resource itself, see <I>Inside Macintosh</I>. &#149;</P><P CLASS="Text1"><BR>Since the options depend on which version resource type you specify for <FONT FACE="courier">-t</FONT> (<FONT FACE="courier">'MPST'</FONT> or <FONT FACE="courier">'vers'</FONT>), the table below lists the options that apply to both  <FONT FACE="courier">'MPST'</FONT> and <FONT FACE="courier">'vers'</FONT> resources, those that  apply only to <FONT FACE="courier">'MPST'</FONT> resources, and those that apply only to <FONT FACE="courier">'vers'</FONT> resources.</P><!-- Table Start --><P CLASS="TableTitle">Options for 'MPST' and 'vers' resources</P><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableHdL">Both</P></TD><TD ROWSPAN="1" COLSPAN="1" WIDTH="150"><P CLASS="TableHdR">'MPST'</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableHdR">'vers'</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeL">-t <I>type</I></P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">-fmt <I>nf</I>.<I>mf</I></P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">-b</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeL">-i <I>id</I></P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">-prefix <I>prefix</I></P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">-country <I>name</I></P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeL">-csource <I>file</I> </P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">-suffix <I>suffix</I></P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">-sb <I>bugFix</I></P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeL">-d</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">&nbsp;</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">-stage <I>stage</I></P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeL">-noResolve</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">&nbsp;</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">-sx <I>nonrel</I></P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeL">-p</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">&nbsp;</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">-syn 1 | 2</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeL">-[p]source <I>file</I></P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">&nbsp;</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">-verstring <I>longString</I></P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeL">-rezsource <I>file</I></P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">&nbsp;</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">-x</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeL">-sr <I>revision</I></P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">&nbsp;</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">&nbsp;</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeL">-sv <I>version</I></P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">&nbsp;</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">&nbsp;</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeL">-v</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">&nbsp;</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">&nbsp;</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeL">-verid <I>identifier</I></P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">&nbsp;</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">&nbsp;</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeL">-version <I>fmtString</I></P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">&nbsp;</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">&nbsp;</P></TD></TR></TABLE><!-- Table End --><P CLASS="Text1">There are two additional ways to set the version of a file: you can use <FONT FACE="courier">-version</FONT> to set the version as a string (for example, <FONT FACE="courier">'3.3b1'</FONT>) or you can define the version as a constant in a source file. The second method allows you to access a source file's version even when its resource is damaged. You can update a version set this way by using the <FONT FACE="courier">-csource</FONT>, <FONT FACE="courier">-[p]source</FONT>, or <FONT FACE="courier">-rezsource</FONT> options.</P><P CLASS="Text1">Normally SetVersion is used as part of a makefile to automatically increment specific version number components each time an application or tool is rebuilt. Note that when SetVersion modifies a file's <FONT FACE="courier">'MPST'</FONT> or <FONT FACE="courier">'vers'</FONT> resource, it does not change its modification date. Thus using this command does not affect the file's makefile.</P><P CLASS="SectionHd">INPUT</P><P CLASS="Text1">An input file (<I>file</I>) that contains either an <FONT FACE="courier">'MPST'</FONT> resource or one of the <FONT FACE="courier">'vers'</FONT> resources.</P><P CLASS="SectionHd">OUTPUT</P><P CLASS="Text1">None</P><P CLASS="SectionHd">ALIAS RESOLUTION</P><P CLASS="Text1">This command resolves all Finder aliases used as part of any pathname or filename, including both embedded aliases and leaf aliases. If you wish to use SetVersion to manipulate the version of a Finder alias file, use the option <FONT FACE="courier">-noResolve</FONT>.</P><P CLASS="SectionHd">STATUS</P><P CLASS="Text1">SetVersion can return the following status codes:<BR><BR></P><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">0</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">no errors</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">1</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">parameter or option error</P></TD></TR></TABLE><P CLASS="SectionHd">PARAMETERS</P><P CLASS="Option1"><I>file</I></P><P CLASS="OptionText1">Specifies the file for which the version number is set. </P><P CLASS="SectionHd">OPTIONS</P><P CLASS="Option1">-b</P><P CLASS="OptionText1">Increments the bug-fix level by one. </P><P CLASS="Option1">-country <I>name</I></P><P CLASS="OptionText1">Specifies a country or region from the Text Utility's country code. Normally SetVersion uses the code from the current country. The table below lists the names that you can specify for this option.<BR><BR></P><!-- Table Start --><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD ROWSPAN="8" COLSPAN="1" WIDTH="117" ALIGN="left"></TD><TD ROWSPAN="1" COLSPAN="1" WIDTH="100"><P CLASS="TableTextR">Arabia</P></TD><TD ROWSPAN="1" COLSPAN="1" WIDTH="100"><P CLASS="TableTextR">France</P></TD><TD ROWSPAN="1" COLSPAN="1" WIDTH="100"><P CLASS="TableTextR">Israel</P></TD><TD ROWSPAN="1" COLSPAN="1" WIDTH="100"><P CLASS="TableTextR">Spain</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">Australia</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">FrCanada</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">Italy</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">Sweden</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">BelgiumLux</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">FrSwiss</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">Japan</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">Taiwan</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">Britain</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">Germany</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">Korea</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">Thailand</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">China</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">Greece</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">Malta</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">Turkey</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">Cyprus</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">GrSwiss</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">Netherlands</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">US</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">Denmark</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">Iceland</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">Norway</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">Yugoslavia</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">Finland</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">Ireland</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">Portugal</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">&nbsp;</P></TD></TR></TABLE><!-- Table End --><P CLASS="Option1">-csource <I>file</I></P><P CLASS="OptionText1">Updates the string constant in the specified C source file. This sets the version number as a string constant in the file itself, allowing you to retrieve the information even if the file's resource fork is damaged. The constant is set to be the same as that specified by the <FONT FACE="courier">'MPST'</FONT> resource or the short version string from a <FONT FACE="courier">'vers'</FONT> resource, which is normally just the version and revision number. </P><P CLASS="OptionText1">The SetVersion tool assumes that the constant is defined as a string constant in a <FONT FACE="courier">#define</FONT>, somewhere in the first 12,800 characters of the file, as follows:</P><P CLASS="OptionCode1">#define Version &quot;<I>ver</I>.<I>rev</I>&#133;&quot;&#8710;&#8710;&#8710;&#8710;&#8710;&#8710;&#8710;&#8710;&#8710;&#8710;/*<I>comment</I>*/</P><P CLASS="OptionText1">The <FONT FACE="courier">&#8710;</FONT> characters indicate a sufficient number of spaces to allow for future changes in the size of the version component values. Leave as many as necessary--too many are not a problem but using too few results in an error. The comment is required.</P><P CLASS="OptionNote1"><B>Note</B><BR>SetVersion ignores case and skips C comments when searching for a <FONT FACE="courier">#define Version</FONT> identifier in the source. Use <FONT FACE="courier">-verid</FONT> to search for a different <FONT FACE="courier">#define</FONT> identifier (instead of <FONT FACE="courier">Version</FONT>). &#149;</P><P CLASS="Option1">-d</P><P CLASS="OptionText1">Writes the (updated) version component values to standard output. For <FONT FACE="courier">'vers'</FONT> resources, the display indicates which values go with which resource (that is,<FONT FACE="courier">'vers'</FONT>, <FONT FACE="courier">1</FONT> or <FONT FACE="courier">'vers'</FONT>, <FONT FACE="courier">2</FONT>).</P><P CLASS="Option1">-fmt <I>nf</I>.<I>mf</I></P><P CLASS="OptionText1">Formats the version and revision values to the specified format, where <I>n</I> and <I>m</I> are numbers 1 to 10 specifying the field width, and <I>f</I> is the letter <FONT FACE="courier">D</FONT> or <FONT FACE="courier">Z</FONT> specifying either leading spaces or zeros.</P><P CLASS="OptionText1">This means that if the version or revision number is larger than the specified field width, the width is enlarged to contain the entire value. If either number is smaller than the specified field width, it is independently padded up to the specified width with leading spaces (<FONT FACE="courier">D</FONT>) or zeros (<FONT FACE="courier">Z</FONT>).</P><P CLASS="OptionText1">For example, a format of <FONT FACE="courier">1Z.3Z</FONT> for a version number of 10.2 would be formatted as <FONT FACE="courier">d10.002</FONT>. Note that the default format is <FONT FACE="courier">1Z.1Z</FONT>; if you omit either the version (<FONT FACE="courier"><I>nf</I></FONT>) or the revision (<FONT FACE="courier"><I>mf</I></FONT>) format, SetVersion formats that value according to the default.</P><P CLASS="OptionNote1"><B>Note</B><BR>The format of the resource does not change unless the version or revision number actually changes through the use of the <FONT FACE="courier">-sv</FONT>, <FONT FACE="courier">-v</FONT>, <FONT FACE="courier">-sr</FONT>, or <FONT FACE="courier">-r</FONT> options. &#149;</P><P CLASS="Option1">-i <I>id</I></P><P CLASS="OptionText1">Specifies the resource ID as either 0, 1, or 2. For an <FONT FACE="courier">'MPST'</FONT> resource, SetVersion assumes an ID of 0. For a <FONT FACE="courier">'vers'</FONT> resource, you must specify an ID of 1 or 2. </P><P CLASS="OptionText1">Omitting this option while specifying a <FONT FACE="courier">'vers'</FONT> resource sets the version for both <FONT FACE="courier">'vers'</FONT> <FONT FACE="courier">1</FONT> and<FONT FACE="courier"> 2</FONT>.This option must be omitted if you specify <FONT FACE="courier">-sync</FONT>.</P><P CLASS="Option1">-noResolve</P><P CLASS="OptionText1">Prevents the resolution of the leaf alias of the target file path. Using this option you can operate on a Finder alias file instead of the file to which it refers. </P><P CLASS="Option1">-p</P><P CLASS="OptionText1">Writes the version number of both SetVersion and <I>file</I> to diagnostic output. For <I>file</I>, SetVersion looks for the version number in the resource specified by <FONT FACE="courier">-t</FONT>. </P><P CLASS="Option1">-prefix <I>prefix</I></P><P CLASS="OptionText1">Specifies a prefix for the version number, where <I>prefix</I> can be any string that does not contain a period or slash (<FONT FACE="courier">/</FONT>) and does not end with a digit (0-9), a space, or the % or <FONT FACE="courier">&#8710;</FONT> (Option-J) characters. (You can insert a space by choosing an appropriate <FONT FACE="courier">-fmt</FONT> format with leading spaces for the version number.)</P><P CLASS="OptionText1">Once the prefix is set, you can change it only by specifying another <FONT FACE="courier">-prefix</FONT> string. Alternatively, you can remove the prefix by specifying the prefix as a period (<FONT FACE="courier">.</FONT>). </P><P CLASS="Option1">-[p]source <I>file</I></P><P CLASS="OptionText1">Updates the string constant in the specified Pascal source file. This sets the version number as a string constant in the file itself, allowing you to retrieve the information even if the file's resource fork is damaged. The constant is set to be the same as that specified by the <FONT FACE="courier">'MPST'</FONT> resource or by the short version string from a <FONT FACE="courier">'vers'</FONT> resource, which is normally just the version and revision number. </P><P CLASS="OptionText1">The SetVersion tool assumes that the constant is defined as a string constant in a <FONT FACE="courier">CONST</FONT> section, somewhere in the first 12,800 characters of the file, as follows:</P><P CLASS="OptionCode1">Version = '<I>ver</I>.<I>rev</I>&#133;';&#8710;&#8710;&#8710;&#8710;&#8710;&#8710;&#8710;&#8710;&#8710;&#8710;{<I>comment</I>}</P><P CLASS="OptionText1">The <FONT FACE="courier">&#8710;</FONT> characters indicate a sufficient number of spaces to allow for future changes in the size of the version component values. Leave as many spaces as necessary (up to the limit of the <FONT FACE="courier">'vers'</FONT> resource) but don't use too few or you get an error. Note that the comment is required and that you can place spaces and tabs before and after the = character.</P><P CLASS="OptionText1">Note that SetVersion ignores case and skips Pascal comments when searching for the <FONT FACE="courier">Version</FONT> identifier in the source. Use <FONT FACE="courier">-verid</FONT> to search for a different identifier (instead of <FONT FACE="courier">Version</FONT>).</P><P CLASS="Option1">-r</P><P CLASS="OptionText1">Increments the revision number by 1.</P><P CLASS="Option1">-rezsource <I>file</I></P><P CLASS="OptionText1">Updates the resource definition in the specified resource compiler source file. This sets the version number as a resource in the file itself. The constant is set to be the same as that specified by the <FONT FACE="courier">'MPST'</FONT> resource or by the short version string from a <FONT FACE="courier">'vers'</FONT> resource, which is normally just the version and revision number. </P><P CLASS="OptionText1">SetVersion assumes that the definition is somewhere in the first 12,800 characters of the file and is specified as described in the following format:</P><P CLASS="OptionText1">For a SetVersion <FONT FACE="courier">'MPST'</FONT> resource,</P><P CLASS="OptionCode1">type 'MPST' as 'STR ';<BR>resource 'MPST' (0) {<BR>&nbsp;&nbsp;&quot;Version <I>ver</I>.<I>rev</I>&#133;&quot;&#8710;&#8710;&#8710;&#8710;&#8710;&#8710;&#8710;&#8710;&#8710;&#8710;/*<I>comment</I>*/<BR>};</P><P CLASS="OptionNote1"><B>Note</B><BR>This is the type declaration for the same <FONT FACE="courier">'MPST'</FONT> resource used in the SetVersion command's normal operations. &#149;</P><P CLASS="OptionText1">For a Finder <FONT FACE="courier">'vers'</FONT> resource,</P><P CLASS="OptionCode1">resource 'vers' (<I>i</I>) {<BR>&nbsp;&nbsp;0x<I>VV</I>, 0x<I>RB</I>, <I>S</I>, 0x<I>XX</I>, <I>countryCode</I>,&#8710;&#8710;&#8710;/*<I>comment</I>*/<BR>&nbsp;&nbsp;&quot;<I>ver</I>.<I>rev</I>&#133;&quot;,&#8710;&#8710;&#8710;&#8710;&#8710;&#8710;&#8710;&#8710;&#8710;&#8710;/*<I>comment</I>*/<BR>&nbsp;&nbsp;&quot;<I>long version message</I>&quot;&#8710;&#8710;&#8710;&#8710;&#8710;&#8710;&#8710;&#8710;&#8710;&#8710;/*<I>comment</I>*/<BR>};</P><P CLASS="OptionText1">The <FONT FACE="courier">&#8710;</FONT> characters indicate a sufficient number of spaces to allow for future changes in the size of the fields. Leave as many spaces as necessary (up to the limit of the <FONT FACE="courier">'vers'</FONT> resource) but don't use too few or you get an error. Note that the comments are required.</P><P CLASS="OptionText1">SetVersion ignores case and skips Rez comments when searching for the characters <FONT FACE="courier">&quot;resource 'MPST'&quot;</FONT> or <FONT FACE="courier">&quot;resource 'vers'&quot;</FONT> in the source. </P><P CLASS="OptionText1">Since this resource definition is destined to be placed in a file's resource fork, this option defines the actual resource that SetVersion seeks in the file. Therefore this option fixes the <FONT FACE="courier">Version</FONT> identifier in the <FONT FACE="courier">'MPST'</FONT> resource; you cannot override it by using <FONT FACE="courier">-verid</FONT>.</P><P CLASS="Option1">-sb <I>bugFix</I></P><P CLASS="OptionText1">Sets the bug fix number, where <I>bugFix</I> can be any integer value. If the bug fix number is 0, SetVersion suppresses it from the version.</P><P CLASS="Option1">-sr <I>revision</I></P><P CLASS="OptionText1">Sets the revision number, where <I>revision</I> can be any integer value.</P><P CLASS="Option1">-stage <I>stage</I></P><P CLASS="OptionText1">Sets the release stage for a <FONT FACE="courier">'vers'</FONT> resource, where <I>stage</I> can be specified as <FONT FACE="courier">dev[elopment]</FONT>, <FONT FACE="courier">alpha</FONT>,  <FONT FACE="courier">beta</FONT>, or <FONT FACE="courier">rel[ease]</FONT>. This is used to set the  release letter in the version as <FONT FACE="courier">d</FONT>, <FONT FACE="courier">a</FONT>, <FONT FACE="courier">b</FONT>, or none, respectively. </P><P CLASS="OptionText1">If you specify <FONT FACE="courier">rel[ease]</FONT>, SetVersion suppresses the nonrelease-level number as modified by <FONT FACE="courier">-x</FONT> or <FONT FACE="courier">-sx</FONT>.</P><P CLASS="Option1">-suffix <I>suffix</I></P><P CLASS="OptionText1">Specifies a suffix for the revision number, where <I>suffix</I> can be any string that does not contain a period or slash (<FONT FACE="courier">/</FONT>) and does not end with a digit (0-9), a space, or the % or <FONT FACE="courier">&#8710;</FONT> (Option-J) characters. (Note that you can insert a space by choosing an appropriate <FONT FACE="courier">-fmt</FONT> format with leading spaces for the revision number.)</P><P CLASS="OptionText1">Once the prefix is set, you can change it only by specifying another <FONT FACE="courier">-prefix</FONT> string. Alternatively, you can remove the prefix by specifying the prefix as a period (<FONT FACE="courier">.</FONT>). </P><P CLASS="Option1">-sv <I>version</I></P><P CLASS="OptionText1">Sets the version number, where <I>version</I> can be any integer value.</P><P CLASS="Option1">-sx <I>nonrel</I></P><P CLASS="OptionText1">Sets the nonrelease number, where <I>nonrel</I> can be any integer value. </P><P CLASS="Option1">-sync 1 | 2</P><P CLASS="OptionText1">Synchronizes the <FONT FACE="courier">'vers'</FONT> resources, using either <FONT FACE="courier">1</FONT> (<FONT FACE="courier">'vers'</FONT>, <FONT FACE="courier">1</FONT>) or <FONT FACE="courier">2</FONT> (<FONT FACE="courier">'vers'</FONT>, <FONT FACE="courier">2</FONT>) as the master copy. This option copies the version number from either the <FONT FACE="courier">'vers'</FONT>, <FONT FACE="courier">1</FONT> or <FONT FACE="courier">'vers'</FONT>, <FONT FACE="courier">2</FONT> resource in the short and long version strings. This synchronization also copies the BCD value, but not the country code, contained in the <FONT FACE="courier">'vers'</FONT> resource. </P><P CLASS="OptionNote1"><B>Note</B><BR>Since this option modifies both <FONT FACE="courier">'vers'</FONT>, <FONT FACE="courier">1</FONT> and <FONT FACE="courier">'vers'</FONT>, <FONT FACE="courier">2</FONT> resources, you must omit <FONT FACE="courier">-i</FONT> to allow SetVersion to change both resources. &#149;</P><P CLASS="OptionText1">You can specify other options on the command line to modify the master copy before copying it to the other resource. For instance, the following command line increments the revision number (<FONT FACE="courier">-r</FONT>) of the <FONT FACE="courier">'vers'</FONT>, <FONT FACE="courier">1</FONT> resource before copying the version number to <FONT FACE="courier">'vers'</FONT>, <FONT FACE="courier">2</FONT>:</P><P CLASS="OptionCode1">SetVersion -t 'vers' -sync 1 -r</P><P CLASS="Option1">-t <I>type</I></P><P CLASS="OptionText1">Specifies the resource type--either <FONT FACE="courier">'vers'</FONT> or <FONT FACE="courier">'MPST'</FONT>.The default is <FONT FACE="courier">'MPST'</FONT>.</P><P CLASS="Option1">-v</P><P CLASS="OptionText1">Increments the version number by 1.</P><P CLASS="Option1">-verid <I>identifier</I></P><P CLASS="OptionText1">Specifies the identifier to use when searching for the <FONT FACE="courier">-[p]source CONST</FONT> or <FONT FACE="courier">-csource #define</FONT> identifier.</P><P CLASS="Option1">-version <I>fmtString</I></P><P CLASS="OptionText1">Specifies the version number by using the string <I>fmtString</I> instead of the individual options, such as <FONT FACE="courier">-sv</FONT> and <FONT FACE="courier">-v</FONT>, that set and increment the version number. This option is intended for explicit use of the SetVersion tool, while the individual component options are more useful in scripts and makefiles where macros can be used to define individual component parameters.</P><P CLASS="OptionText1">The format string <I>fmtString</I> specifies the format of the version number and whether the individual components are to be set, incremented, or left alone. The format string for the <FONT FACE="courier">'vers'</FONT> resource has the general format </P><P CLASS="OptionCode1"><I>v.rbsx</I></P><P CLASS="OptionText1">where <I>v</I> is the version number, <I>r</I> the revision number, <I>b</I> the bug fix level number, <I>s</I> the release stage letter (<FONT FACE="courier">d</FONT>, <FONT FACE="courier">a</FONT>, <FONT FACE="courier">b</FONT>, or omitted for release stage), and <I>x</I> the nonrelease level number (omitted for release stage).</P><P CLASS="OptionText1">The <FONT FACE="courier">'MPST'</FONT> string resource has the format</P><P CLASS="OptionCode1"><I>v.r</I></P><P CLASS="OptionText1">where <I>v</I> is the version number and <I>r</I> is the revision number. A prefix and suffix can be specified as well.</P><P CLASS="OptionText1">Each of the format string fields (except the prefix and suffix for <FONT FACE="courier">'MPST'</FONT>) can be any of the following:</P><P CLASS="OptionText1"><FONT FACE="courier">&#149; </FONT>an integer (or appropriate letter for the stage component)</P><P CLASS="OptionText1"><FONT FACE="courier">&#149; </FONT>the % character to indicate that the corresponding component is to be left alone</P><P CLASS="OptionText1"><FONT FACE="courier">&#149; </FONT>the <FONT FACE="courier">&#8710;</FONT> (Option-J) character to indicate that the corresponding component is to be incremented</P><P CLASS="Option1">-verstring <I>longString</I></P><P CLASS="OptionText1">Sets the long version string to <I>longString</I>. A ^ character placed in this string indicates the placement of the version, used each time SetVersion updates it. Note that the short version string (normally just the version and revision number) is inserted into the position specified by the ^ character. </P><P CLASS="Option1">-x</P><P CLASS="OptionText1">Increments the nonrelease level by 1. SetVersion suppresses this number for the release stage (<FONT FACE="courier">-stage rel[ease]</FONT>).</P><P CLASS="SectionHd">EXAMPLES</P><P CLASS="Text1">The fictional <FONT FACE="courier">Example</FONT> tool contains a SetVersion <FONT FACE="courier">'MPST'</FONT> string resource. The command line </P><P CLASS="Code">SetVersion Example -sv 1 -r -psource Globals -rezsource Example.r -d</P><P CLASS="Text1">performs many tasks. It sets the version number to one (<FONT FACE="courier">-sv</FONT>) and increments the revision number by one (<FONT FACE="courier">-r</FONT>). It updates the Pascal include file <FONT FACE="courier">Globals</FONT> (<FONT FACE="courier">-psource</FONT>) and the resource file <FONT FACE="courier">Example.r</FONT> (<FONT FACE="courier">-rezsource</FONT>) to match the <FONT FACE="courier">'MPST'</FONT> resource. The <FONT FACE="courier">Globals</FONT> file contains the tool's global declarations, including the version string, and the <FONT FACE="courier">Example.r</FONT> resource file contains the tool's resource definitions. Finally, it writes the new version to standard output (<FONT FACE="courier">-d</FONT>).</P><P CLASS="Text1">Setting the same version information as the previous example, this next example illustrates how the <FONT FACE="courier">-version</FONT> option can be used in place of <FONT FACE="courier">-sv</FONT> and <FONT FACE="courier">-r</FONT>. Here the &#8710; character indicates that the revision number is to be incremented. </P><P CLASS="Code">SetVersion Example -version 1.&#8710; -psource Globals -rezsource Example.r -d</P><P CLASS="Text1">In the following example, a pair of SetVersion commands generates <FONT FACE="courier">'vers'</FONT>, <FONT FACE="courier">1</FONT> and <FONT FACE="courier">'vers'</FONT>, <FONT FACE="courier">2</FONT> resources for the fictional MPW tool, <FONT FACE="courier">MyTool</FONT>. The first SetVersion command sets the version number, <FONT FACE="courier">3.5</FONT>, in a <FONT FACE="courier">'vers'</FONT>, <FONT FACE="courier">1</FONT> resource. It then specifies a long version string (<FONT FACE="courier">-verstring</FONT>) that contains the short version string (<FONT FACE="courier">3.5</FONT>), inserted at the position indicated by the ^ character. </P><P CLASS="Code">SetVersion MyTool -version 3.5 -t vers -i 1 -verstring &#8706; <BR>&nbsp;&nbsp;&quot;^, Copyright &#169; 1987-2000, Apple Computer, Inc.&quot; </P><P CLASS="Text1">The second SetVersion command sets the <FONT FACE="courier">'vers'</FONT>, <FONT FACE="courier">2</FONT> resource. In this resource, the version is set unconditionally to 3.5 and the long version string  to <FONT FACE="courier">&quot;MPW 3.5&quot;</FONT>. The MPW release is MPW 3.5, and <FONT FACE="courier">MyTool</FONT> is one of the files that belongs to that release.</P><P CLASS="Code">SetVersion MyTool -version 3.5 -t vers -i 2 -verstring &quot;MPW 3.5&quot;</P><P CLASS="Text1">The Finder Get Info dialog box, shown below, illustrates the result of using these commands. The <FONT FACE="courier">'vers'</FONT>, <FONT FACE="courier">1</FONT> resource, used in the long version string <FONT FACE="courier">&quot;3.5, Copyright &#169; 1987-2000, Apple Computer, Inc.&quot;</FONT>, indicates the version of <FONT FACE="courier">MyTool</FONT> as a file while the <FONT FACE="courier">'vers'</FONT>, <FONT FACE="courier">2</FONT> resource indicates the version of MPW as a whole.</P><P CLASS="Text1"><IMG SRC="images/setversion.gif"></P><P CLASS="Text1"><BR>The last example illustrates how both <FONT FACE="courier">'vers'</FONT> resources can be used in a makefile. First, macro definitions are created to specify components of the version: </P><PRE CLASS="Code">MPWversion = 3.5                 # product release Copyright  = Copyright &#169; 1987-2000, Apple Computer, Inc.ver1       = ^, {Copyright}      # long string for 'ver',1ver2       = MPW {MPWversion}    # long string for 'ver',2MyToolVer  = -sv 3 -r            # version and revisionStage      = -stage rel -sb 0    # release stage</PRE><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT><FONT FACE="courier">{MPWVersion}</FONT>--the MPW release (which can be changed by a Make <FONT FACE="courier">-d</FONT> option when Make is called)</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT><FONT FACE="courier">{Copyright}</FONT>--the copyright string (which is concatenated into the <FONT FACE="courier">'vers'</FONT>, <FONT FACE="courier">1</FONT> long version string in the macro <FONT FACE="courier">{ver1}</FONT>)</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT><FONT FACE="courier">{ver1}</FONT>--the long version string for the <FONT FACE="courier">'vers'</FONT>, <FONT FACE="courier">1</FONT> resource, displayed as the tool's individual version number</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT><FONT FACE="courier">{ver2}</FONT>--the long version string for the <FONT FACE="courier">'vers'</FONT>, <FONT FACE="courier">2</FONT> resource (which uses <FONT FACE="courier">{MPW version}</FONT>, although ^ could have been used here), displayed at the top of the Finder's Get Info dialog box</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT><FONT FACE="courier">{MyToolVer}</FONT>--the numbering control for the individual tool (used in the makefile for other tools so that for each tool the version number is set to 3 and the revision incremented by 1)</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT><FONT FACE="courier">{Stage}</FONT>--the release stage and bug fix level (set to null and zero to ensure that only the version and revision numbers are displayed)</P><P CLASS="Text1">These macros are then used in the following makefile script to set the version of <FONT FACE="courier">MyTool</FONT> in the <FONT FACE="courier">'vers'</FONT>, <FONT FACE="courier">1</FONT> and <FONT FACE="courier">'vers'</FONT>, <FONT FACE="courier">2</FONT> resources.</P><P CLASS="Code">SetVersion MyTool -t vers -i 1 {MyToolVer} {stage} &#8706;<BR>-verstring &quot;{ver1}&quot; -psource MyTool.p </P><P CLASS="Code">SetVersion MyTool -t vers -i 2 -version {MPWversion} -verstring &quot;{ver2}&quot;</P><P CLASS="SectionHd">SEE ALSO</P><P CLASS="Text1">Information about version resources in <I>Inside Macintosh</I></P><P CLASS="Text1">&nbsp;<BR>&nbsp;</P><HR WIDTH="600" ALIGN="LEFT"><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="setshellsize.html">Previous</A></P></TD>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="index.html">Table of Contents</A></P></TD>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="shift.html">Next</A></P></TD>	</TR></TABLE><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="600">		<P CLASS="Copyright">Copyright Apple Computer, Inc. 1993-2000</P>		<P CLASS="Date">Last Updated July 2000</P>		</TD>	</TR></TABLE></TD></TR></TABLE><!--#include virtual="/footer" --></BODY></HTML>