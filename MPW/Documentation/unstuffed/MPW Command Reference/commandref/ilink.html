<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML><HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1"><META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css"><LINK REL="STYLESHEET" HREF="cmdref.css" CHARSET="ISO-8859-1" TYPE="text/css"><TITLE>ILink </TITLE></HEAD><BODY BGCOLOR="#ffffff"><!--#include file="breadcrumb" --><!--#include virtual="/adcnavbar" --><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD><TABLE WIDTH="600" BGCOLOR="0" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD><P CLASS="BookTitle">MPW Command Reference</P></TD>	</TR></TABLE><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="if.html">Previous</A></P></TD>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="index.html">Table of Contents</A></P></TD>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="ilinktosym.html">Next</A></P></TD>	</TR></TABLE><HR WIDTH="600" ALIGN="LEFT"><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="475"><P CLASS="PageHdL">ILink</P></TD>		<TD WIDTH="125"><P CLASS="PageHdR">Tool</P></TD>	</TR></TABLE><P CLASS="SectionHd">SYNTAX</P><P CLASS="Syntax">ILink <I>file1</I> [<I>file2</I>]&#133; [-ac <I>number</I>] [-ad <I>number</I>]<BR>[-br 020 | 68k | on | <B>off</B>] [-c <I>creator</I>] [-compact] [-d] [-da]<BR> [-@export <I>exportFile</I>] [-export <I>name</I>[,<I>name</I>]&#133;] [-fragname <I>fragName</I>]<BR> [-init <I>initEntry</I>] [-initbefore <I>fragName</I>[,<I>fragName</I>]&#133;] [-l] [-la]<BR>[-m[ain] <I>mainEntry</I>] [-ma <I>name</I>=<I>alias</I>] [-map] [-<B>mf</B> | -nomf]<BR> [-model cfmflat | cfmseg | far | <B>near</B>] [-msg <I>keyword</I>[,<I>keyword</I>]&#133;]<BR> [-newerdeps] [-o <I>outputFile</I>] [-opt <B>on</B> | off | nobypass] [-p]<BR> [-packdata <B>on</B> | off | faster] [-pad <I>number</I>] [-pm on | <B>off</B>]<BR> [-ra [seg]=attr[,<I>attr</I>]&#133;] [-rn] [-rt <I>resType</I>=<I>resID</I>]<BR>[-sg <I>newSeg</I>[=<I>oldSeg1</I>[,<I>oldSeg2</I>]&#133;]] [-sn <I>oldSeg</I>=<I>newSeg</I>]<BR>[-state [no]<B>use</B> | [<B>no</B>]<B>rewrite</B> ] [-t <I>type</I>] [-term <I>termEntry</I>]<BR> [-uf <I>filename</I>] [-unmangle <B>on</B> | off] [-vercur <I>number</I>]<BR> [-verdef <I>number</I>] [-verimp <I>number</I>] [-w[arn]] [-@weak <I>weakFile</I>]<BR> [-weak <I>name</I>[,<I>name</I>]&#133;] [-weaklib <I>fragName</I>[,<I>fragName</I>]&#133;] [-wrap] <BR>[-xm <B>e</B>[<B>xecutable</B>] | s[haredlibrary]]</P><P CLASS="SectionHd">DESCRIPTION</P><P CLASS="Text1">You use the ILink tool to link compiled 68K object files, static libraries, and shared libraries into an application, tool, shared library, or resource.ILink is an incremental linker that you can use to relink a program of any size after a simple change during the development cycle, in a fraction of the time it would take to relink the program using the Link tool. (See the <A HREF="link.html">Link</A> command.)</P><P CLASS="Note"><B>IMPORTANT</B><BR>Do not perform an incremental link on an application that was linked using the Link tool. Remove or rename any existing application before linking with ILink. &#149;</P><P CLASS="Text1">When you use ILink to link your program, the linker creates a state file in which it stores information that it can use the next time it links your program. This file includes a list of the files included in the link and information extracted from the files. ILink uses this information to resolve code and data references. The next time you link, ILink can reuse most of the information stored in this file and thus limit linking to the files that have changed.</P><P CLASS="Text1">The state file is named <FONT FACE="courier"><I>outputfile</I>.NJ</FONT>, where <FONT FACE="courier"><I>outputfile</I></FONT> is the name of the output file.The state file is created the first time you execute ILink; you should therefore expect the initial link to take longer than a subsequent link.</P><P CLASS="Text1">Two command options relate to the incremental linker's use of the state file: </P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>The <FONT FACE="courier">-state</FONT> option specifies whether you want ILink to use or rewrite the state file. The default is <FONT FACE="courier">-state use -state norewrite</FONT>.</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>The <FONT FACE="courier">-newerdeps</FONT> option allows you to control which files get relinked. When <FONT FACE="courier">-newerdeps</FONT> is specified, only those object files listed on the command line get relinked, all others are ignored. For example, the following command specifies that only the files <FONT FACE="courier">MySource1.c.o</FONT> and <FONT FACE="courier">MySource2.c.o</FONT> will be relinked.</P><P CLASS="Code">ILink -newerdeps MySource1.c.o MySource2.c.o</P><P CLASS="Text1">Using the <FONT FACE="courier">-newerdeps</FONT> option can save some time because the ILink tool does not have to determine which files have changed. You can also use the <FONT FACE="courier">-newerdeps</FONT> option in your makefile. </P><P CLASS="Note"><B>Note</B><BR>If you include options on an ILink command line that are supported by Link and not ILink, they will be ignored by ILink.For example, the <FONT FACE="courier">-sym</FONT> option is ignored, so no SYM file is created. You must use the ILinkToSYM tool to create a SYM file. &#149;</P><P CLASS="SectionHd">INPUT</P><P CLASS="Text1">ILink accepts the following input:</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>Object files of type <FONT FACE="courier">'OBJ '</FONT>.</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>Static libraries of type <FONT FACE="courier">'OBJ '</FONT>.</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>Shared libraries of type <FONT FACE="courier">'shlb'</FONT>.</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>Stub library files of type <FONT FACE="courier">'stub'</FONT>.</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>CFM-68K runtime applications of type <FONT FACE="courier">'APPL'</FONT>.<BR></P><P CLASS="Text1">Note that the linker can combine object files written in different languages. The ILink tool does not accept standard input.</P><P CLASS="SectionHd">OUTPUT</P><P CLASS="Text1">ILink produces the following types of output files:</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>Classic 68K runtime application or tool</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>Classic 68K stand-alone code resource</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>CFM-68K runtime application </P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>CFM-68K runtime shared library<BR></P><P CLASS="Text1">By default, the linker names the output file <FONT FACE="courier">Link.out</FONT>.This is the same default file to which the Link tool sends output. You can rename the output file by using the <FONT FACE="courier">-o</FONT> option to specify a filename. </P><P CLASS="Text1">Linked segments are placed in <FONT FACE="courier">'CODE'</FONT> resources in the resource fork of the output file. The resources are given the same names as the corresponding segment names. If an output file for the program already exists, ILink adds, replaces, or patches code segments in the resource fork. If the output file does not exist, it is created. </P><P CLASS="Note"><B>Note</B><BR>If an error or user interrupt makes the output file invalid, the linker sets the modification date on the file to 0 (that is, January 1, 1904, 12:00AM). This guarantees that the Make tool will recognize that the file needs to be relinked. &#149;</P><P CLASS="Text1">If you specify <FONT FACE="courier">-l</FONT>, <FONT FACE="courier">-la</FONT>, or <FONT FACE="courier">-map</FONT>, ILink writes a link map to standard output. </P><P CLASS="SectionHd">STATUS</P><P CLASS="Text1">ILink can return the following status codes:<BR><BR></P><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">0</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">no errors</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">1</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">fatal error</P></TD></TR></TABLE><P CLASS="SectionHd">PARAMETERS</P><P CLASS="Option1"><I>file1</I> [<I>file2</I>]&#133;</P><P CLASS="OptionText1">Specifies one or more object files, static libraries, and shared libraries to be linked. </P><P CLASS="SectionHd">OPTIONS</P><P CLASS="Text1">Numeric constants for options can be specified as decimal constants or as hexadecimal constants preceded by the dollar sign character ($).</P><P CLASS="Option1">-ac <I>number</I></P><P CLASS="OptionText1">Aligns code modules to <I>number</I>-byte boundaries. The value of <I>number</I> must be a power of 2. The default value of <I>number</I> is 2 if linking with <FONT FACE="courier">-model near</FONT> or <FONT FACE="courier">-model far</FONT>, the default value is 8 if linking with <FONT FACE="courier">-model cfmseg</FONT> or <FONT FACE="courier">-model cfmflat</FONT>.</P><P CLASS="Option1">-ad <I>number</I></P><P CLASS="OptionText1">Aligns data modules to <I>number</I>-byte boundaries. The value of <I>number</I> must be a power of 2. The default value of <I>number</I> is 2 if linking <FONT FACE="courier">-model near</FONT> or <FONT FACE="courier">-model far</FONT>, the default value is 4 if linking with <FONT FACE="courier">-model cfmseg</FONT> or <FONT FACE="courier">-model cfmflat</FONT>.</P><P CLASS="Option1">-br 020 | 68k | on | <B>off</B></P><P CLASS="OptionText1">Controls whether ILink generates branch islands to remove the 32 KB limit on segment size. </P><P CLASS="Option2">020</P><P CLASS="OptionText2">Generates branch islands using MC68020 instructions. This produces smaller and faster code than the <FONT FACE="courier">-br 68k</FONT> option. Programs linked with this option require a 68020 or higher processor to run. </P><P CLASS="Option2">68k</P><P CLASS="OptionText2">Generates branch islands using MC68000 instructions.</P><P CLASS="Option2">on</P><P CLASS="OptionText2">Same as using the <FONT FACE="courier">-br 020</FONT> option.</P><P CLASS="Option2"><B>off</B></P><P CLASS="OptionText2">Disables generation of branch islands (the default).</P><P CLASS="Option1">-c <I>creator</I></P><P CLASS="OptionText1">Sets the output file creator to <I>creator</I>. By default the creator is set to <FONT FACE="courier">'????'</FONT>.</P><P CLASS="Option1">-compact</P><P CLASS="OptionText1">Forces the resource fork of the output file to be compacted, removing all gaps. ILink uses its own resource management scheme and for performance reasons it doesn't compact the resource fork. As a result, the resource fork may grow over time and RezDet may report errors when checking the resource fork. These problems go away when using <FONT FACE="courier">-compact</FONT>.</P><P CLASS="Option1">-d</P><P CLASS="OptionText1">Suppresses warnings for duplicate symbol definitions for both data and code.</P><P CLASS="Option1">-da</P><P CLASS="OptionText1">Converts segment names to desk accessory names at output time. Desk accessory names begin with a leading null character ($00). Use this option when linking assembly-language code into a final desk accessory with a resource type of <FONT FACE="courier">'DRVR'</FONT>.</P><P CLASS="Option1">-@export <I>exportFile</I></P><P CLASS="OptionText1">(CFM-68K runtime option.) Specifies a text file that contains a list of symbols to be exported from the output file. The file should contain one symbol name per line. Lines beginning with &quot;#&quot; or &quot;*&quot; are treated as comments. Only global data modules, global code modules and imported symbols may be exported. Exported symbols are forced active and therefore won't be dead-stripped if they aren't referenced. </P><P CLASS="OptionText1">C++ users must specify the mangled symbol names in the file.</P><P CLASS="Option1">-export <I>name</I>[,<I>name</I>]&#133;</P><P CLASS="OptionText1">(CFM-68K runtime option.) Specifies symbols that should be exported from the output file. Only global data modules, global code modules and imported symbols may be exported. Exported symbols are forced active and therefore will not be dead-stripped if they are not referenced.</P><P CLASS="OptionText1">C++ users must specify the mangled symbol names when using this option.</P><P CLASS="Option1">-fragname <I>fragName</I></P><P CLASS="OptionText1">(CFM-68K runtime option. ) Sets the PEF container's fragment name to the specified name. The default is to use the name of the output file minus any directory information. The fragment name is stored in the container's <FONT FACE="courier">'cfrg'</FONT> resource. </P><P CLASS="Option1">-init <I>initEntry</I></P><P CLASS="OptionText1">(CFM-68K runtime option.) Sets the initialization entry point of the output file to the specified code module. The init entry point must be a non-imported code entry. The default init entry point for an application is <FONT FACE="courier">__init_app</FONT>.The default init entry point for a shared library is <FONT FACE="courier">__init_lib</FONT>.These entry points are defined in the library <FONT FACE="courier">NuCPlusLib.o</FONT>.If the <FONT FACE="courier">-init</FONT> option is not specified, ILink uses the appropriate default init entry point, if it exists. </P><P CLASS="Option1">-initbefore <I>fragName</I>[,<I>fragName</I>]&#133;</P><P CLASS="OptionText1">(CFM-68K runtime option.) Specifies import libraries that should be marked as &quot;initbefore&quot; libraries. This is necessary only when the initialization of one library depends on the prior initialization of another. By default, libraries being imported are initialized before the client importing them. This rule is applied recursively. For mutually dependent libraries, one is arbitrarily chosen to be initialized first. In this case, the <FONT FACE="courier">-initbefore</FONT> option can be used to indicate which library should be initialized first.</P><P CLASS="OptionText1">When using this option you must specify the import library's fragment name, not the name of the file containing the library. The fragment name is the name that appears in the library's <FONT FACE="courier">'cfrg'</FONT> resource. </P><P CLASS="Option1">-l</P><P CLASS="OptionText1">Writes a link map to standard output for use by performance measurement tools and other scripts. Anonymous symbols are omitted. This option is usually used with output redirection.</P><P CLASS="Option1">-la</P><P CLASS="OptionText1">Writes a link map to standard output for use by performance measurement tools and other scripts. The link map includes anonymous symbols. This option is usually used with output redirection.</P><P CLASS="Option1">-m[ain] <I>mainEntry</I></P><P CLASS="OptionText1">Sets the main entry point to <I>mainEntry</I>. The default main entry point is <FONT FACE="courier">%__MAIN</FONT> and is defined in the <FONT FACE="courier">MacRuntime.o</FONT> and <FONT FACE="courier">NuMacRuntime.o</FONT> libraries. If the <FONT FACE="courier">-m</FONT> option is not specified, ILink looks for the default main entry point when linking an application, but not when linking a shared library. Themain entry point of a library must be called directly by the client and therefore isn't required. The main entry point for an application must be a non-imported code entry. The main entry point for a shared library may be either a non-imported code entry or a non-imported data entry.</P><P CLASS="Option1">-ma <I>name</I>=<I>alias</I></P><P CLASS="OptionText1">Gives the module or entry point <I>name</I> the specified <I>alias</I>. You can use this option to resolve undefined external symbols at link time, when the problem is caused by differences in spelling or capitalization. </P><P CLASS="OptionText1">Note that you cannot use an alias specification to override an existing module or entry point because the original name is retained.</P><P CLASS="Option1">-map</P><P CLASS="OptionText1">Writes a link map to standard output that provides the offsets and sizes of all modules. This link map is more readable than those produced by the <FONT FACE="courier">-l</FONT> or <FONT FACE="courier">-la</FONT> options. Note that if you also specify the <FONT FACE="courier">-state nouse</FONT> option, ILink generates the link map before writing the output file. This allows you to get a link map even if ILink encounters errors when writing the output file (<FONT FACE="courier">reference out of range</FONT>, for example). However, if you are using the state file for your link, the link map is not generated until after ILink writes the output file and updates the state file. </P><P CLASS="Option1">-<B>mf</B> | -nomf</P><P CLASS="OptionText1">Enables or suppresses the use of Process Manager temporary memory. </P><P CLASS="OptionText1">Note that the ILink command's use of Process Manager temporary memory excludes other applications from using it, even the Finder. If temporary memory is unavailable, this option has no effect.</P><P CLASS="OptionNote1"><B>WARNING</B><BR>If ILink aborts abnormally, that is, there is a crash or a nonmaskable interrupt (NMI), much of the Process Manager temporary memory might be left permanently allocated, thus potentially crippling launches and Finder copy operations. The only way to recover from this situation is to restart the computer. &#149;</P><P CLASS="Option1">-model cfmflat | cfmseg | far | <B>near</B> </P><P CLASS="OptionText1">Specifies what type of output file should be generated.</P><P CLASS="Option2">cfmflat</P><P CLASS="OptionText2">Generates a &quot;flat&quot; CFM-68K runtime output file. All code is output to a single segment named <FONT FACE="courier">Main</FONT> (the segment name can be overridden using the <FONT FACE="courier">-sg</FONT> or <FONT FACE="courier">-sn</FONT> options). This option is recommended for generating shared libraries only. The resulting shared library must still be flattened using the MakeFlat tool. This option can be used for linking <FONT FACE="courier">-model cfmflat</FONT> object files, <FONT FACE="courier">-model cfmseg</FONT> object files, or a combination of both.</P><P CLASS="Option2">cfmseg</P><P CLASS="OptionText2">Generates a segmented CFM-68K runtime output file. This option can be used for linking <FONT FACE="courier">-model cfmseg</FONT> object files only. If any <FONT FACE="courier">-model cfmflat</FONT> object files are supplied as input files on the command line, the <FONT FACE="courier">-model cfmflat</FONT> option must be used.</P><P CLASS="Option2">far</P><P CLASS="OptionText2">Generates a classic 68K runtime output file with 32-bit load-time relocatable references. This option can be used for linking <FONT FACE="courier">-model far</FONT> object files, <FONT FACE="courier">-model near</FONT> object files, or a combination of both. This option removes the 32 KB restriction on the size of segments, the jump table, and global data.</P><P CLASS="Option2"><B>near</B></P><P CLASS="OptionText2">Generates a classic 68K runtime output file with 16-bit references (the default). This option can be used for linking <FONT FACE="courier">-model near</FONT> object files only. This option maintains the 32 KB restriction on the size of segments, the jump table, and global data. If any <FONT FACE="courier">-model far</FONT> object files are supplied as input files on the command line, the <FONT FACE="courier">-model far</FONT> option must be used.</P><P CLASS="Option1">-msg <I>keyword</I>[,<I>keyword</I>]&#133;</P><P CLASS="OptionText1">Suppresses or enables certain warning messages by using the following keywords.</P><P CLASS="Option2">[no]<B>dup</B></P><P CLASS="OptionText2">Suppresses or enables warning messages about duplicate symbols. The default is to enable these messages (dup).</P><P CLASS="Option2">[no]<B>warn</B></P><P CLASS="OptionText2">Suppresses or enables all warning messages. The default is to enable these messages (<FONT FACE="courier">warn</FONT>).</P><P CLASS="Option1">-newerdeps</P><P CLASS="OptionText1">Specifies that only those object files listed on the ILink command line are to be relinked. You may also include the <FONT FACE="courier">{NewerDeps}</FONT> variable in your makefile to relink only those files that have changed. This can save link time since ILink does not need to check all of the object files to determine which ones have changed. </P><P CLASS="Option1">-o <I>outputFile</I></P><P CLASS="OptionText1">Places the linker output in <I>outputFile</I> in the current directory. If you do not specify <FONT FACE="courier">-o</FONT>, the default output filename is <FONT FACE="courier">Link.Out</FONT>.</P><P CLASS="Option1">-opt <B>on</B> | off | nobypass</P><P CLASS="OptionText1">Controls the optimization of Object Pascal code.</P><P CLASS="Option2"><B>on</B></P><P CLASS="OptionText2">Optimizes Object Pascal method tables (the default). For methods that are not overridden (monomorphic methods), ILink inserts a <FONT FACE="courier">JSR</FONT> directly to the method implementation, skipping the jumps to the method dispatcher. As a result, the <FONT FACE="courier">%_MethTables</FONT> segment and the jump table are smaller. </P><P CLASS="Option2">off</P><P CLASS="OptionText2">Disables Object Pascal optimization.</P><P CLASS="Option2">nobypass</P><P CLASS="OptionText2">Disables Object Pascal optimization.</P><P CLASS="Option1">-p</P><P CLASS="OptionText1">Writes progress and summary information to diagnostic output.</P><P CLASS="Option1">-packdata <B>on</B> | off | faster</P><P CLASS="OptionText1">(CFM-68K runtime option.) Controls the compression of the PEF container's data section.</P><P CLASS="Option2"><B>on</B></P><P CLASS="OptionText2">Compresses the PEF container's data section (the default). </P><P CLASS="Option2">off</P><P CLASS="OptionText2">Disables compression of the PEF container's data section. </P><P CLASS="Option2">faster</P><P CLASS="OptionText2">Compresses the PEF container's data section using a potentially faster compression algorithm. Note that this algorithm may not produce optimal data compression.</P><P CLASS="Option1">-pad <I>number</I></P><P CLASS="OptionText1">Pads segments to a <I>number</I>-byte boundary. The value of <I>number</I> must be 0 or a multiple of 512. If you specify 0, the jump table segment and all code segments are deleted and then rewritten. If you specify a nonzero argument, it will take effect only for segments that have to be rewritten for other reasons. For performance reasons, the default ILink behavior is to pad all segments to a 512-byte boundary.</P><P CLASS="Option1">-pm on | <B>off</B></P><P CLASS="OptionText1">Controls whether purgeable memory is used when reading the object files.</P><P CLASS="Option2">on</P><P CLASS="OptionText2">Uses purgeable memory when reading the object files. This decreases the linker's memory requirements, but may increase the time required to link. </P><P CLASS="Option2"><B>off</B></P><P CLASS="OptionText2">Disables the use of purgeable memory when reading the object files (the default).</P><P CLASS="Option1">-ra [<I>seg</I>]=<I>attr</I>[,<I>attr</I>]&#133;</P><P CLASS="OptionText1">Sets the resource attributes of a segment or segments. </P><P CLASS="Option2"><I>seg</I></P><P CLASS="OptionText2">Specifies the segment. If you specify the segment (<I>seg</I>), the single segment named seg is given the attribute value <I>attr</I>.If you omit seg, all segments except 0 and 1 are given the attribute value <I>attr</I>.</P><P CLASS="OptionText2">You must set the segment containing the main entry point (that is, the <FONT FACE="courier">'CODE'</FONT> resource with ID=1) individually to override the default resource attributes. If you intend to set the attributes of all segments, you must specify this option before any other options that name segments, such as <FONT FACE="courier">-sn</FONT> and <FONT FACE="courier">-sg</FONT>. </P><P CLASS="Option2"><I>attr</I></P><P CLASS="OptionText2">Specifies the resource attribute as a list of comma-separated attributes or decimal or hexadecimal numbers. A list of attributes and their corresponding decimal and hexadecimal values follows. (Note that you can omit the initial <FONT FACE="courier">res</FONT> for resource attributes.)<BR><BR></P><!-- Table Start --><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD ROWSPAN="7" COLSPAN="1" WIDTH="183" ALIGN="left"></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableHdR">Resource attributes </P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableHdR">Decimal<BR>values </P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableHdR">Hexadecimal<BR>values</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">resSysHeap</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">64</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">$40</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">resPurgeable</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">32</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">$20</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">resLocked</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">16</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">$10</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">resProtected</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">8</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">$08</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">resPreload</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">4</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">$04</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">resChanged</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">2</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">$02</P></TD></TR></TABLE><!-- Table End --><P CLASS="OptionText2">The linker essentially ignores the <FONT FACE="courier">resChanged</FONT> attribute and does not check or enforce settings for the other resource attributes. Bits 0 and 7 ($01 and $80) are currently reserved and should not be set.</P><P CLASS="OptionText2">The default resource attributes for the <FONT FACE="courier">'CODE'</FONT> resources of an application are listed as follows:<BR><BR></P><!-- Table Start --><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD ROWSPAN="5" COLSPAN="1" WIDTH="183" ALIGN="left"></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableHdR">'CODE' rsrc</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableHdR">Attributes</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableHdR">Description</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">0 (jump table)</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">32&nbsp;&nbsp;$20</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">resPurgeable</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">1 (<FONT FACE="courier">Main</FONT>)</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">52&nbsp;&nbsp;$34</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">resLocked resPreload</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">Others</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">32&nbsp;&nbsp;$20</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">resPurgeable</P></TD></TR></TABLE><!-- Table End --><P CLASS="OptionNote2"><B>Note</B><BR>When linking MPW tools (type <FONT FACE="courier">'MPST'</FONT> and creator <FONT FACE="courier">'MPS '</FONT>), all segments default to <FONT FACE="courier">resPurgeable</FONT>.Do not set the <FONT FACE="courier">resLocked</FONT> attribute for a tool. &#149;</P><P CLASS="Option1">-rn</P><P CLASS="OptionText1">Suppresses the setting of resource names in the output file. Normally, ILink sets resource names to the corresponding segment names. On incremental links, this option takes effect only for segments that have to be rewritten.</P><P CLASS="Option1">-rt <I>resType</I>=<I>resID</I></P><P CLASS="OptionText1">Sets the output resource type and ID number. </P><P CLASS="OptionText1">When linking a stand-alone code resource, ILink uses PC-relative offsets and attempts to convert <FONT FACE="courier">JSR</FONT>, <FONT FACE="courier">JMP</FONT>, <FONT FACE="courier">LEA</FONT> and <FONT FACE="courier">PEA</FONT> instructions from A5-relative addressing to PC-relative addressing. Instructions that specify the A5-relative addressing mode generate an error message. </P><P CLASS="Option1">-sg <I>newSeg</I>[=<I>oldSeg1</I>[,<I>oldSeg2</I>]&#133;]</P><P CLASS="OptionText1">Changes segmentation so that code in the old segments (<I>oldSeg1</I>, <I>oldSeg2</I>,&#133;) is placed in the segment <I>newSeg</I>. If you do not specify the old segments, ILink places all code in the segment <I>newSeg</I>.</P><P CLASS="Option1">-sn <I>oldSeg</I>=<I>newSeg</I></P><P CLASS="OptionText1">Puts the code residing in <I>oldSeg</I> in the segment <I>newSeg</I>. If there is already code in <I>newSeg</I> this option has the effect of merging the code in <I>oldSeg</I> with the code already in <I>newSeg</I>.</P><P CLASS="OptionText1">The <FONT FACE="courier">-sn</FONT> and <FONT FACE="courier">-sg</FONT> options are very similar. The <FONT FACE="courier">-sg</FONT> option allows you to specify multiple segments to merge. The <FONT FACE="courier">-sn</FONT> option is retained to maintain compatibility with old makefiles.</P><P CLASS="Option1">-state [no]<B>use</B> | [<B>no</B>]<B>rewrite</B></P><P CLASS="OptionText1">Specifies whether to use a state file or whether to rewrite it. The default is to use a state file and just update it instead of rewriting it. </P><P CLASS="Option1">-t <I>type</I></P><P CLASS="OptionText1">Sets the output file type to <I>type</I>.The default type is <FONT FACE="courier">'APPL'</FONT> when generating an application and <FONT FACE="courier">'SPEF'</FONT> when generating a shared library. </P><P CLASS="Option1">-term <I>termEntry</I></P><P CLASS="OptionText1">(CFM-68K runtime option.) Sets the termination entry point of the output file to the specified code module. The term entry point must be a non-imported code entry. The default term entry point for an application is <FONT FACE="courier">__term_app</FONT>.The default term entry point for a shared library is <FONT FACE="courier">__term_lib</FONT>.These entry points are defined in the library <FONT FACE="courier">NuCPlusLib.o</FONT>.If the <FONT FACE="courier">-term</FONT> option is not specified, ILink uses the appropriate default term entry point, if it exists.</P><P CLASS="Option1">-uf <I>filename</I></P><P CLASS="OptionText1">Writes a list of unreferenced code and data symbols to the text file filename. This option is useful for identifying dead source code. You can use the text file with the Lib tool's <FONT FACE="courier">-df</FONT> option to build a specialized static library that optimizes subsequent links.</P><P CLASS="Option1">-unmangle <B>on</B> | off</P><P CLASS="OptionText1">Controls whether C++ symbols used in warnings, error messages, and the link map will be mangled or unmangled.</P><P CLASS="Option2"><B>on</B></P><P CLASS="OptionText2">Uses unmangled symbol names (the default). </P><P CLASS="Option2">off</P><P CLASS="OptionText2">Uses mangled symbol names.</P><P CLASS="Option1">-vercur <I>number</I></P><P CLASS="OptionText1">(CFM-68K runtime option.) Sets the PEF container &quot;current version&quot; to the specified version number. The default version number is 0. The &quot;current version&quot; is also stored in the container's <FONT FACE="courier">'cfrg'</FONT> resource. </P><P CLASS="Option1">-verdef <I>number</I></P><P CLASS="OptionText1">(CFM-68K runtime option.) Sets the PEF container &quot;definition version&quot; to the specified version number. The default version number is 0. The &quot;definition version&quot; is also stored in the container's <FONT FACE="courier">'cfrg'</FONT> resource. </P><P CLASS="Option1">-verimp <I>number</I></P><P CLASS="OptionText1">(CFM-68K runtime option.) Sets the PEF container &quot;implementation version&quot; to the specified version number. The default version number is 0. </P><P CLASS="Option1">-w[arn]</P><P CLASS="OptionText1">Suppresses warning messages.</P><P CLASS="Option1">-@weak <I>weakFile</I></P><P CLASS="OptionText1">(CFM-68K runtime option.) Specifies a text file that contains a list of imported symbols that should be marked as &quot;weak&quot; (also known as &quot;soft&quot; imports). The file should contain one import name per line. Lines beginning with &quot;#&quot; or &quot;*&quot; are treated as comments. Note that if all of the symbols imported from an import library are marked as "weak," the import library itself is also marked as "weak."</P><P CLASS="OptionText1">C++ users must specify the mangled symbol names in the file.</P><P CLASS="Option1">-weak <I>name</I>[,<I>name</I>]&#133;</P><P CLASS="OptionText1">(CFM-68K runtime option.) Specifies imported symbols that should be marked as &quot;weak&quot; (also known as &quot;soft&quot; imports). Weak imports are not required to exist in any of the client's import libraries at runtime. The client must first check for the existence of the imports before using them. Note that if all of the symbols imported from an import library are marked as "weak," the import library itself is also marked as "weak."</P><P CLASS="OptionText1">C++ users must specify the mangled symbol names when using this option.</P><P CLASS="Option1">-weaklib <I>fragName</I>[,<I>fragName</I>]&#133;</P><P CLASS="OptionText1">(CFM-68K runtime option.) Specifies import libraries that should be marked as &quot;weak&quot;. Weak libraries are not required to exist at runtime. If the library is not found at load time, all symbols imported from the library will have their addresses set to 0. The client must first check for the existence of the imports before using them.Note that when an import library is marked as "weak," all of the symbols imported from the library are also marked as "weak."</P><P CLASS="OptionText1">When using this option, you must specify the import library's fragment name, not the name of the file containing the library. The fragment name is the name that appears in the library's <FONT FACE="courier">'cfrg'</FONT> resource. </P><P CLASS="Option1">-wrap</P><P CLASS="OptionText1">If the jump table is larger than 32 KB, <FONT FACE="courier">-wrap</FONT> places excess jump-table entries in available global data space. Note that this option is not applicable if the global data area is filled. This option is ignored when linking with <FONT FACE="courier">-model far</FONT>.</P><P CLASS="Option1">-xm <B>e</B>[<B>xecutable</B>] | s[haredlibrary]</P><P CLASS="OptionText1">(CFM-68K runtime option.) Controls whether ILink generates an application or a shared library.</P><P CLASS="Option2"><B>e</B>[<B>xecutable</B>]</P><P CLASS="OptionText2">Generates an application (the default). The default output file type is <FONT FACE="courier">'APPL'</FONT>.</P><P CLASS="Option2">s[haredlibrary]</P><P CLASS="OptionText2">Generates a shared library. The default output file type is <FONT FACE="courier">'SPEF'</FONT>.</P><P CLASS="SectionHd">EXAMPLES</P><P CLASS="Text1">You can use the <FONT FACE="courier">-newerdeps</FONT> option to restrict the set of input files included in the link to that defined by the Make tool's <FONT FACE="courier">{NewerDeps}</FONT> variable. This variable expands to a list of all the files that are newer than the target application--that is, that caused the target to be out of date. Using this information and the information it saved in the state file, ILink does not have to check each file to determine which ones have changed since the previous link.</P><P CLASS="Text1">If you use the ILink command in your makefile and you want to take advantage of the<FONT FACE="courier">-newerdeps</FONT> option, you need to modify your makefile as shown below. The first time <FONT FACE="courier">MyProgram</FONT> is built, the second ILink command is executed; all subsequent times, the first ILink command is executed.</P><PRE CLASS="Code">OBJECTS = calc.c.o {Libraries}Interface.o {Libraries}MacRuntime.oMyProgram  &#402;&#402;  {OBJECTS}    IF (`exists MyProgram.NJ`)    #test for state file        ILink -newerdeps {NewerDeps} -o MyProgram     ELSE        ILink -o MyProgram {OBJECTS}    ENDMyProgram  &#402;&#402;  MyResources.r     Rez -a -o MyProgram MyResources.r</PRE><P CLASS="SectionHd">LIMITATIONS</P><P CLASS="Text1">ILink requires at least 8 MB of RAM. The memory requirements are greater for ILink than for Link.ILink requires approximately two to three times the total size of the object files used in the link. The memory can be either MPW heap memory or a combination of both temporary memory and MPW memory.</P><P CLASS="SectionHd">SEE ALSO</P><P CLASS="Text1"><FONT FACE="courier"><A HREF="ilinktosym.html">ILinkToSYM</A></FONT></P><P CLASS="Text1"><FONT FACE="courier"><A HREF="link.html">Link</A></FONT></P><P CLASS="Text1"><FONT FACE="courier"><A HREF="ppclink.html">PPCLink</A></FONT></P><P CLASS="Text1">&nbsp;<BR>&nbsp;</P><HR WIDTH="600" ALIGN="LEFT"><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="if.html">Previous</A></P></TD>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="index.html">Table of Contents</A></P></TD>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="ilinktosym.html">Next</A></P></TD>	</TR></TABLE><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="600">		<P CLASS="Copyright">Copyright Apple Computer, Inc. 1993-2000</P>		<P CLASS="Date">Last Updated July 2000</P>		</TD>	</TR></TABLE></TD></TR></TABLE><!--#include virtual="/footer" --></BODY></HTML>