<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML><HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1"><META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css"><LINK REL="STYLESHEET" HREF="cmdref.css" CHARSET="ISO-8859-1" TYPE="text/css"><TITLE>RShell </TITLE></HEAD><BODY BGCOLOR="#ffffff"><!--#include file="breadcrumb" --><!--#include virtual="/adcnavbar" --><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD><TABLE WIDTH="600" BGCOLOR="0" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD><P CLASS="BookTitle">MPW Command Reference</P></TD>	</TR></TABLE><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="rproj.html">Previous</A></P></TD>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="index.html">Table of Contents</A></P></TD>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="save.html">Next</A></P></TD>	</TR></TABLE><HR WIDTH="600" ALIGN="LEFT"><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="475"><P CLASS="PageHdL">RShell</P></TD>		<TD WIDTH="125"><P CLASS="PageHdR">Built-in</P></TD>	</TR></TABLE><P CLASS="SectionHd">SYNTAX</P><P CLASS="Syntax">RShell [[<I>command</I> | &lt;<I>script</I>] [-b | -f | -r <I>target</I>] [-q ]] | <BR>[-c <I>id</I> | -k <I>id</I> | -status] </P><P CLASS="SectionHd">DESCRIPTION</P><P CLASS="Text1">The RShell command generates Apple events which are understood by ToolServer and the MPW Shell. The Apple events represent either a command line or a script. You can use it to delegate time-consuming tasks, such as compiling or building an application, to run in the background or on another machine while you continue working. </P><P CLASS="Text1">The RShell command allows you to</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>determine the destination of the Apple event by using the <FONT FACE="courier">-f</FONT>, <FONT FACE="courier">-b</FONT>, or <FONT FACE="courier">-r</FONT> options</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>control Apple events you sent, (kill, close, or determine the status of an executing or pending job using <FONT FACE="courier">-k <I>id</I></FONT>, <FONT FACE="courier">-c <I>id</I></FONT>, <FONT FACE="courier">or -status</FONT> options)</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>quit the remote shell (<FONT FACE="courier">-q</FONT>)</P><P CLASS="Text1">A script that runs in the background should not require significantly more CPU time than a script run in the foreground. In fact, if you are using ToolServer as your remote shell, your scripts may execute faster than they would under the MPW Shell because of the reduced user interface overhead.</P><P CLASS="Text1">The execution speed of a script that is sent over a network to a ToolServer or MPW Shell application residing on a remote machine is affected by network overhead and depends upon whether the files needed by the remote shell are available locally or are read remotely.</P><P CLASS="Text1">If you are using ToolServer and want to write a script to send to ToolServer, you should be aware that ToolServer does not support the MPW Projector or Shell editor commands. The following list contains the valid MPW commands for ToolServer scripts:<BR><BR></P><!-- Table Start --><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeL">Alert</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Echo</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Help</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">RShell</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeL">Alias</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Eject</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">If&#133;</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Set</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeL">Beep</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Equal</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Loop&#133;End</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">SetFile</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeL">Begin&#133;End &nbsp;&nbsp;</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Erase</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Mount</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Shift</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeL">Break</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Evaluate &nbsp;&nbsp;</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Move</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">ShutDown</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeL">Catenate</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Execute</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Newer</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Unalias</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeL">Confirm</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Exists</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">NewFolder</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Unexport</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeL">Continue</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Exit</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Parameters &nbsp;&nbsp;</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Unmount</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeL">Date</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Export</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Quit </P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Unset</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeL">Delete</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Files</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Quote</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Version</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeL">Directory</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Flush</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Rename</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Volumes</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeL">Duplicate</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">For&#133;End</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Request</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">Which</P></TD></TR></TABLE><!-- Table End --><P CLASS="SectionHd">INPUT</P><P CLASS="Text1">The <I>command</I> or &lt;<I>script</I> parameter is used to provide input for the RShell command. If you do not include a <I>command</I> or <I>script</I> parameter (unless you've specified a <FONT FACE="courier">-k</FONT>, <FONT FACE="courier">-c</FONT>, <FONT FACE="courier">-status</FONT> or <FONT FACE="courier">-q</FONT> option), the RShell command reads from standard input. Remember to terminate standard (keyboard) input by pressing Command-Enter.</P><P CLASS="Note"><B>WARNING</B><BR>ToolServer does not support reading from standard input unless it is redirected from a file or a pipe. Attempts by tools and scripts (that ToolServer is executing) to read from <FONT FACE="courier">Dev:Console</FONT>, <FONT FACE="courier">Dev:StdIn</FONT>, <FONT FACE="courier">Dev:Output</FONT>, or <FONT FACE="courier">Dev:Error</FONT> returns an end-of-file (EOF) error. &#149;</P><P CLASS="SectionHd">OUTPUT</P><P CLASS="Text1">The only output produced by the RShell command itself is the result of the <FONT FACE="courier">-status</FONT> option. The resulting report is printed in the window where the command line was issued. See the  <A HREF="#examples">Examples</A> section.</P><P CLASS="Text1">Any output that occurs from executing scripts or commands sent by RShell are handled in the standard way for those applications. MPW directs output to the active window when the RShell command is executed without an I/O redirection specification. This is generally the MPW Shell's Worksheet window.</P><P CLASS="Text1">The ToolServer application does not have any windows and thus cannot provide a console device in the traditional way. If you run a tool or script under ToolServer that does not redirect output to a file, output is sent to either of two files (pseudodevices) introduced by ToolServer to handle this situation: <FONT FACE="courier">Dev:Output</FONT> and <FONT FACE="courier">Dev:Error</FONT>. ToolServer then creates files to hold output and error text. The name and location of these files depends on the value of the variables <FONT FACE="courier">{BackgroundOut}</FONT> and <FONT FACE="courier">{BackgroundErr}</FONT>.These variables default to <FONT FACE="courier">scriptName.out</FONT> and <FONT FACE="courier">scriptName.err</FONT>; however, you can set them in the <FONT FACE="courier">UserStartup&#149;</FONT> script. </P><P CLASS="Text1">If you do not specify output redirection with the RShell command and if the sending application is ToolServer, output is sent to wherever the issuing ToolServer's <FONT FACE="courier">Dev:Output</FONT> and <FONT FACE="courier">Dev:Error</FONT> are currently directed. If you do not specify output redirection with the RShell command and if the sending application is the MPW Shell, output is sent to the window in which the RShell command (or the script containing it) was executed.</P><P CLASS="Text1">If more than one process attempts to write to the same window or file, you get an error. This can happen when ToolServer is using the Worksheet window for an output destination and you try to execute an MPW command. At this point you can perform the second operation from another MPW window, or you can use the <FONT FACE="courier">-k <I>id</I></FONT> option to kill the RShell process.</P><P CLASS="SectionHd">STATUS</P><P CLASS="Text1">RShell can return the following status codes:<BR><BR></P><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">0</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">no errors</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">1</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">syntax error</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">2</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">execution error; invalid input</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">3 </P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">system error</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">4</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">user selects <FONT FACE="courier">Cancel</FONT> from PPC Browser</P></TD></TR></TABLE><P CLASS="SectionHd">PARAMETERS</P><P CLASS="Option1"><I>command</I></P><P CLASS="OptionText1">Specifies a string that contains the command to be executed. The command is syntactically equivalent to an MPW command line. If you omit this parameter, RShell reads from standard input.</P><P CLASS="Option1"><I>script</I></P><P CLASS="OptionText1">Specifies the name of a script on the local machine whose contents are redirected to ToolServer for execution. If the script name contains a space, it must be quoted.</P><P CLASS="SectionHd">OPTIONS</P><P CLASS="Option1">-b</P><P CLASS="OptionText1">Sends an Apple event to ToolServer on the same machine as the sender of the RShell command. Usually, but not necessarily, the sender is the MPW Shell. Often the MPW Shell is the application you see in the foreground and ToolServer is running and executes any commands you send to it in the background of the same machine. However, note that when ToolServer sends an <FONT FACE="courier">RShell -b</FONT> command line, it sends it to itself. If ToolServer is not running, this option launches it.</P><P CLASS="Option1">-c <I>id</I></P><P CLASS="OptionText1">Closes the files whose transaction ID is <I>id</I>.You can determine the transaction ID of an executing or pending RShell script by using the <FONT FACE="courier">-status</FONT> option. See <FONT FACE="courier">-status</FONT> below.</P><P CLASS="OptionNote1"><B>WARNING</B><BR>The <FONT FACE="courier">-c <I>id</I></FONT>  option is not intended for use with an executing script; it is provided to allow you to clean up output files when the connection between the client (the MPW Shell or the ToolServer that ran the RShell command) and the server (the MPW Shell or the ToolServer that received and processed the command)  has been broken. If a script is running, do not use the <FONT FACE="courier">-c <I>id</I></FONT> option. Kill the process instead with the <FONT FACE="courier">-k <I>id</I></FONT> option. See <FONT FACE="courier">-k <I>id</I></FONT>. &#149;</P><P CLASS="Option1">-f</FONT></P><P CLASS="OptionText1">Sends the Apple event to the MPW Shell (version 3.3 or later) running on the same machine where the RShell command is executed. If the RShell command is included in a script that is executed by ToolServer, and the MPW Shell has not been launched, this option launches it.</P><P CLASS="Option1">-k <I>id</I></P><P CLASS="OptionText1">Kills the executing or pending script whose transaction ID is <I>id</I>.You can determine the transaction ID of an RShell task by using the <FONT FACE="courier">-status</FONT> option. See <FONT FACE="courier">-status</FONT> below.</P><P CLASS="Option1">-q</P><P CLASS="OptionText1">Sends a Quit event to the remote shell application (either ToolServer or MPW). If a command follows the option, it is executed first.</P><P CLASS="Option1">-r <I>target</I></P><P CLASS="OptionText1">Sends an Apple event to the shell application that is assumed to be running on a remote machine and is specified by <I>target</I>. The application is either ToolServer or the MPW Shell.The <I>target</I> parameter takes one of the following forms:</P><P CLASS="OptionCode1"><I>DomainName</I>:<I>ApplicationName</I><BR><I>IPAddress</I>:<I>ApplicationName</I><BR>[<I>zone</I>]:<I>server</I>:<I>ApplicationName</I></P><P CLASS="OptionNote1"><B>Note</B><BR>Before you can use the RShell command with the option <FONT FACE="courier">-r <I>target</I></FONT>, you must set the application (either ToolServer or MPW) on the remote machine to allow program linking. (You use the Sharing command from the File menu to do this.)<BR><BR>Note also that the <FONT FACE="courier">-r <I>target</I></FONT> option assumes that any source files needed by the remotely executing script are located on the remote machine. If they are not on the remote machine you must turn file sharing on and set the appropriate privileges for the files or folders your script needs to access. Finally, remember to include a Choose command line before any commands using these files or folders. &#149;</P><P CLASS="Option1">-status</P><P CLASS="OptionText1">Displays information about currently running or pending RShell requests. Only those RShell requests that you have initiated are displayed in the status report.</P><A NAME="examples"></A><P CLASS="SectionHd">EXAMPLES</P><P CLASS="Text1">The following command line redirects the contents of the file <FONT FACE="courier">RemoteScript</FONT>, which is found on the local machine, to ToolServer on a remote machine:</P><P CLASS="Code">RShell &lt; RemoteScript</P><P CLASS="Text1">Since this command didn't specify any of the options <FONT FACE="courier">-f</FONT>, <FONT FACE="courier">-b</FONT>, or <FONT FACE="courier">-r</FONT>, used to specify a target application, an interactive dialog box called the PPC Browser, shown below, is opened to allow you to select the application to receive the command.</P><P CLASS="FigureTitle">PPC Browser dialog box</P><P CLASS="Text1"><IMG SRC="images/rshell.gif"></P><P CLASS="Note"><B>Note</B><BR>The PPC Browser dialog box displays all ToolServer and MPW Shell applications on a specific machine, not all shell applications in the zone. If you want to install multiple ToolServers on one machine, you must rename them so that they have unique names; for example, <FONT FACE="courier">ToolServer1</FONT>, <FONT FACE="courier">ToolServer2</FONT>, and so on. &#149;</P><P CLASS="Text1">To use the <FONT FACE="courier">-k <I>id</I></FONT> or <FONT FACE="courier">-c <I>id</I></FONT> options, you need to know the transaction ID of the process you wish to kill or close. You can get that information and more by using <FONT FACE="courier">-status</FONT>.The output shown below is the result of the following command line:</P><P CLASS="Code">RShell -status</P><PRE CLASS="Code">ID    Request       Current Command   Server--    -------       ---------------   ------ 1    makescript    link              ToolServer 2    BuildScript   duplicate         AZone:AMachine:ToolServer 3    TestScript                      ToolServer</PRE><P CLASS="Text1">The command </P><P CLASS="Code">RShell -b &gt; MyOutput &quot;date&quot;</P><P CLASS="Text1">or</P><P CLASS="Code">RShell -b &gt; &quot;My Output&quot; &quot;date&quot;</P><P CLASS="Text1">redirects the output from the Date command to the new file, <FONT FACE="courier">MyOutput</FONT> or <FONT FACE="courier">My Output</FONT>, that was created by this code line. The file can be found in the current directory of the sending application.</P><P CLASS="Text1">If you specify the command</P><P CLASS="Code">RShell -b &quot;echo {BackgroundShell}&quot;</P><P CLASS="Text1">the sending application (usually the MPW Shell) evaluates <FONT FACE="courier">{BackgroundShell}</FONT> and sends the resulting command to ToolServer. If you specify the command and use single quotation marks (<FONT FACE="courier">'</FONT>), the command line is sent as is to ToolServer, which evaluates <FONT FACE="courier">{BackgroundShell}</FONT> and performs variable substitution as in the following:</P><P CLASS="Code">RShell -b 'echo {BackgroundShell}'</P><P CLASS="Text1">&nbsp;<BR>&nbsp;</P><HR WIDTH="600" ALIGN="LEFT"><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="rproj.html">Previous</A></P></TD>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="index.html">Table of Contents</A></P></TD>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="save.html">Next</A></P></TD>	</TR></TABLE><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="600">		<P CLASS="Copyright">Copyright Apple Computer, Inc. 1993-2000</P>		<P CLASS="Date">Last Updated July 2000</P>		</TD>	</TR></TABLE></TD></TR></TABLE><!--#include virtual="/footer" --></BODY></HTML>