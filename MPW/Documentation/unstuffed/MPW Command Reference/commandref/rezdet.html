<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML><HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1"><META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css"><LINK REL="STYLESHEET" HREF="cmdref.css" CHARSET="ISO-8859-1" TYPE="text/css"><TITLE>RezDet</TITLE></HEAD><BODY BGCOLOR="#ffffff"><!--#include file="breadcrumb" --><!--#include virtual="/adcnavbar" --><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD><TABLE WIDTH="600" BGCOLOR="0" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD><P CLASS="BookTitle">MPW Command Reference</P></TD>	</TR></TABLE><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="rez.html">Previous</A></P></TD>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="index.html">Table of Contents</A></P></TD>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="rotatepanes.html">Next</A></P></TD>	</TR></TABLE><HR WIDTH="600" ALIGN="LEFT"><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="475"><P CLASS="PageHdL">RezDet</P></TD>		<TD WIDTH="125"><P CLASS="PageHdR">Tool</P></TD>	</TR></TABLE><P CLASS="SectionHd">SYNTAX</P><P CLASS="Syntax">RezDet <I>resourceFile1</I> [<I>resourceFile2</I>]&#133; [-b[ig]]<BR>[-d[ump] | -l[ist] | -q[uiet] | -r[awdump] | -s[how] | -t[erse]]<BR>[-noResolve]</P><P CLASS="SectionHd">DESCRIPTION</P><P CLASS="Text1">The RezDet tool investigates the resource fork of the specified files for damage or inconsistencies. Files are read and checked one at a time, and messages are generated for each error, indicating the cause of the damage.</P><P CLASS="Text1">In determining the source of the errors, RezDet checks that the files meet the following conditions:</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>The resource fork contains the minimum number of bytes (enough to read a resource header).</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>The header, resource data list, and resource map do not overlap or contain spaces between them. There should not be any bytes between the end-of-file marker and the end of the resource map.</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>Each record in the resource data list is used once and only once and the last data item ends exactly where the data list ends.</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>Each item in the resource type list contains at least one reference; each sequence of referenced items starts where the reference list for the previous resource type item ends; and each item in the reference list is pointed to by one and only one resource type list item.</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>The resource type list does not contain any duplicates.</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>Each name in the name list has one and only one reference, and the last name does not point outside the name list.</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>All names have a nonzero length.</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>The name list does not contain any duplicates. Note that duplicate names cause an advisory warning rather than a true error and that RezDet does not generate this warning unless you also specify the <FONT FACE="courier">-d</FONT>, <FONT FACE="courier">-r</FONT>, or <FONT FACE="courier">-s</FONT> options.</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>Each reference list item points to a valid data item and either has a name list offset of -1 or points to a valid name list offset.</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>Bits 7 (reserved) and 1 (changed) are not set in the resource attributes.</P><P CLASS="Note"><B>Note</B><BR>RezDet does not use the Resource Manager and should not crash no matter how corrupt the resource fork of a file is. &#149;</P><P CLASS="SectionHd">INPUT</P><P CLASS="Text1">One or more files (<I>resourceFile</I>). The RezDet tool does not read standard input.</P><P CLASS="SectionHd">OUTPUT</P><P CLASS="Text1">Standard output. RezDet writes error messages to diagnostic output. If you specify <FONT FACE="courier">-d, -l, -r, -s,</FONT> or <FONT FACE="courier">-t</FONT>, the information produced by that option is written to standard output.</P><P CLASS="Note"><B>Note</B><BR>For the options in which additional information is retrieved, fields are displayed as hexadecimal or decimal numbers for numeric values, or as a hex dump with associated printable Macintosh characters. The newline ($0D), tab ($09), and null ($00) characters are displayed as &#172; , &#8710;, and ., respectively. &#149;</P><P CLASS="SectionHd">ALIAS RESOLUTION</P><P CLASS="Text1">This command resolves all Finder aliases in input file specifications. If you wish to check the resources in a Finder alias file use the <FONT FACE="courier">-noResolve</FONT> option to override this behavior.</P><P CLASS="SectionHd">STATUS</P><P CLASS="Text1">RezDet can return the following status codes:<BR><BR></P><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">0</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">no errors</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">1</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">syntax error (invalid options or no files specified)</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">2</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">resource format error</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">3</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">fatal error--an I/O or program error</P></TD></TR></TABLE><P CLASS="SectionHd">PARAMETERS</P><P CLASS="Option1"><I>resourceFile1</I> [<I>resourceFile2</I>]&#133;</P><P CLASS="OptionText1">Specifies one or more resource files to be checked.</P><P CLASS="SectionHd">OPTIONS</P><P CLASS="Option1">-b[ig]</P><P CLASS="OptionText1">Reads the data for each resource into memory one resource at a time, instead of all at once. This is useful for checking huge resource files, <BR>such as the System file. </P><P CLASS="OptionNote1"><B>Note</B><BR>Try using this option if RezDet tells you that it ran out of memory or that memory is badly fragmented. &#149;</P><P CLASS="Option1">-d[ump]</P><P CLASS="OptionText1">Generates the same information as the <FONT FACE="courier">-s[how]</FONT> option as well as detailed information about the resource header, type list, name list, resource map, and data list.</P><P CLASS="Option1">-l[ist]</P><P CLASS="OptionText1">Lists resource types, IDs, names, attributes, and resource sizes. Output appears in the following format:</P><P CLASS="OptionCode1">'<I>type</I>' (<I>ID</I>, <I>name</I>, <I>attributes</I>) [<I>size</I>]</P><P CLASS="Option1"><FONT FACE="courier">-noResolve</FONT></P><P CLASS="OptionText1">Prevents the resolution of leaf aliases in the input resource file path. This allows the resources in a Finder alias file to be checked.</P><P CLASS="Option1">-q[uiet]</P><P CLASS="OptionText1">Returns a status code instead of generating error messages. </P><P CLASS="Option1">-r[awdump]</P><P CLASS="OptionText1">Generates the same information as the <FONT FACE="courier">-d[ump]</FONT> option but also dumps the contents of data blocks.</P><P CLASS="OptionNote1"><B>Note</B><BR>This option can generate huge amounts of output. &#149;</P><P CLASS="Option1">-s[how]</P><P CLASS="OptionText1">Writes information about individual resource types. For each type, RezDet provides the following information: the number of items of this type, the reference list offset, and detailed information on each ID (including the resource name, if any, resource attributes, data offset, and data length). </P><P CLASS="Option1">-t[erse]</P><P CLASS="OptionText1">Suppresses all messages that do not explicitly describe errors. Examples of such messages include the name of the current file and the statement that the file is OK in the event that no errors were found. Similar to the <FONT FACE="courier">-q</FONT> option, but allows error messages to display.</P><P CLASS="SectionHd">EXAMPLES</P><P CLASS="Text1">The following command line checks the System file.</P><P CLASS="Code">RezDet &quot;{SystemFolder}System&quot; -big</P><P CLASS="Text1">If the file is damaged, RezDet returns an error message such as this one:</P><P CLASS="Code">File &quot;HD:System Folder:System&quot;; ### RezDet -- Data  inconsistency, 36 bytes left over.</P><P CLASS="Text1">The following command line removes the <FONT FACE="courier">Test.c</FONT> file if its resource fork is damaged.</P><P CLASS="Code">RezDet Test.c -q || Delete Test.c</P><P CLASS="SectionHd">LIMITATIONS</P><P CLASS="Text1">The RezDet tool does not validate the file attributes field in the resource map header and ignores the Finder-specific fields in the header and resource map header.</P><P CLASS="Text1">Duplicate resource name warnings are generated when you specify <FONT FACE="courier">-d</FONT>, <FONT FACE="courier">-r</FONT>, or <FONT FACE="courier">-s</FONT>, even if the names belong to resources of different types. </P><P CLASS="Text1">&nbsp;<BR>&nbsp;</P><HR WIDTH="600" ALIGN="LEFT"><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="rez.html">Previous</A></P></TD>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="index.html">Table of Contents</A></P></TD>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="rotatepanes.html">Next</A></P></TD>	</TR></TABLE><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="600">		<P CLASS="Copyright">Copyright Apple Computer, Inc. 1993-2000</P>		<P CLASS="Date">Last Updated July 2000</P>		</TD>	</TR></TABLE></TD></TR></TABLE><!--#include virtual="/footer" --></BODY></HTML>