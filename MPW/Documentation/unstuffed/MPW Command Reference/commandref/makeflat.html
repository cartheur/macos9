<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML><HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1"><META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css"><LINK REL="STYLESHEET" HREF="cmdref.css" CHARSET="ISO-8859-1" TYPE="text/css"><TITLE>MakeFlat</TITLE></HEAD><BODY BGCOLOR="#ffffff"><!--#include file="breadcrumb" --><!--#include virtual="/adcnavbar" --><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD><TABLE WIDTH="600" BGCOLOR="0" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD><P CLASS="BookTitle">MPW Command Reference</P></TD>	</TR></TABLE><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="makeerrorfile.html">Previous</A></P></TD>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="index.html">Table of Contents</A></P></TD>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="makepef.html">Next</A></P></TD>	</TR></TABLE><HR WIDTH="600" ALIGN="LEFT"><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="475"><P CLASS="PageHdL">MakeFlat</P></TD>		<TD WIDTH="125"><P CLASS="PageHdR">Tool</P></TD>	</TR></TABLE><P CLASS="SectionHd">SYNTAX</P><P CLASS="Syntax">MakeFlat <I>segmentedLib</I>&#133; [-h[elp]] [ -o <I>outputLib</I>] [-omitseghdrs] [-p]<BR>[-packdata off | <B>on</B> | faster] [-share <B>context</B> | global] [-w]</P><P CLASS="SectionHd">DESCRIPTION</P><P CLASS="Text1">The MakeFlat tool is an essential component in the process of building shared libraries under the CFM-68K runtime model. In general, it converts the <FONT FACE="courier">'CODE'</FONT> and <FONT FACE="courier">'rseg'</FONT> resources of a segmented shared library created by the ILink tool into a single PEF container residing in the data fork of the output file. Each user-created <FONT FACE="courier">'CODE'</FONT> resource in the input file gets mapped into a PEF code section in the output file. Each PEF code section is assigned the same name as its resource, but is assigned a new section number.</P><P CLASS="Text1">MakeFlat modifies the input file's <FONT FACE="courier">'cfrg'</FONT> resource to indicate the new location of the library and copies the resource to the output file.</P><P CLASS="SectionHd">INPUT</P><P CLASS="Text1">A single segmented shared library (<I>segmentedLib</I>) created by the ILink tool. MakeFlat does not read standard input.</P><P CLASS="SectionHd">OUTPUT</P><P CLASS="Text1">A flattened shared library residing in the data fork of the output library, <FONT FACE="courier">importLib.out</FONT>.You can rename this file using the <FONT FACE="courier">-o</FONT> option. MakeFlat sets the output library type to <FONT FACE="courier">'shlb'</FONT> and sets the creator to match the input file's creator.</P><P CLASS="SectionHd">STATUS</P><P CLASS="Text1">MakeFlat can return the following status codes:<BR><BR></P><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">0</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">Normal termination</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">1</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">Parameter or option error</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">2</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">Runtime execution error</P></TD></TR></TABLE><P CLASS="SectionHd">PARAMETERS</P><P CLASS="Option1"><I>segmentedLib</I></P><P CLASS="OptionText1">Specifies a single segmented shared library to convert.</P><P CLASS="SectionHd">OPTIONS</P><P CLASS="Option1">-h[elp]</P><P CLASS="OptionText1">Displays the list of supported options. If MakeFlat encounters this option anywhere on the command line, it terminates library processing and simply displays the options.</P><P CLASS="Option1">-o <I>outputLib</I> </P><P CLASS="OptionText1">Places the flattened library in the output library file, <I>outputLib</I>. The default output filename is <FONT FACE="courier">importLib.out</FONT>.</P><P CLASS="Option1">-omitseghdrs</P><P CLASS="OptionText1">Does not copy segment headers from the input file's resources into the output library's code sections. By default, MakeFlat copies segment headers because they are necessary for debugging.</P><P CLASS="Option1">-p</P><P CLASS="OptionText1">Passes progress information to diagnostic output.</P><P CLASS="Option1">-packdata off | <B>on</B> | faster</P><P CLASS="OptionText1">Sets data compression.</P><P CLASS="Option2">off</P><P CLASS="OptionText2">Suppresses data compression.</P><P CLASS="Option2"><B>on</B></P><P CLASS="OptionText2">Compresses the data section.</P><P CLASS="Option2">faster</P><P CLASS="OptionText2">Sets fast data compression. However, this algorithm may not produce optimal data compression.</P><P CLASS="Option1">-share <B>context</B> | global</P><P CLASS="OptionText1">Sets the data sharing mode to either <FONT FACE="courier">context</FONT> (shared within a context) or <FONT FACE="courier">global</FONT> (shared across all contexts).</P><P CLASS="Option1">-w</P><P CLASS="OptionText1">Suppresses all warning messages.</P><P CLASS="SectionHd">EXAMPLES</P><P CLASS="Text1">The following two commands perform the same function. The second command illustrates the default settings of the MakeFlat options. Each command converts <FONT FACE="courier">myLibrary.seg</FONT>, a segmented library created by ILink, into a flattened library in the data fork of the file <FONT FACE="courier">myLibrary.68K</FONT>.</P><P CLASS="Text1"><FONT FACE="courier">MakeFlat myLibrary.seg -o myLibrary.68K</FONT></P><P CLASS="Text1"><FONT FACE="courier">MakeFlat -packdata on -share context myLibrary.seg -o myLibrary.68K</FONT></P><P CLASS="SectionHd">SEE ALSO</P><P CLASS="Text1"><FONT FACE="courier"><A HREF="ilink.html">ILink</A></FONT></P><P CLASS="Text1"><FONT FACE="courier"><A HREF="mergefragment.html">MergeFragment</A></FONT></P><P CLASS="Text1">&nbsp;<BR>&nbsp;</P><HR WIDTH="600" ALIGN="LEFT"><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="makeerrorfile.html">Previous</A></P></TD>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="index.html">Table of Contents</A></P></TD>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="makepef.html">Next</A></P></TD>	</TR></TABLE><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="600">		<P CLASS="Copyright">Copyright Apple Computer, Inc. 1993-2000</P>		<P CLASS="Date">Last Updated July 2000</P>		</TD>	</TR></TABLE></TD></TR></TABLE><!--#include virtual="/footer" --></BODY></HTML>