<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML><HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1"><META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css"><LINK REL="STYLESHEET" HREF="cmdref.css" CHARSET="ISO-8859-1" TYPE="text/css"><TITLE>Lib</TITLE></HEAD><BODY BGCOLOR="#ffffff"><!--#include file="breadcrumb" --><!--#include virtual="/adcnavbar" --><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD><TABLE WIDTH="600" BGCOLOR="0" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD><P CLASS="BookTitle">MPW Command Reference</P></TD>	</TR></TABLE><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="interactivehelp.html">Previous</A></P></TD>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="index.html">Table of Contents</A></P></TD>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="line.html">Next</A></P></TD>	</TR></TABLE><HR WIDTH="600" ALIGN="LEFT"><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="475"><P CLASS="PageHdL">Lib</P></TD>		<TD WIDTH="125"><P CLASS="PageHdR">Tool</P></TD>	</TR></TABLE><P CLASS="SectionHd">SYNTAX</P><P CLASS="Syntax">Lib  <I>objectFile1</I> [<I>objectFile2</I>]&#133; [-d] [-df <I>deleteFile</I>]<BR> [-dm <I>name</I>[,<I>name</I>]&#133;] [-dn <I>name</I>[,<I>name</I>]&#133;] [-dnx <I>name</I>[,<I>name</I>]&#133;] [-f]<BR> [-mf] [-o <I>name</I>.o] [-p] [-rn <I>oldName</I>=<I>newName</I>[,<I>oldName1</I>=<I>newName2</I>] &#133;]<BR>[-sg <I>newSeg</I>=<I>oldSeg1</I>[,<I>oldSeg2</I>&#133;]&#133;] [-sn <I>oldSeg</I>=<I>newSeg</I>]<BR>[-sym [<B>on</B>|<B>full</B>[,nolines][,nolabels][,novars][,notypes]] | off]<BR>[-w] [-ver <I>number</I>]</P><P CLASS="SectionHd">DESCRIPTION</P><P CLASS="Text1">The Lib tool combines several object files into a larger object file called a library. This library can then be put into the makefile of a program, significantly reducing link time. In effect, you are precompiling sections of your code--optimally ones that do not change much--and combining them into a large file that can be used by any number of programs. </P><P CLASS="Text1">Building a library allows you to</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>use the library in several programs without having to recompile the code each time</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>combine object code written in different languages into a single file</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>combine several libraries into a single library (for a particular application or desk accessory, for instance), which also improves linker performance</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>customize a library by deleting unneeded modules (<FONT FACE="courier">-dm</FONT>), changing segmentation (<FONT FACE="courier">-sg</FONT> and <FONT FACE="courier">-sn</FONT>), and changing variables from global to local (<FONT FACE="courier">-dn</FONT> and <FONT FACE="courier">-dnx</FONT>)</P><P CLASS="Text1">Note that the linker's output is the same size whether or not a library is used in the makefile. Although multiple symbols are reduced to a single symbol, modules are not combined into larger modules and cross-module references are not resolved. <FONT FACE="courier">Lib</FONT> can be used to create a CFM-68K static runtime library. There is no <FONT FACE="courier">-model cfmseg</FONT> option supported by <FONT FACE="courier">Lib</FONT> since it determines the output library type from the type of input files.</P><P CLASS="SectionHd">INPUT</P><P CLASS="Text1">One or more object files. The <FONT FACE="courier">Lib</FONT> tool does not read standard input. All object files must have been compiled for the same runtime model. You cannot mix object files compiled for classic 68K with files compiled for CFM-68K on the command line.</P><P CLASS="SectionHd">OUTPUT</P><P CLASS="Text1">Output is placed in the data fork of the library file, <FONT FACE="courier">Lib.Out.o</FONT>.You can use the <FONT FACE="courier">-o</FONT> option to rename this file. Normally the library is given a file of type <FONT FACE="courier">'OBJ '</FONT> and a creator of <FONT FACE="courier">'MPS '</FONT>.</P><P CLASS="Note"><B>Note</B><BR>If an error or user interrupt causes the output file to be invalid, the <FONT FACE="courier">Lib</FONT> tool sets the modification date on the file to 0 (that is, January 1, 1904, 12:00 A.M.). This guarantees that the <FONT FACE="courier">Make</FONT> tool recognizes that the library needs to be rebuilt. &#149;</P><P CLASS="SectionHd">STATUS</P><P CLASS="Text1">Lib can return the following status codes:<BR><BR></P><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">0</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">no errors</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">1</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">syntax error</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">2</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">fatal error</P></TD></TR></TABLE><P CLASS="SectionHd">PARAMETERS</P><P CLASS="Option1"><I>objectFile1</I> [<I>objectFile2</I>]&#133;</P><P CLASS="OptionText1">Specifies one or more object files of type <FONT FACE="courier">'OBJ '</FONT>.</P><P CLASS="SectionHd">OPTIONS</P><P CLASS="Option1">-d</P><P CLASS="OptionText1">Suppresses warnings for duplicate symbol definitions for both data and code. </P><P CLASS="Option1">-df <I>deleteFile</I></P><P CLASS="OptionText1">Deletes the list of external modules found in <I>deleteFile</I>. </P><P CLASS="Option1">-dm <I>name</I>[,<I>name</I>]&#133;</P><P CLASS="OptionText1">Deletes the specified entry points or external modules from the output file. This option allows you to make the library file smaller, reducing subsequent link time.</P><P CLASS="OptionText1">When you delete an entry point, Lib deletes only that entry point, not the module or any other entry point in that module. If you delete a module, all of its associated entry points are also deleted.</P><P CLASS="OptionNote1"><B>Note</B><BR>Deleted modules or entry points that are referenced from active code must be resolved by external modules or entry points in another file. &#149;</P><P CLASS="Option1">-dn <I>name</I>[,<I>name</I>]&#133;</P><P CLASS="OptionText1">Deletes one or more entry-point or module names from the output file by reducing their scope to local. This is a gentle deletion in that the contents of the entry points and modules remain present in the output file. References to names deleted in this way continue to refer to the same code, but with a local scope. </P><P CLASS="OptionText1">This option is particularly useful when a global name conflict occurs between two pieces of code, one of which is library code from which you do not need to call the name directly.</P><P CLASS="Option1">-dnx <I>name</I>[,<I>name</I>]&#133;</P><P CLASS="OptionText1">Lets you specify a list of entry-point or module names you want to keep and deletes the rest of the names from the output file by reducing their scope to local. This is a gentle deletion in that the contents of the entry points and modules remain present in the output file. References to names deleted in this way point to the same code but with a local scope. </P><P CLASS="Option1">-f</P><P CLASS="OptionText1">Treats duplicate data definitions as Fortran &quot;common&quot; regions (multiple data modules with the same name). The size of the largest module is used. There can be at most one initialization of the data.</P><P CLASS="Option1">-mf</P><P CLASS="OptionText1">Enables the use of Process Manager temporary memory. Note that the Lib command's use of Process Manager temporary memory excludes other applications from using it, including the Finder.</P><P CLASS="OptionNote1"><B>WARNING</B><BR>If Lib aborts abnormally, that is, there is a crash or a nonmaskable interrupt (NMI), much of the Process Manager temporary memory might be left permanently allocated, thus potentially crippling launches and Finder copy operations. The only way to recover from this situation is to restart the computer. &#149;</P><P CLASS="Option1">-o <I>name</I>.o</P><P CLASS="OptionText1">Renames the output file to <I>name</I>.o.The default name is <FONT FACE="courier">Lib.Out.o</FONT>.</P><P CLASS="Option1">-p</P><P CLASS="OptionText1">Writes progress and summary information to diagnostic output.</P><P CLASS="Option1">-rn <I>oldName</I>=<I>newName</I>[,<I>oldName1</I>=<I>newName2</I>]&#133;</P><P CLASS="OptionText1">Changes module name from <I>oldName</I> to <I>newName</I>.</P><P CLASS="OptionNote1"><B>Note</B><BR>You should not use this option with object files compiled for the CFM-68K runtime environment. &#149;</P><P CLASS="Option1">-sg <I>newSeg</I>=[<I>oldSeg1</I>[,<I>oldSeg2</I>]&#133;]&#133;</P><P CLASS="OptionText1">Changes segmentation so that code in the old segments (<I>oldSeg1</I>, <I>oldSeg2</I>,&#133;) is placed in the segment <I>newSeg</I>. If you do not specify the old segments, the Lib tool places all code in <I>newSeg</I>.</P><P CLASS="Option1">-sn <I>oldSeg</I>=<I>newSeg</I></P><P CLASS="OptionText1">Changes a segment name so that the code in the old segment is placed in the segment named <I>newSeg</I>. </P><P CLASS="Option1">-sym [<B>on</B> | <B>full</B>[,nolines][,nolabels][,novars][,notypes]] | off </P><P CLASS="OptionText1">Determines whether to keep or discard the symbolic debugging information. Note that the parameters on and full are equivalent.</P><P CLASS="Option2"><B>on</B> | <B>full</B></P><P CLASS="OptionText2">Keeps the complete object file records with symbolic debugger information (the default). You can limit<FONT FACE="courier">-sym on</FONT> by also specifying one or more of the following parameters:</P><P CLASS="Option3">,nolines</P><P CLASS="OptionText3">Discards line information.</P><P CLASS="Option3">,nolabels</P><P CLASS="OptionText3">Discards label information.</P><P CLASS="Option3">,novars</P><P CLASS="OptionText3">Discards variable information.</P><P CLASS="Option3">,notypes</P><P CLASS="OptionText3">Discards type information.</P><P CLASS="Option2">off</P><P CLASS="OptionText2">Does not generate object file records containing symbolic information. </P><P CLASS="Option1">-w</P><P CLASS="OptionText1">Suppresses warning messages. </P><P CLASS="Option1">-ver <I>number</I> </P><P CLASS="OptionText1">Sets the version of the OMF file to <I>number</I>. </P><P CLASS="SectionHd">EXAMPLES</P><P CLASS="Text1">The following command line combines all the libraries (&#8776;) in the <FONT FACE="courier">{CLibraries}</FONT> directory into a single library named <FONT FACE="courier">CLibrary.o</FONT>.</P><P CLASS="Code">Lib &quot;{CLibraries}&quot;&#8776; -o &quot;{CLibraries}&quot;CLibrary.o</P><P CLASS="Text1">For applications that require most or all of the C library files, using the combined C library file reduces link time.</P><P CLASS="SectionHd">LIMITATIONS</P><P CLASS="Text1">When Lib is processing library files, the maximum number of objects (symbols, modules, labels) that it can store is 16 MB. Each object file may contribute up to 64 KB toward this maximum. The limit on the number of symbols in an output file is set at 64 KB.</P><P CLASS="SectionHd">SEE ALSO</P><P CLASS="Text1"><FONT FACE="courier"><A HREF="dumpobj.html">DumpObj</A></FONT></P><P CLASS="Text1"><FONT FACE="courier"><A HREF="ilink.html">ILink</A></FONT></P><P CLASS="Text1"><FONT FACE="courier"><A HREF="sc.html">SC[pp]</A></FONT></P><P CLASS="Text1">&nbsp;<BR>&nbsp;</P><HR WIDTH="600" ALIGN="LEFT"><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="interactivehelp.html">Previous</A></P></TD>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="index.html">Table of Contents</A></P></TD>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="line.html">Next</A></P></TD>	</TR></TABLE><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="600">		<P CLASS="Copyright">Copyright Apple Computer, Inc. 1993-2000</P>		<P CLASS="Date">Last Updated July 2000</P>		</TD>	</TR></TABLE></TD></TR></TABLE><!--#include virtual="/footer" --></BODY></HTML>