<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML><HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1"><META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css"><LINK REL="STYLESHEET" HREF="cmdref.css" CHARSET="ISO-8859-1" TYPE="text/css"><TITLE>Compare</TITLE></HEAD><BODY BGCOLOR="#ffffff"><!--#include file="breadcrumb" --><!--#include virtual="/adcnavbar" --><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD><TABLE WIDTH="600" BGCOLOR="0" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD><P CLASS="BookTitle">MPW Command Reference</P></TD>	</TR></TABLE><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="commando.html">Previous</A></P></TD>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="index.html">Table of Contents</A></P></TD>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="comparefiles.html">Next</A></P></TD>	</TR></TABLE><HR WIDTH="600" ALIGN="LEFT"><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="475"><P CLASS="PageHdL">Compare</P></TD>		<TD WIDTH="125"><P CLASS="PageHdR">Tool</P></TD>	</TR></TABLE><P CLASS="SectionHd">SYNTAX</P><P CLASS="Syntax">Compare <I>file1</I> [<I>file2</I>] [-b] [-c <I>col1</I>-<I>col2</I>[,<I>col1</I>-<I>col2</I>]] [-d <I>depth</I>]<BR> [-e <I>context</I>] [-g <I>groupingFactor</I>] [-h <I>lineWidth</I>] [-l] [-m] [-n] [-p]<BR> [-s] [-selection set | next] [-t] [-v] [-w <I>max</I>] [-x]</P><P CLASS="SectionHd">DESCRIPTION</P><P CLASS="Text1">The Compare tool compares the lines of two text files and writes their differences to standard output. This tool describes each difference in a message containing the type of difference (that is, either nonmatching or extra lines), the MPW Shell editor commands that select the lines in question, and the differing lines. </P><P CLASS="Text1">To generate this output, Compare performs more than a simple one-to-one comparison. Whenever it finds a difference, Compare stores the lines while it searches each file alternately for another match to resynchronize. A file is considered synchronized when a certain number of lines (called the <I>grouping factor</I>) match exactly. When these matching lines are found, Compare writes the previous difference (for example, mismatched lines at line 120) to standard output.</P><P CLASS="Text1">The grouping factor depends solely on the number of mismatched or extra lines and is calculated according to the formula</P><P CLASS="Text1">G = Trunc((2.0 * Log<SUB>10</SUB>(M)) + 2.0)</P><P CLASS="Text1">where G represents the grouping factor and M represents the number of mismatched or extra lines. Using this formula, Compare requires more lines to be the same after larger mismatches. For example, if the first file (<I>file1</I>) contains a 100-line procedure not found in the second (<I>file2</I>), Compare requires a grouping factor of 6. On the other hand, if the procedure contains only 8 lines, the grouping factor drops down to 3. </P><P CLASS="Text1">For your reference, the table below shows the grouping factor G as a function of the number of mismatched or extra lines M.<BR><BR></P><!-- Table Start --><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableHdL">G: Grouping factor</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableHdR">M: Number of mismatched/extra lines</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">2</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">1 to 3</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">3</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">4 to 9</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">4</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">10 to 31</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">5</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">32 to 99</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">6</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">100 to 315</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">7</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">316 to 999</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">8</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">1000 to 3161</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">9</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">3162 to 9999</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">10</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">10000 to 31622</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">11</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">31623 to 32767</P></TD></TR></TABLE><!-- Table End --><P CLASS="Text1">Although the grouping factor G is dynamic by default, you can fix it as a static number by using the static option (<FONT FACE="courier">-s</FONT>) with <FONT FACE="courier">-g</FONT>. If you omit <FONT FACE="courier">-s</FONT>, the grouping factor remains dynamic and <FONT FACE="courier">-g</FONT> allows you to set the minimum grouping factor. </P><P CLASS="Text1">A static G may be desirable under some circumstances, but be aware that it can resynchronize files at undesirable points, especially if G is too small. It is recommended that you use the default first; if the results are not satisfactory, try a higher minimum value of dynamic G (such as 3 or 4). If that is still unsatisfactory, try a static G.</P><P CLASS="Text1">With either option, there is a limit on how far out of synchronization the two files can get before they're no longer worth comparing. For a dynamic G, the limit on the number of mismatched lines is 1000, but you can choose a lower limit with the depth option (<FONT FACE="courier">-d</FONT>). For the static G option, typical values for G are 1 to 5 with a maximum number of mismatched lines between 10 and 50. (The default limit is 25.)</P><P CLASS="SectionHd">INPUT</P><P CLASS="Text1">None, unless you omit the <I>file2</I> parameter, in which case <I>file1</I> is compared to standard input.</P><P CLASS="SectionHd">OUTPUT</P><P CLASS="Text1">Standard output. Compare first writes the names of both files to standard output (<I>file1</I> and either <I>file2</I> or standard input). It then writes all differences between the two files as messages. These messages include the types of differences, the MPW Shell editor commands that you can use to select the lines, and the differing lines themselves. </P><P CLASS="Text1">Depending on the difference, Compare produces a message that takes one of the following forms:</P><P CLASS="Code">Nonmatching lines <I>(Shell editor commands)<BR>&nbsp;&nbsp;&#133;displays lines from both files&#133;</I></P><P CLASS="Code">Extra lines in 1st before &lt;<I>line</I>&gt; in 2nd <I>(editor commands)<BR>&nbsp;&nbsp;&#133;displays lines from file1&#133;</I></P><P CLASS="Code">Extra lines in 2nd before &lt;<I>line</I>&gt; in 1st <I>(editor commands)<BR>&nbsp;&nbsp;&#133;displays lines from file2&#133;</I></P><P CLASS="Code">Extra lines in 1st file <I>(editor commands)<BR>&nbsp;&nbsp;&#133;displays lines from file1&#133;</I></P><P CLASS="Code">Extra lines in 2nd file <I>(editor commands)<BR>&nbsp;&nbsp;&#133;displays lines from file2&#133;</I></P><P CLASS="Text1">The MPW Shell editor commands consist of File and Line (Line is provided in the MPW Scripts folder) commands to select the mismatched lines. If there are extra lines in one file and not the other, the selection for the missing lines is generated as an insertion point at the point where the lines are missing.</P><P CLASS="Text1">Several options alter the message form slightly. If you use the <FONT FACE="courier">-e</FONT> option, you can see the context in which mismatched or extra lines appear. In this case, you specify a certain number of context lines to precede and succeed the lines in question. If you request <FONT FACE="courier">-m</FONT>, on the other hand, Compare suppresses the differing lines altogether, including only the type of difference and the MPW Shell editor commands. See the <FONT FACE="courier">-h</FONT> and <FONT FACE="courier">-v</FONT> options for more formatting options. </P><P CLASS="Text1">If Comparereaches an end-of-file or the maximum number of mismatched or extra lines during resynchronization, one of the following messages also appears:</P><P CLASS="Code">*** Nothing seems to match ***</P><P CLASS="Code">*** EOF on both files ***</P><P CLASS="Code">*** EOF on file 1 ***</P><P CLASS="Code">*** EOF on file 2 ***</P><P CLASS="Text1">If the files are in synchronization and both reach their end-of-file at the same time, the following message appears if any mismatches occurred:</P><P CLASS="Code">*** EOF on both files at the same time ***</P><P CLASS="Text1">If the files match, the following message is displayed:</P><P CLASS="Code">*** Files match ***</P><P CLASS="SectionHd">STATUS</P><P CLASS="Text1">Compare can return the following status codes:<BR><BR></P><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">0</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">files match</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">1</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">syntax error (parameter or option error)</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">2</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">files do not match</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">4</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">nothing seems to match</P></TD></TR></TABLE><P CLASS="SectionHd">PARAMETERS</P><P CLASS="Option1"><I>file1</I></P><P CLASS="OptionText1">Specifies the text file or selection in a file to be compared to <I>file2</I>.</P><P CLASS="Option1"><I>file2</I></P><P CLASS="OptionText1">Specifies the text file to be compared to <I>file1</I>. If you omit this parameter, <I>file1</I> is compared to standard input. </P><P CLASS="SectionHd">OPTIONS</P><P CLASS="Option1">-b</P><P CLASS="OptionText1">Treats several blanks (spaces or tabs) as a single space and ignores trailing blanks.</P><P CLASS="Option1">-c <I>col1</I>-<I>col2</I>[,<I>col1</I>-<I>col2</I>]</P><P CLASS="OptionText1">Compares only the columns <I>col1</I> to <I>col2</I> of each file. If you omit the second column range, the first range applies to both files; otherwise, the first range applies to <I>file1</I>, and the second range applies to <I>file2</I>. </P><P CLASS="OptionText1">If you omit <I>col1,</I> Compare assumes 1. If you omit <I>col2</I>, Compare assumes 255. </P><P CLASS="OptionNote1"><B>Note</B><BR>To use <FONT FACE="courier">-c</FONT>, tabs must be expanded. The tab setting is determined from the file's tab value. See also <FONT FACE="courier">-x</FONT> for more information about tab expansion. &#149;</P><P CLASS="Option1">-d <I>depth</I></P><P CLASS="OptionText1">Sets the maximum number of mismatched or extra lines (depth)--that is, how far out of synchronization the files can get before they're no longer worth comparing. The value of <I>depth</I> is an integer value from 1 to 1000. The default is 1000 for dynamic grouping G, and 25 for static (<FONT FACE="courier">-s</FONT>) grouping G.</P><P CLASS="Option1">-e <I>context</I></P><P CLASS="OptionText1">Displays up to <I>context</I> number of lines before and after the mismatched or extra lines. The Compare tool allows values of 1 to 100; however, <I>context</I> lines are shown only if they are equal in both files, so fewer than the specified number of lines may be shown. </P><P CLASS="OptionText1">Note that Compare ignores this option if you also specify <FONT FACE="courier">-m</FONT>.</P><P CLASS="Option1">-g <I>groupingFactor</I></P><P CLASS="OptionText1">Specifies the grouping factor, G. For dynamic grouping, <FONT FACE="courier">-g</FONT> specifies the minimum grouping factor, that is, the minimum number of lines that must match for the two files to be considered resynchronized. This value must be at least 2, which is the default. </P><P CLASS="OptionText1">If you also use <FONT FACE="courier">-s</FONT>, this option specifies a fixed grouping factor. In this case, Compare allows values from 1 through 1000 with a default of 3.</P><P CLASS="Option1">-h <I>lineWidth</I></P><P CLASS="OptionText1">Displays mismatches in a horizontal format in a line of <I>lineWidth</I> characters, where <I>lineWidth</I> can be any number from 70 to 255. This causes Compare to display only a portion of each nonmatching line <BR>side by side. </P><P CLASS="Option1">-l</P><P CLASS="OptionText1">Ignores case differences by converting all lines to lowercase before comparing them. Normally Compare is case sensitive. </P><P CLASS="Option1">-m</P><P CLASS="OptionText1">Suppresses the display of mismatched and extra lines. Normally Compare displays the mismatched and extra lines along with the type of difference and the MPW Shell editor commands. </P><P CLASS="OptionText1">Compare ignores this option if you also specify <FONT FACE="courier">-h</FONT>.</P><P CLASS="Option1">-n</P><P CLASS="OptionText1">Does not write any messages to standard output if both files match.</P><P CLASS="Option1">-p</P><P CLASS="OptionText1">Writes progress information for Compare, including its version number, to diagnostic output.</P><P CLASS="Option1">-s</P><P CLASS="OptionText1">Specifies a static, or fixed, grouping factor to be set with <FONT FACE="courier">-g</FONT>. If you do not specify this option, the grouping factor G is dynamic by default.</P><P CLASS="Option1">-selection set | next</P><P CLASS="OptionText1">Controls the selections. This option is only used by the CompareFiles script.</P><P CLASS="Option2">set</P><P CLASS="OptionText2">Set the selections to highlight the first mismatch.</P><P CLASS="Option2">next</P><P CLASS="OptionText2">Starting with the selections created by <FONT FACE="courier">-selection set</FONT>, move the selections down in the windows to the next mismatch.Position the Shell windows so that 10 lines preceed each selection.</P><P CLASS="Option1">-t</P><P CLASS="OptionText1">Ignores trailing blanks (spaces or tabs). This is a subset of the <FONT FACE="courier">-b</FONT> option.</P><P CLASS="Option1">-v</P><P CLASS="OptionText1">Displays differences between two files in a format that allows output lines to be cut and pasted into a source file. That is, Compare suppresses the line number that normally precedes mismatched or extra lines. For example, </P><P CLASS="OptionCode1">#This line does nothing</P><P CLASS="OptionText1">instead of </P><P CLASS="OptionCode1">120 #This line does nothing</P><P CLASS="Option1">-w <I>max</I></P><P CLASS="OptionText1">Set the maximum input line length to <I>max</I>. The default is 255. The greatest permissible value for <I>max</I> is 1024. </P><P CLASS="Option1">-x</P><P CLASS="OptionText1">Suppresses tab expansion. Tabs are expanded into spaces except when you use <FONT FACE="courier">-b</FONT> or <FONT FACE="courier">-x</FONT>. To expand tabs, Compare determines the tab value from each file's tab setting, which is stored as a resource; if there is no tab setting, Compare assumes 4 spaces per tab. </P><P CLASS="OptionNote1"><B>Caution</B><BR>This option can cause lines to be displayed incorrectly in output messages if the files contain tabs. Also, do not use <FONT FACE="courier">-c</FONT> with <FONT FACE="courier">-x</FONT> because <FONT FACE="courier">-c</FONT> depends on the columns being displayed with tabs expanded. &#149;</P><P CLASS="OptionNote1"><B>Note</B><BR>All comparison criteria--column range (<FONT FACE="courier">-c</FONT>), blanks compression (<FONT FACE="courier">-b</FONT>), and case conversion (<FONT FACE="courier">-l</FONT> )--affect the way Compare displays lines in the output message. Lines appear in the form in which they are compared, which can be different from their original form due to the effect of these options. &#149;</P><P CLASS="SectionHd">EXAMPLES</P><P CLASS="Text1">In the following example, a comment was added to <FONT FACE="courier">Memory.p</FONT> and the file was saved as <FONT FACE="courier">Memory.p.revision</FONT>.To find the comment, the command line</P><P CLASS="Code">Compare Memory.p Memory.p.revision</P><P CLASS="Text1">is executed, producing the following output:</P><P CLASS="Code">File #1: Memory.p</P><P CLASS="Code">File #2: Memory.p.revision</P><P CLASS="Code">Extra lines in 2nd before 120 in 1st (File &quot;Memory.p&quot;; Line &#8710;120; File &quot;Memory.p.revision&quot;; Line 120)</P><P CLASS="Code">120	 			{This line does nothing}</P><P CLASS="Code">*** EOF on both files at the same time ***</P><P CLASS="Text1">When executed, the MPW Shell editor commands</P><P CLASS="Code">File &quot;Memory.p&quot;; Line &#8710;120; File &quot;Memory.p.revision&quot;; Line 120 </P><P CLASS="Text1">select the extra line in <FONT FACE="courier">Memory.p.revision</FONT>.</P><P CLASS="Text1">The following command line compares the selected portions of the two windows, <FONT FACE="courier">File.old</FONT> and <FONT FACE="courier">File.new</FONT>, and writes out the results:</P><P CLASS="Code">Compare File.old.&#167; File.new.&#167;</P><P CLASS="SectionHd">LIMITATIONS</P><P CLASS="Text1">The maximum number of lines that can be processed is 65535 (any additional lines exceeding this limit are not reported).</P><P CLASS="SectionHd">SEE ALSO</P><P CLASS="Text1"><FONT FACE="courier"><A HREF="comparefiles.html">CompareFiles</A></FONT></P><P CLASS="Text1"><FONT FACE="courier"><A HREF="equal.html">Equal</A> </FONT></P><P CLASS="Text1">&nbsp;<BR>&nbsp;</P><HR WIDTH="600" ALIGN="LEFT"><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="commando.html">Previous</A></P></TD>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="index.html">Table of Contents</A></P></TD>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="comparefiles.html">Next</A></P></TD>	</TR></TABLE><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="600">		<P CLASS="Copyright">Copyright Apple Computer, Inc. 1993-2000</P>		<P CLASS="Date">Last Updated July 2000</P>		</TD>	</TR></TABLE></TD></TR></TABLE><!--#include virtual="/footer" --></BODY></HTML>