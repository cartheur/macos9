<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML><HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1"><META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css"><LINK REL="STYLESHEET" HREF="cmdref.css" CHARSET="ISO-8859-1" TYPE="text/css"><TITLE>ModPEF</TITLE></HEAD><BODY BGCOLOR="#ffffff"><!--#include file="breadcrumb" --><!--#include virtual="/adcnavbar" --><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD><TABLE WIDTH="600" BGCOLOR="0" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD><P CLASS="BookTitle">MPW Command Reference</P></TD>	</TR></TABLE><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="modifyreadonly.html">Previous</A></P></TD>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="index.html">Table of Contents</A></P></TD>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="monitors.html">Next</A></P></TD>	</TR></TABLE><HR WIDTH="600" ALIGN="LEFT"><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="475"><P CLASS="PageHdL">ModPEF</P></TD>		<TD WIDTH="125"><P CLASS="PageHdR">Tool</P></TD>	</TR></TABLE><P CLASS="SectionHd">SYNTAX</P><P CLASS="Syntax">ModPEF <I>file</I> -o <I>fileName</I>[-@addexports <I>fragSpec</I>=<I>fileName</I>]<BR>[-@alias <I>fragSpec</I>=<I>fileName</I>] [-c <I>creator</I>]<BR>[-delete <I>fragSpec</I>[,<I>fragSpec</I>]&#133;][-deleteexports <I>fragSpec</I>=<I>name</I>[,<I>name</I>]&#133;]<BR>[-@deleteexports <I>fragSpec</I>=<I>fileName</I>][-describe <B>on</B> | off]<BR>[-extract <I>fragSpec</I>[,<I>fragSpec</I>]&#133;][-initbefore <I>fragSpec</I>=<I>name</I>[,<I>name</I>]&#133;]<BR>[-level <I>fragSpec</I>=base | update][-list][-mergecode on | <B>off</B>]<BR>[-mf | <B>-nomf</B>][-noinitbefore <I>fragSpec</I>=<I>name</I>[,<I>name</I>]&#133;]<BR>[-noweak <I>fragSpec</I>=<I>name</I>[,<I>name</I>]&#133;][-@noweak <I>fragSpec</I>=<I>fileName</I>]<BR>[-noweaklib <I>fragSpec</I>=<I>name</I>[,<I>name</I>]&#133;][-p]<BR>[-renamefrag <I>fragSpec</I>=<I>name</I>][-@renamesymbols <I>fragSpec</I>=<I>fileName</I>]<BR>[-share <I>fragSpec</I>=context | global | protected | <I>n</I>]<BR>[-stacksize <I>fragSpec</I>=<I>n</I>][-t <I>type</I>][-usage <I>fragSpec</I>=lib[rary]<BR>| app[lication] | dropin | stub | weakstub | <I>n</I>][-v]<BR>[-vercur <I>fragSpec</I>=<I>n</I>][-verdef <I>fragSpec</I>=<I>n</I>][-verimp <I>fragSpec</I>=<I>n</I>]<BR>[-w[arn]][-weak <I>fragSpec</I>=<I>name</I>[,<I>name</I>]&#133;][-@weak <I>fragSpec</I>=<I>fileName</I>]<BR>[-weaklib <I>fragSpec</I>=<I>name</I>[,<I>name</I>]&#133;]</P><P CLASS="Text1">A <FONT FACE="courier"><I>fragSpec</I></FONT> identifies a particular fragment within a file. Its syntax is:</P><P CLASS="Syntax">fragSpec ::= <I>fragName</I>[(<I>fragInfo</I>[,<I>fragInfo</I>]&#133;)]</P><P CLASS="Text1">A <FONT FACE="courier"><I>fragName</I></FONT> is the name of a fragment and is case-sensitive. Its syntax is:</P><P CLASS="Text1"><FONT FACE="courier">fragName ::= </FONT>characters other than <FONT FACE="courier">'('</FONT>, <FONT FACE="courier">')'</FONT>, <FONT FACE="courier">'='</FONT> and <FONT FACE="courier">','</FONT><BR><FONT FACE="courier">fragName ::= '*'</FONT> &nbsp; &nbsp; (matches any fragment name)</P><P CLASS="Text1">A <FONT FACE="courier"><I>fragInfo</I></FONT> provides additional information which is used to identify aparticular fragment within a file. Its syntax is:</P><P CLASS="Syntax">fragInfo ::= [arch=]pwpc | [arch=]m68k | arch=<I>n</I> |<BR>[usage=]lib[rary] | [usage=]app[lication] | [usage=]dropin |<BR>[usage=]stub      | [usage=]weakstub      | usage=<I>n</I>  |<BR>[level=]base      | [level=]update        | level=<I>n</I>  |<BR>vercur=<I>n</I>    | verdef=<I>n</I></P><P CLASS="SectionHd">DESCRIPTION</P><P CLASS="Text1">ModPEF copies fragments from an existing PEF file to a new PEF file. ModPEF can also modify the attributes of the copied fragments. ModPEF does not touch the resource fork except for reading and writing the <FONT FACE="courier">'cfrg'</FONT> resource and copying <FONT FACE="courier">'rseg'</FONT> and <FONT FACE="courier">'CODE'</FONT> resources for CFM-68K applications.</P><P CLASS="SectionHd">INPUT</P><P CLASS="Text1">A PEF file containing one or more fragments. The input file is never modified.</P><P CLASS="SectionHd">OUTPUT</P><P CLASS="Text1">A new PEF file containing one or more, possibly modified, fragments from the input file. The <FONT FACE="courier">-o</FONT> option must be used to name the output file.</P><P CLASS="SectionHd">STATUS</P><P CLASS="Text1">ModPEF can return the following status codes:<BR><BR></P><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">0</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">no errors</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">1</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">fatal error</P></TD></TR></TABLE><P CLASS="SectionHd">PARAMETERS</P><P CLASS="Option1"><I>file</I></P><P CLASS="OptionText1">Specifies a PEF file containing one or more fragments.</P><P CLASS="SectionHd">OPTIONS</P><P CLASS="Note"><B>NOTE</B><BR>Some of the command line options are order-sensitive. If a fragment is affected by several options, the changes are done in the order the options appear on the command line. Renaming a fragment or changing its version numbers does not affect fragment matching; the matching is done prior to any renaming/reversioning.&#149;</P><P CLASS="Option1">-@addexports <I>fragSpec</I>=<I>fileName</I></P><P CLASS="OptionText1">Adds exported symbols to the specified fragment. The symbols specified by the text file <I>fileName</I> are added to the exported symbols section of the fragment. The format of the lines in the text file are as follows:</P><P CLASS="OptionCode1"><I>name</I> <I>section</I>[:]<I>offset</I> [<I>class</I>]</P><P CLASS="OptionText1">The <I>name</I> is the name of the symbol to be exported.</P><P CLASS="OptionText1">The <I>section</I> is one of the following keywords:</P><P CLASS="OptionCode1">code | data | none | absolute | transfer</P><P CLASS="OptionText1">The keyword <FONT FACE="courier">none</FONT> indicates section number -1. The keyword <FONT FACE="courier">absolute</FONT> indicates section number -2. The keyword <FONT FACE="courier">transfer</FONT> indicates section number -3.</P><P CLASS="OptionText1">The <I>offset</I> is a numeric offset into the section.</P><P CLASS="OptionText1">The optional <I>class</I> is a number or one of the following keywords:</P><P CLASS="OptionCode1">code | data | tvector | tocentry | glue</P><P CLASS="OptionText1">The default symbol class is <FONT FACE="courier">data</FONT>.</P><P CLASS="OptionText1">Lines beginning with <FONT FACE="courier">'#'</FONT> or <FONT FACE="courier">'*'</FONT> are treated as comments.</P><P CLASS="Option1">-@alias <I>fragSpec</I>=<I>fileName</I></P><P CLASS="OptionText1">Assigns aliases to exported symbols in the specified fragment and adds the aliases to the exported symbols section. The original symbol names remain exported. The format of the lines in the text file <I>fileName</I> are as follows:</P><P CLASS="OptionCode1"><I>exportName</I> <I>aliasName</I></P><P CLASS="OptionText1">Lines beginning with <FONT FACE="courier">'#'</FONT> or <FONT FACE="courier">'*'</FONT> are treated as comments.</P><P CLASS="Option1">-c <I>creator</I></P><P CLASS="OptionText1">Sets the output file creator to <I>creator</I>. The default creator is the same as the input file creator.</P><P CLASS="Option1">-delete <I>fragSpec</I>[,<I>fragSpec</I>]&#133;</P><P CLASS="OptionText1">Deletes the specified fragments when copying the input file to the output file. All fragments except those marked for deletion are copied to the output file. This option can not be used in conjunction with the <FONT FACE="courier">-extract</FONT> option.</P><P CLASS="Option1">-deleteexports <I>fragSpec</I>=<I>name</I>[,<I>name</I>]&#133;</P><P CLASS="OptionText1">Deletes the specified symbols from the exported symbols section of the specified fragment.</P><P CLASS="Option1">-@deleteexports <I>fragSpec</I>=<I>fileName</I></P><P CLASS="OptionText1">Deletes exported symbols from the specified fragment. The symbols specified by the text file <I>fileName</I> are removed from the exported symbols section of the fragment. The text file should contain one symbol name per line. Lines beginning with <FONT FACE="courier">'#'</FONT> or <FONT FACE="courier">'*'</FONT> are treated as comments.</P><P CLASS="Option1">-describe <B>on</B> | off</P><P CLASS="OptionText1">Specifies whether the fragment changes should be described.</P><P CLASS="Option2"><B>on</B></P><P CLASS="OptionText2">Describes the changes.</P><P CLASS="Option2">off</P><P CLASS="OptionText2">Does not describe the changes.</P><P CLASS="Option1">-extract <I>fragSpec</I>[,<I>fragSpec</I>]&#133;</P><P CLASS="OptionText1">Extracts the specified fragments from the input file and copies them to the output file. Only those fragments marked for extraction are copied to the output file. This option can not be used in conjunction with the <FONT FACE="courier">-delete</FONT> option.</P><P CLASS="Option1">-initbefore <I>fragSpec</I>=<I>name</I>[,<I>name</I>]&#133;</P><P CLASS="OptionText1">Marks the specified import libraries in the specified fragment as "initbefore". Note that when specifying the name of an import library, you must use the library's fragment name not the name of the file containing the library.</P><P CLASS="Option1">-level <I>fragSpec</I>=base | update</P><P CLASS="OptionText1">Changes the specified fragment's "level".</P><P CLASS="Option2">base</P><P CLASS="OptionText2">Sets the level to "full library".</P><P CLASS="Option2">update</P><P CLASS="OptionText2">Sets the level to "update library".</P><P CLASS="Option1">-list</P><P CLASS="OptionText1">Lists the fragments contained in the input file by extracting information from the <FONT FACE="courier">'cfrg'</FONT> resource. For each fragment, the information listed includes the fragment name, the architecture type, the fragment level, the current version number and the definition version number.</P><P CLASS="Option1">-mergecode on | <B>off</B></P><P CLASS="OptionText1">Specifies whether the code sections should be adjacent in the output file.</P><P CLASS="Option2">on</P><P CLASS="OptionText2">Creates overlapping fragments in the output file. The code sections of each fragment are made physically adjacent. This can improve paging behavior when fragments are loaded from the file. Note that this option has no effect on CFM-68K applications since the code is stored in the resource fork.</P><P CLASS="Option2"><B>off</B></P><P CLASS="OptionText2">Does not make the code sections adjacent in the output file.</P><P CLASS="Option1">-mf | <B>-nomf</B></P><P CLASS="OptionText1">Enables or suppresses the use of Process Manager temporary memory. </P><P CLASS="OptionText1">Note that the ModPEF tool's use of Process Manager temporary memory excludes other applications from using it, including the Finder. If Process Manager temporary memory is unavailable, this option has no effect.</P><P CLASS="OptionNote1"><B>WARNING</B><BR>If ModPEF aborts abnormally, that is, there is a crash or a nonmaskable interrupt (NMI), much of the Process Manager temporary memory might be left permanently allocated, thus potentially crippling launches and Finder copy operations. The only way to recover from this situation is to restart the computer. &#149;</P></P><P CLASS="Option1">-noinitbefore <I>fragSpec</I>=<I>name</I>[,<I>name</I>]&#133;</P><P CLASS="OptionText1">Marks the specified import libraries in the specified fragment as "non-initbefore". Note that when specifying the name of an import library, you must use the library's fragment name not the name of the file containing the library.</P><P CLASS="Option1">-noweak <I>fragSpec</I>=<I>name</I>[,<I>name</I>]&#133;</P><P CLASS="OptionText1">Marks the specified imported symbols in the specified fragment as "non-weak".</P><P CLASS="Option1">-@noweak <I>fragSpec</I>=<I>fileName</I></P><P CLASS="OptionText1">Marks the specified imported symbols in the specified fragment as "non-weak". The text file should contain one symbol name per line. Lines beginning with <FONT FACE="courier">'#'</FONT> or <FONT FACE="courier">'*'</FONT> are treated as comments.</P><P CLASS="Option1">-noweaklib <I>fragSpec</I>=<I>name</I>[,<I>name</I>]&#133;</P><P CLASS="OptionText1">Marks the specified import libraries in the specified fragment as "non-weak". Note that when specifying the name of an import library, you must use the library's fragment name not the name of the file containing the library.</P></P><P CLASS="Option1">-o <I>fileName</I></P><P CLASS="OptionText1">Specifies the name of the output file. This option is required.</P><P CLASS="Option1">-p</P><P CLASS="OptionText1">Writes progress and summary information to diagnostic output.</P><P CLASS="Option1">-renamefrag <I>fragSpec</I>=<I>name</I></P><P CLASS="OptionText1">Renames the specified fragment.</P><P CLASS="Option1">-@renamesymbols <I>fragSpec</I>=<I>fileName</I></P><P CLASS="OptionText1">Renames symbols in the specified fragment. Each occurrence of the original symbol name is replaced with the new name. Note that this option can rename import libraries, imported symbols and exported symbols. The format of the lines in the text file <I>fileName</I> are as follows:</P><P CLASS="OptionCode1"><I>oldName</I> <I>newName</I></P><P CLASS="OptionText1">Lines beginning with <FONT FACE="courier">'#'</FONT> or <FONT FACE="courier">'*'</FONT> are treated as comments.</P><P CLASS="Option1">-share <I>fragSpec</I>=context | global | protected | <I>n</I></P><P CLASS="OptionText1">Changes the specified fragment's data section sharing mode.</P><P CLASS="Option2">context</P><P CLASS="OptionText2">The data section is shared within a context.</P><P CLASS="Option2">global</P><P CLASS="OptionText2">The data section is shared across all contexts.</P><P CLASS="Option2">protected</P><P CLASS="OptionText2">The data section is readable by all contexts but writable only by privileged contexts.</P><P CLASS="Option2"><I>n</I></P><P CLASS="OptionText2">Sets the data section sharing mode to the specified value.</P><P CLASS="Option1">-stacksize <I>fragSpec</I>=<I>n</I></P><P CLASS="OptionText1">Sets the specified fragment's stack size to the specified value. </P><P CLASS="Option1">-t <I>type</I></P><P CLASS="OptionText1">Sets the output file type to <I>type</I>. The default type is the same as the input file type.</P><P CLASS="Option1">-usage <I>fragSpec</I>=lib[rary] | app[lication] | dropin | stub | weakstub | <I>n</I></P><P CLASS="OptionText1">Changes the specified fragment's "usage" type.</P><P CLASS="Option2">lib[rary]</P><P CLASS="OptionText2">Sets the "usage" type to import library.</P><P CLASS="Option2">app[lication]</P><P CLASS="OptionText2">Sets the "usage" type to application.</P><P CLASS="Option2">dropin</P><P CLASS="OptionText2">Sets the "usage" type to drop-in addition.</P><P CLASS="Option2">stub</P><P CLASS="OptionText2">Sets the "usage" type to stub library.</P><P CLASS="Option2">weakstub</P><P CLASS="OptionText2">Sets the "usage" type to weak stub library.</P><P CLASS="Option2"><I>n</I></P><P CLASS="OptionText2">Sets the "usage" type to the specified value.</P><P CLASS="Option1">-v</P><P CLASS="OptionText1">Writes verbose progress and summary information to diagnostic output. Specifying this option also implies <FONT FACE="courier">-p</FONT>.</P><P CLASS="Option1">-vercur <I>fragSpec</I>=<I>n</I></P><P CLASS="OptionText1">Changes the specified fragment's "current version" to the specified version number. </P><P CLASS="Option1">-verdef <I>fragSpec</I>=<I>n</I></P><P CLASS="OptionText1">Changes the specified fragment's "definition version" to the specified version number. </P><P CLASS="Option1">-verimp <I>fragSpec</I>=<I>n</I></P><P CLASS="OptionText1">Changes the specified fragment's "implementation version" to the specified version number.</P><P CLASS="Option1">-w[arn]</P><P CLASS="OptionText1">Suppresses the display of warning messages.</P><P CLASS="Option1">-weak <I>fragSpec</I>=<I>name</I>[,<I>name</I>]&#133;</P><P CLASS="OptionText1">Marks the specified imported symbols in the specified fragment as "weak".</P><P CLASS="Option1">-@weak <I>fragSpec</I>=<I>fileName</I></P><P CLASS="OptionText1">Marks the specified imported symbols in the specified fragment as "weak". The text file should contain one symbol name per line. Lines beginning with <FONT FACE="courier">'#'</FONT> or <FONT FACE="courier">'*'</FONT> are treated as comments.</P><P CLASS="Option1">-weaklib <I>fragSpec</I>=<I>name</I>[,<I>name</I>]&#133;</P><P CLASS="OptionText1">Marks the specified import libraries in the specified fragment as "weak". Note that when specifying the name of an import library, you must use the library's fragment name not the name of the file containing the library.</P><P CLASS="SectionHd">EXAMPLES</P><P CLASS="Text1">The following are some examples of fragSpecs:</P><P CLASS="Code">MyFrag<BR>MyFrag(pwpc)<BR>MyFrag(arch=m68k,vercur=5)<BR>'*'<BR>'*(stub)'<BR></P><P CLASS="SectionHd">SEE ALSO</P><P CLASS="Text1"><FONT FACE="courier"><A HREF="dumppef.html">DumpPEF</A></FONT></P><P CLASS="Text1"><FONT FACE="courier"><A HREF="ilink.html">ILink</A></FONT></P><P CLASS="Text1"><FONT FACE="courier"><A HREF="ppclink.html">PPCLink</A></FONT></P><P CLASS="Text1">&nbsp;<BR>&nbsp;</P><HR WIDTH="600" ALIGN="LEFT"><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="modifyreadonly.html">Previous</A></P></TD>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="index.html">Table of Contents</A></P></TD>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="monitors.html">Next</A></P></TD>	</TR></TABLE><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="600">		<P CLASS="Copyright">Copyright Apple Computer, Inc. 1993-2000</P>		<P CLASS="Date">Last Updated July 2000</P>		</TD>	</TR></TABLE></TD></TR></TABLE><!--#include virtual="/footer" --></BODY></HTML>