<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML><HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1"><META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css"><LINK REL="STYLESHEET" HREF="cmdref.css" CHARSET="ISO-8859-1" TYPE="text/css"><TITLE>MakeDepend </TITLE></HEAD><BODY BGCOLOR="#ffffff"><!--#include file="breadcrumb" --><!--#include virtual="/adcnavbar" --><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD><TABLE WIDTH="600" BGCOLOR="0" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD><P CLASS="BookTitle">MPW Command Reference</P></TD>	</TR></TABLE><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="make.html">Previous</A></P></TD>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="index.html">Table of Contents</A></P></TD>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="makeerrorfile.html">Next</A></P></TD>	</TR></TABLE><HR WIDTH="600" ALIGN="LEFT"><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="475"><P CLASS="PageHdL">MakeDepend</P></TD>		<TD WIDTH="125"><P CLASS="PageHdR">Tool</P></TD>	</TR></TABLE><P CLASS="SectionHd">SYNTAX</P><P CLASS="Syntax">MakeDepend sourceFile&#133; [explicitDependency&#133;] [<I>name</I>=[<I>value</I>]]<BR>[-append <I>filename</I>] [-d <I>name</I>[=<I>value</I>]] [-i <I>dirname</I>] [-ia <I>dirname</I>]<BR>[-ic <I>dirname</I>] [-ignore[dir] <I>dirname</I>] [-ip <I>dirname</I>] [-ir <I>dirname</I>]<BR>[-<B>mf</B> | -nomf] [-objdir <I>dirname</I>] [-objext <I>extension</I>] [-p]<BR>[-quote <B>on</B> | off] [-skip[dir] <I>dirname</I>] [-skipfile <I>filename</I>[,<I>filename</I>]&#133;]<BR>[-w]</P><P CLASS="SectionHd">DESCRIPTION</P><P CLASS="Text1">From a list of source files, MakeDepend generates makefile dependencies for the "include" files. The generated dependencies can be appended to a specified makefile or written to standard output.If macros are defined on the command line, MakeDepend will attempt to convert directory pathnames into macros when emitting the generated dependencies. <NOBR><A HREF="#example2">Example 2</A></NOBR> shows how macros are used in generated dependencies. <A HREF="#example3">Example 3</A> shows how to define macros using Make variables when MakeDepend is used within a makefile. MakeDepend predefines the following macros by getting their definitions from the MPW Shell: <FONT FACE="courier">AIncludes</FONT>, <FONT FACE="courier">CIncludes</FONT>, <FONT FACE="courier">PInterfaces</FONT> and <FONT FACE="courier">RIncludes</FONT>.</P><P CLASS="Text1">For each source file, MakeDepend uses the filename suffix to establish its programming language. The recognized filename extensions are defined in the <FONT FACE="courier">'xMap' (128)</FONT> resourcewithin the MakeDepend tool. You can edit this resource if you wish to change the recognized filename extensions.The format of the <FONT FACE="courier">'xMap'</FONT> resource is shown below.</P><PRE CLASS="Code">/* filename extensions -> languages */type 'xMap'{  byte = $$CountOf(ExtensionArray);  array ExtensionArray  {    byte AsmExtension = 1,          CExtension = 2,          CPlusExtension = 3,          PascalExtension = 4,          RezExtension = 5;    cstring;  };};</PRE><P CLASS="Text1">The <FONT FACE="courier">'xMap'</FONT> resource currently defines the following source file extensions:<BR><BR></P><!-- Table Start --><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableHdL">Language</P></TD><TD ROWSPAN="1" COLSPAN="3"><P CLASS="TableHdR">Extensions</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">Assembly<BR>C<BR>C++<BR>Pascal<BR>Rez</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">.a<BR>.c<BR>.cp<BR>.p<BR>.r</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">.asm<BR>&nbsp;<BR>.cpp<BR>.pas<BR>.rez</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">.s<BR>&nbsp;<BR>.cc<BR>&nbsp;<BR>&nbsp;</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">&nbsp;<BR>&nbsp;<BR>.cxx<BR>&nbsp;<BR>&nbsp;</P></TD></TR></TABLE><!-- Table End --><P CLASS="SectionHd">INPUT</P><P CLASS="Text1">One or more source files.</P><P CLASS="SectionHd">OUTPUT</P><P CLASS="Text1">MakeDepend writes the generated dependencies to standard output. The dependencies can be appended to a specified makefile by using the <FONT FACE="courier">-append</FONT> option.</P><P CLASS="SectionHd">STATUS</P><P CLASS="Text1">MakeDepend can return the following status codes:<BR><BR></P><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">0</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">no errors</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">1</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">fatal error</P></TD></TR></TABLE><P CLASS="SectionHd">PARAMETERS</P><P CLASS="Option1"><I>sourceFile</I>&#133;</P><P CLASS="OptionText1">Specifies the names of the source files used to generate the dependencies. This list should include all of the source files needed to build the target, but none of the files derived from them. Specifically, no included files should be listed, and none of the object files produced by the assemblers, compilers, or Rez should be listed.</P><P CLASS="Option1"><I>explicitDependency</I>&#133;</P><P CLASS="OptionText1">These are dependencies that will not be automatically generated by MakeDepend as a result of parsing the source files. MakeDepend understands the various types of "include" statements used by Asm, C/C++, Pascal, and Rez; thus files included by other source files should not be given as explicit dependencies. An example of an explicit dependency is:</P><P CLASS="OptionCode1">:LibFiles:CommonLib.o &#402; :SrcFiles:CommonRoutines.c</P><P CLASS="SectionHd">OPTIONS</P><P CLASS="Option1"><I>name</I>=[<I>value</I>]</P><P CLASS="OptionText1">Defines a macro for use in the generated dependencies. If the value is not specified, the macro is set to NULL. There must be no space on either side of the equal sign. If the value is to contain whitespace, the entire argument should be quoted.</P><P CLASS="Option1">-append <I>filename</I></P><P CLASS="OptionText1">Appends the generated dependencies to the specified makefile. The default is to write the generated dependencies to standard output. If MakeDepend has previously appended dependencies to the specified makefile, the previous dependencies will be deleted before the new dependencies are appended. In order to find the previous dependencies, MakeDepend searches the makefile for the following line.</P><P CLASS="OptionCode1">#*** Dependencies: Cut here ***</P><P CLASS="OptionText1">If this line is found, everything after it is deleted. MakeDepend requires that its generated dependencies be at the end of the makefile.</P><P CLASS="Option1">-d <I>name</I>[=<I>value</I>]</P><P CLASS="OptionText1">Defines a macro for use in the generated dependencies. If the value is not specified, the macro is set to NULL. There must be no space on either side of the equal sign. If the value is to contain whitespace, the entire argument should be quoted.</P><P CLASS="Option1">-i <I>dirname</I></P><P CLASS="OptionText1">Adds the directory <I>dirname</I> to the list of directories to be searched for Asm, C/C++, Pascal, and Rez "include" files. Multiple <FONT FACE="courier">-i</FONT> options can be specified. This option is equivalent to specifying <FONT FACE="courier">-ia dirname -ic dirname -ip dirname -ir dirname</FONT>.</P><P CLASS="Option1">-ia <I>dirname</I></P><P CLASS="OptionText1">Adds the directory <I>dirname</I> to the list of directories to be searched for Assembler <FONT FACE="courier">INCLUDE</FONT> and <FONT FACE="courier">LOAD</FONT> files. Multiple <FONT FACE="courier">-ia</FONT> options can be specified. The default is to search the source file's directory and <FONT FACE="courier">{AIncludes}</FONT>.</P><P CLASS="Option1">-ic <I>dirname</I></P><P CLASS="OptionText1">Adds the directory <I>dirname</I> to the list of directories to be searched for C/C++ <FONT FACE="courier">#include</FONT> files. Multiple <FONT FACE="courier">-ic</FONT> options can be specified. The default is to search the source file's directory and <FONT FACE="courier">{CIncludes}</FONT> for "user" includes and to only search <FONT FACE="courier">{CIncludes}</FONT> for "system" includes.</P><P CLASS="Option1">-ignore[dir] <I>dirname</I></P><P CLASS="OptionText1">Included files found in the directory <I>dirname</I> will be parsed but will not be listed in the generated dependencies. Multiple <FONT FACE="courier">-ignoredir</FONT> options can be specified. This option is generally used to ignore the system includes (e.g. <FONT FACE="courier">-ignore {CIncludes}</FONT>).</P><P CLASS="Option1">-ip <I>dirname</I></P><P CLASS="OptionText1">Adds the directory <I>dirname</I> to the list of directories to be searched for Pascal <FONT FACE="courier">USES</FONT>, <FONT FACE="courier">{$U&#133;}</FONT> and <FONT FACE="courier">{$I&#133;}</FONT> files. Multiple <FONT FACE="courier">-ip</FONT> options can be specified. The default is to search the source file's directory and <FONT FACE="courier">{PInterfaces}</FONT>.</P><P CLASS="Option1">-ir <I>dirname</I></P><P CLASS="OptionText1">Adds the directory <I>dirname</I> to the list of directories to be searched for Rez <FONT FACE="courier">#include</FONT>, <FONT FACE="courier">Include</FONT>, <FONT FACE="courier">Read</FONT>, <FONT FACE="courier">$$Resource</FONT> and <FONT FACE="courier">$$Read</FONT> files. Multiple <FONT FACE="courier">-ir</FONT> options can be specified. The default is to search the source file's directory and <FONT FACE="courier">{RIncludes}</FONT>.</P><P CLASS="Option1">-<B>mf</B> | -nomf</P><P CLASS="OptionText1">Enables or suppresses the use of Process Manager temporary memory. </P><P CLASS="OptionText1">Note that the MakeDepend command's use of Process Manager temporary memory excludes other applications from using it, even the Finder. If temporary memory is unavailable, this option has no effect.</P><P CLASS="OptionNote1"><B>WARNING</B><BR>If MakeDepend aborts abnormally, that is, there is a crash or a nonmaskable interrupt (NMI), much of the Process Manager temporary memory might be left permanently allocated, thus potentially crippling launches and Finder copy operations. The only way to recover from this situation is to restart the computer. &#149;</P><P CLASS="Option1">-objdir <I>dirname</I></P><P CLASS="OptionText1">Specifies the directory that will contain the object files. The default is the current directory.</P><P CLASS="Option1">-objext <I>extension</I></P><P CLASS="OptionText1">Specifies the filename extension to use for the object files. The default is <FONT FACE="courier">".o"</FONT>. Multiple <FONT FACE="courier">-objext</FONT> options can be specified. For example, the following options could be specified in order to generate dependencies for both 68k and PowerPC object files.</P><P CLASS="OptionCode1">-objext .o -objext .x</P><P CLASS="Option1">-p</P><P CLASS="OptionText1">Writes progress information to diagnostic output.</P><P CLASS="Option1">-quote <B>on</B> | off</P><P CLASS="OptionText1">Controls the quoting of filenames in the generated dependencies. The default is to quote the filenames.</P><P CLASS="Option1">-skip[dir] <I>dirname</I></P><P CLASS="OptionText1">Included files found in the directory <I>dirname</I> will not be parsed or listed in the generated dependencies. Multiple <FONT FACE="courier">-skipdir</FONT> options can be specified. This option is generally used to ignore the system includes (e.g. <FONT FACE="courier">-skipdir {CIncludes}</FONT>).</P><P CLASS="Option1">-skipfile <I>filename</I>[,<I>filename</I>]&#133;</P><P CLASS="OptionText1">The specified files will not be parsed or listed in the generated dependencies. Multiple <FONT FACE="courier">-skipfile</FONT> options can be specified.</P><P CLASS="Option1">-w</P><P CLASS="OptionText1">Suppresses warning messages.</P><P CLASS="SectionHd"><A NAME="example1"></A>EXAMPLE 1</P><P CLASS="Text1">A simple example of using MakeDepend is</P><P CLASS="Code">MakeDepend -append Makefile &#8776;.c</P><P CLASS="Text1">This generates dependencies for the C source files in the current directory and appends the dependencies to the makefile named <FONT FACE="courier">Makefile</FONT>, also in the current directory.</P><P CLASS="SectionHd"><A NAME="example2"></A>EXAMPLE 2</P><P CLASS="Text1">The following is a more elaborate example, with macros, special include directories, and source files from different directories. Note that the trailing "&#8706;" on each line indicates to the MPW Shell that the command continues to the next line. The indentation is for readability only, and means nothing to either MakeDepend or the MPW Shell.</P><PRE CLASS="Code">MakeDepend -append Makefile     &#8706; # Specify the directory that will contain the object files. &#8706;    -objdir :Objects:           &#8706;# Specify additional directories to search for "include" files. &#8706;    -i :Src:Errors:             &#8706;    -i :Src:Main:               &#8706;    -i :Src:Utilities:          &#8706;# Skip files included from {CIncludes} and {AIncludes}. &#8706;    -skip {CIncludes}           &#8706;    -skip {AIncludes}           &#8706;# Define macros for use in the generated dependencies. &#8706;    ObjDir=:Objects:            &#8706;    Errors=:Src:Errors:         &#8706;    Main=:Src:Main:             &#8706;    Utilities=:Src:Utilities:   &#8706;# Specify the source files.     &#8706;    :Src:Errors:&#8776;.c             &#8706;    :Src:Main:&#8776;.c               &#8706;    :Src:Main:&#8776;.r               &#8706;    :Src:Utilities:&#8776;.c          &#8706;    :Src:Utilities:&#8776;.a</PRE><P CLASS="Text1">The following is a small sample of the output from the MakeDepend command shown above. This sample shows how the macros are used in the generated dependencies.</P><P CLASS="Code">"{ObjDir}"main.c.o &#402; &#8706;<BR>&nbsp;&nbsp; "{Main}"main.c &#8706;<BR>&nbsp;&nbsp; "{Main}"main.h &#8706;<BR>&nbsp;&nbsp; "{Utilities}"DataBuffer.h &#8706;<BR>&nbsp;&nbsp; "{Errors}"ErrorMsgs.h &#8706;<BR>&nbsp;&nbsp; "{Utilities}"HashTable.h</P><P CLASS="SectionHd"><A NAME="example3"></A>EXAMPLE 3</P><P CLASS="Text1">The following is an example of how to use MakeDepend from within a makefile named <FONT FACE="courier">Makefile</FONT>. In this example, the MakeDepend command line options are specified using previously defined Make variables.</P><PRE CLASS="Code"># Define variables for the directories.ObjDir      =    :Objects:Errors      =    :Src:Errors:Main        =    :Src:Main:Utilities   =    :Src:Utilities:&lt;&lt; the normal makefile contents goes here &gt;&gt;# Build this target to (re)generate the dependencies.Dependencies  &#402;  $OutOfDate    MakeDepend            &#8706;    -append Makefile      &#8706;    -objdir {ObjDir}      &#8706;    -i {Errors}           &#8706;    -i {Main}             &#8706;    -i {Utilities}        &#8706;    -skip {CIncludes}     &#8706;    -skip {AIncludes}     &#8706;    ObjDir={ObjDir}       &#8706;    Errors={Errors}       &#8706;    Main={Main}           &#8706;    Utilities={Utilities} &#8706;    {Errors}&#8776;.c           &#8706;    {Main}&#8776;.c             &#8706;    {Main}&#8776;.r             &#8706;    {Utilities}&#8776;.c        &#8706;    {Utilities}&#8776;.a</PRE><P CLASS="Text1">To (re)generate the dependencies, set the current directory to the folder containing <FONT FACE="courier">Makefile</FONT> and execute the following two commands.</P><P CLASS="Code">Make Dependencies > MakeOut<BR>MakeOut</P><P CLASS="Text1">The first command executes Make using the target <FONT FACE="courier">Dependencies</FONT> and redirects the output (i.e. the MakeDepend command) to the file named <FONT FACE="courier">MakeOut</FONT> in the current directory. When <FONT FACE="courier">MakeOut</FONT> is executed, MakeDepend will generate the dependencies and append them to <FONT FACE="courier">Makefile</FONT>.</P><P CLASS="Text1">&nbsp;<BR>&nbsp;</P><HR WIDTH="600" ALIGN="LEFT"><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="make.html">Previous</A></P></TD>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="index.html">Table of Contents</A></P></TD>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="makeerrorfile.html">Next</A></P></TD>	</TR></TABLE><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="600">		<P CLASS="Copyright">Copyright Apple Computer, Inc. 1993-2000</P>		<P CLASS="Date">Last Updated July 2000</P>		</TD>	</TR></TABLE></TD></TR></TABLE><!--#include virtual="/footer" --></BODY></HTML>