<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML><HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1"><META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css"><LINK REL="STYLESHEET" HREF="cmdref.css" CHARSET="ISO-8859-1" TYPE="text/css"><TITLE>Link </TITLE></HEAD><BODY BGCOLOR="#ffffff"><!--#include file="breadcrumb" --><!--#include virtual="/adcnavbar" --><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD><TABLE WIDTH="600" BGCOLOR="0" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD><P CLASS="BookTitle">MPW Command Reference</P></TD>	</TR></TABLE><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="line.html">Previous</A></P></TD>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="index.html">Table of Contents</A></P></TD>		<TD WIDTH="200"><P CLASS="HeaderLink"><A HREF="locknamerevisions.html">Next</A></P></TD>	</TR></TABLE><HR WIDTH="600" ALIGN="LEFT"><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="475"><P CLASS="PageHdL">Link</P></TD>		<TD WIDTH="125"><P CLASS="PageHdR">Tool</P></TD>	</TR></TABLE><P CLASS="SectionHd">SYNTAX</P><P CLASS="Syntax">Link <I>objectFile1</I> [<I>objectFile2</I>]&#133; [-ac <I>number</I>] [-ad <I>number</I>]<BR>[-br 020 | on | <B>off</B>] [-c <I>creator</I>] [-csym <I>creator</I>] [-d] [-da] [-f] [-l]<BR>[-la] [-lf] [-m <I>mainEntry</I>] [-ma <I>name</I>=<I>alias</I>] [-map] [-mf | -<B>nomf</B>]<BR>[-mfMax] [-model <B>near</B> | far]<BR> [-msg [[<B>no</B>]<B>dup</B>][,[<B>no</B>]<B>multiple</B>][,[no]<B>warn</B>]] [-newerdeps] <BR>[-o <I>resourceFile</I>|<I>directory</I>] [-opt [off | <B>on</B>][,nobypass][,names][,info]]<BR>[-p] [-pg <I>size</I>] [-ra [<I>seg</I>]=<I>attr</I>[,<I>attr</I>]&#133;] [-rn] [-rt <I>type</I>=<I>ID</I>]<BR>[-sg <I>newSeg</I>=[<I>oldSeg1</I>[,<I>oldSeg2</I>]&#133;]&#133;] [-sn <I>oldSeg</I>=<I>newSeg</I>] [-state]<BR> [-srt] [-srtsg <I>segName</I> | all] <BR>[-sym [on|full[,nolines][,nolabels][,novars][,notypes]] | <B>off</B>] <BR>[-t <I>type</I>] [-uf <I>deleteFile</I>] [-w] [-wrap] [-x <I>crossRefFile</I>] </P><P CLASS="SectionHd">DESCRIPTION</P><P CLASS="Text1">The Link tool links object files, including library files, into an executable program, tool, or desk accessory. Normally the Link tool assumes that you are creating an application and places the output code and data segments into <FONT FACE="courier">'CODE'</FONT> resources. </P><P CLASS="Text1">When you link an application, Link automatically deletes old <FONT FACE="courier">'CODE'</FONT> resources before writing the new ones. It also identifies unused code and data modules and omits them from segments. </P><P CLASS="Text1">Aside from its default behavior, Link allows you to do the following:</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>Link a desk accessory, tool, or driver. You can link a desk accessory by specifying <FONT FACE="courier">-da</FONT>. You use the <FONT FACE="courier">-t</FONT> option to specify the output file type to link a tool or driver.</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>Change code segmentation by using <FONT FACE="courier">-sg</FONT> and <FONT FACE="courier">-sn</FONT>.</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>Generate location maps (<FONT FACE="courier">-l</FONT>, <FONT FACE="courier">-la</FONT>, <FONT FACE="courier">-lf</FONT>, and <FONT FACE="courier">-map</FONT>) for use with debugging and performance tools.</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>Create symbolic debugging information for use by SADE, SourceBug, and the profiling performance monitoring library Proff (<FONT FACE="courier">-sym on</FONT> or <FONT FACE="courier">-sym full</FONT>).</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>Take advantage of Process Manager temporary memory (<FONT FACE="courier">-mf</FONT>).</P><P CLASS="Text1"><FONT FACE="courier">&#149; </FONT>Expand the size of segments, jump tables, and code and global data beyond the 32 KB limit (<FONT FACE="courier">-br 020</FONT>, <FONT FACE="courier">-br on</FONT>, and <FONT FACE="courier">-model far</FONT>). The <FONT FACE="courier">-model far</FONT> option provides &quot;32-bit everything&quot; compatibility.</P><P CLASS="SectionHd">INPUT</P><P CLASS="Text1">Object files of type <FONT FACE="courier">'OBJ '</FONT>, including both individual files and libraries. Note that Link can combine object files written in different languages. The Link tool does not accept standard input.</P><P CLASS="SectionHd">OUTPUT</P><P CLASS="Text1">Linked segments are placed in <FONT FACE="courier">'CODE'</FONT> resources in the resource fork of the output file. Link gives the resources the same name as the corresponding segment names. Normally Link names the output file <FONT FACE="courier">Link.out</FONT>.However, you can use the <FONT FACE="courier">-o</FONT> option either to rename the output file or to specify a directory in which Link places the <FONT FACE="courier">Link.out</FONT> file. </P><P CLASS="Text1">If an output file for the program already exists, Link adds or replaces code segments in the resource fork. If the output file does not exist, it is created with file type <FONT FACE="courier">'APPL' </FONT>and creator <FONT FACE="courier">'????'</FONT>.You can use the <FONT FACE="courier">-t</FONT> and <FONT FACE="courier">-c</FONT> options to set the output file type and creator to other values. </P><P CLASS="Note"><B>Note</B><BR>If a Link error or user interrupt makes the output file invalid, the linker sets the modification date on the file to 0 (that is, January 1, 1904, 12:00 A.M.). This guarantees that Make will recognize that the file needs to be relinked. &#149;</P><P CLASS="Text1">If you specify <FONT FACE="courier">-l</FONT>, <FONT FACE="courier">-la</FONT>, <FONT FACE="courier">-lf</FONT>, or <FONT FACE="courier">-map</FONT>, Link writes a location map to standard output. </P><P CLASS="SectionHd">STATUS</P><P CLASS="Text1">Link can return the following status codes:<BR><BR></P><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL"> 0</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">no errors</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL"> 1</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">syntax error</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL"> 2</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">fatal error</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextL">-9</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">user interrupt</P></TD></TR></TABLE><P CLASS="SectionHd">PARAMETERS</P><P CLASS="Option1"><I>objectFile1</I> [<I>objectFile2</I>]&#133;</P><P CLASS="OptionText1">Specifies one or more object files, including libraries, to be linked. </P><P CLASS="SectionHd">OPTIONS</P><P CLASS="Text1">Numeric values for options can be specified as decimal constants or as hexadecimal constants preceded by the dollar sign character ($).</P><P CLASS="Option1">-ac <I>number</I></P><P CLASS="OptionText1">Aligns code to <I>number</I>-byte boundaries. The value of <I>number</I> must be a power of 2. The default value of <I>number</I> is 2.</P><P CLASS="Option1">-ad <I>number</I></P><P CLASS="OptionText1">Aligns data to <I>number</I>-byte boundaries. The value of <I>number</I> must be a power of 2. The default value of <I>number</I> is 2.</P><P CLASS="Option1">-br 020 | on | <B>off</B></P><P CLASS="OptionText1">Controls whether Link produces branch islands to remove the 32 KB limit on segment size. </P><P CLASS="Option2">020</P><P CLASS="OptionText2">Generates long branch islands to remove the 32 KB limit on segment size. Any function call can be implemented using a single long branch, no matter how large the distance between the calling and called modules. This improves code size and execution speed over the <FONT FACE="courier">-br on</FONT> option. Programs linked with the <FONT FACE="courier">-br 020</FONT> option require an MC68020 CPU or above to run.</P><P CLASS="OptionText2">Do not use this option in conjunction with the <FONT FACE="courier">-model far</FONT> option.</P><P CLASS="Option2">on</P><P CLASS="OptionText2">Generates short branch islands to remove the 32 KB limit on segment size. Some code is slightly slower because multiple branches are executed in place of one. </P><P CLASS="OptionText2">Do not use this option in conjunction with the <FONT FACE="courier">-model far</FONT> option.</P><P CLASS="Option2"><B>off</B></P><P CLASS="OptionText2">Inhibits the generation of branch islands. This is the default setting.</P><P CLASS="Option1">-c <I>creator</I></P><P CLASS="OptionText1">Sets the output file creator to <I>creator</I>. Normally the creator is set to <FONT FACE="courier">'????'</FONT>.</P><P CLASS="Option1">-csym <I>creator</I></P><P CLASS="OptionText1">Specifies the creator attribute of the generated SYM file.</P><P CLASS="Option1">-d</P><P CLASS="OptionText1">Suppresses warnings for duplicate symbol definitions for both data and code. </P><P CLASS="Option1">-da</P><P CLASS="OptionText1">Converts segment names to desk accessory names at output time. Desk accessory names begin with a leading null character ($00). Use this option when linking assembly-language code into a final desk accessory with a resource type of <FONT FACE="courier">'DRVR'</FONT>.</P><P CLASS="Option1">-f</P><P CLASS="OptionText1">Treats duplicate data definitions as Fortran common regions (that is, multiple data modules with the same name). The size of the largest module is used. There can be at most one initialization of the data.</P><P CLASS="Option1">-l</P><P CLASS="OptionText1">Writes a location-ordered map to standard output. The map is sorted by <I>segNum</I> and <I>segOffset</I> and divided into several fields:</P><P CLASS="OptionText1"><I>name</I> <I>segName</I> <I>segNum</I>, <I>segOffset</I> [@<I>JTOffset</I>] [#] [E] [C] [<I>fileNum</I>, <I>defOffset</I>]</P><P CLASS="OptionText1">The performance measurement tools and other scripts often rely on this option. It is usually used with output redirection. </P><P CLASS="Option1">-la</P><P CLASS="OptionText1">Lists anonymous symbols in the location map. Otherwise, anonymous symbols are omitted by default.</P><P CLASS="Option1">-lf</P><P CLASS="OptionText1">Writes to standard output a location map that includes the symbol definition location of the input file--that is, the file number and byte offset of the module or entry point record. Normally Link omits the symbol definition location. Specifically, these are the fields listed in the <FONT FACE="courier">-l</FONT> option as [<I>fileNum</I>, <I>defOffset</I>].</P><P CLASS="Option1">-m <I>mainEntry</I></P><P CLASS="OptionText1">Sets or overrides the main entry point specified in the object files. </P><P CLASS="OptionNote1"><B>Note</B><BR>For an application or MPW tool, the main entry point is assigned the first jump table entry, as required by the Segment Manager. If you specify a main entry point for a desk accessory, driver, or other type of link to use the linker's active code analysis feature, the main entry point should be the first byte of code in the first Link input file. Note that a desk accessory has no jump table. &#149;</P><P CLASS="Option1">-ma <I>name</I>=<I>alias</I></P><P CLASS="OptionText1">Gives the module or entry point name the specified alias. You can use this option to resolve undefined external symbols at link time when the problem is caused by differences in spelling or capitalization. </P><P CLASS="OptionText1">Note that you cannot use an alias specification to override an existing module or entry point because the original name is retained.</P><P CLASS="Option1">-map</P><P CLASS="OptionText1">Writes to standard output a location map that provides the A5 world with the correct offsets and sizes of all modules. This location map is more readable than those produced by <FONT FACE="courier">-l</FONT>, <FONT FACE="courier">-la</FONT>, and <FONT FACE="courier">-lf</FONT>.</P><P CLASS="Option1">-mf | -<B>nomf</B></P><P CLASS="OptionText1">Enables or suppresses the use of Process Manager temporary memory. </P><P CLASS="OptionText1">Note that the Link tool's use of Process Manager temporary memory excludes other applications from using it, including the Finder. If Process Manager temporary memory is unavailable, this option has no effect.</P><P CLASS="OptionNote1"><B>WARNING</B><BR>If Link aborts abnormally, that is, there is a crash or a nonmaskable interrupt (NMI), much of the Process Manager temporary memory might be left permanently allocated, thus potentially crippling launches and Finder copy operations. The only way to recover from this situation is to restart the computer. &#149;</P><P CLASS="Option1">-mfMax</P><P CLASS="OptionText1">Allows the linker to use all available Process Manager temporary memory.</P><P CLASS="Option1">-model <B>near</B> | far</P><P CLASS="OptionText1">Determines whether Link uses references to 32-bit addresses for MPW's &quot;32-bit everything.&quot; The <FONT FACE="courier">far</FONT> parameter controls the removal of the 32 KB (16-bit) restriction on code and data size.</P><P CLASS="Option2"><B>near</B></P><P CLASS="OptionText2">Links normally with 16-bit references (the default). This maintains the 32K restriction on the size of segments, jump tables, and global code and data.</P><P CLASS="Option2">far</P><P CLASS="OptionText2">Links with 32-bit references. This removes the 32 KB restriction on the size of segments, jump tables, and global code and data.</P><P CLASS="Option1">-msg [[<B>no</B>]<B>dup</B>][,[<B>no</B>]<B>multiple</B>][,[no]<B>warn</B>]]</P><P CLASS="OptionText1">Suppresses or enables certain warning and error messages by using the following key words:</P><P CLASS="Option2">[<B>no</B>]<B>dup</B></P><P CLASS="OptionText2">Suppresses or enables warning messages about duplicate symbols. The default is to suppress these messages (<B>nodup</B>).</P><P CLASS="Option2">[<B>no</B>]<B>multiple</B> </P><P CLASS="OptionText2">Suppresses or enables multiple error messages on undefined references to a label. This lets you catch all references to an undefined symbol with one link. The default is to suppress these messages (<B>nomultiple</B>).</P><P CLASS="Option2">[no]<B>warn</B></P><P CLASS="OptionText2">Suppresses or enables all warnings. The default is to enable these warnings (<B>warn</B>).</P><P CLASS="Option1">-newerdeps</P><P CLASS="OptionText1">This option is only for compatibility with the ILink tool and has no effect when used on the Link command line.</P><P CLASS="Option1">-o [<I>resourceFile</I> | <I>directory</I>]</P><P CLASS="OptionText1">Places the linker output in either a resource file or directory. If you do not specify <FONT FACE="courier">-o</FONT>, the default output filename is <FONT FACE="courier">Link.Out</FONT>.</P><P CLASS="Option2"><I>resourceFile</I></P><P CLASS="OptionText2">Places the linker output in the file <I>resourceFile</I> in the current directory.</P><P CLASS="Option2"><I>directory</I></P><P CLASS="OptionText2">Places the linker output file <FONT FACE="courier">Link.Out</FONT> in the directory you name.</P><P CLASS="Option1">-opt [off | <B>on</B>][,nobypass][,names][,info]</P><P CLASS="OptionText1">Controls the optimization of Object Pascal code. </P><P CLASS="Option2">off</P><P CLASS="OptionText2">Disables Object Pascal optimization.</P><P CLASS="Option2"><B>on</B></P><P CLASS="OptionText2">Optimizes Object Pascal method tables (the default). This parameter can be followed by one or more of the following keywords, separated by commas or MPW Shell-quoted (&#8706;) spaces:</P><P CLASS="Option2"><FONT FACE="courier">,nobypass</FONT></P><P CLASS="OptionText2">Never bypasses the jump table (that is, it does not optimize monomorphic method calls to PC-relative JMP instructions).</P><P CLASS="Option2"><FONT FACE="courier">,names</FONT></P><P CLASS="OptionText2">Appends MacsBug symbols to <FONT FACE="courier">SelectorProc</FONT> modules, making selector names visible in MacsBug disassemblies.</P><P CLASS="Option2">,info</P><P CLASS="OptionText2">Writes information about method table optimization to diagnostic output. </P><P CLASS="Option1">-p</P><P CLASS="OptionText1">Writes progress and summary information to diagnostic output.</P><P CLASS="Option1">-pg <I>size</I></P><P CLASS="OptionText1">Sets the <FONT FACE="courier">.sym</FONT> file page size to size bytes; the default page size is 4 KB and the minimum is 2 KB. For example, this option sets the <FONT FACE="courier">.sym</FONT> file page size to 8192 bytes, or 8 KB:</P><P CLASS="OptionCode1">-pg 8192</P><P CLASS="Option1">-ra [<I>seg</I>]=<I>attr</I>[,<I>attr</I>]&#133;</P><P CLASS="OptionText1">Sets the resource attributes of a segment or segments.</P><P CLASS="Option2"><I>seg</I></P><P CLASS="OptionText2">Specifies the segment. If you specify the segment (<I>seg</I>), the single segment named seg is given the attribute value <I>attr</I>.If you omit <I>seg</I>, all segments except 0 and 1 are given the attribute value <I>attr</I>.</P><P CLASS="OptionText2">You must set the segment containing the main entry point (that is, the <FONT FACE="courier">'CODE'</FONT> resource with ID=1) individually to override the default resource attributes. If you intend to set the attributes of all segments, you must specify this option before any other options that name segments, such as <FONT FACE="courier">-sn</FONT> and <FONT FACE="courier">-sg</FONT>. </P><P CLASS="Option2"><I>attr</I></P><P CLASS="OptionText2">Specifies the resource attribute as a list of comma-separated attributes or decimal or hexadecimal numbers. A list of attributes and their corresponding decimal and hexadecimal values follows. (Note that you can omit the initial <FONT FACE="courier">res</FONT> for resource attributes.)<BR><BR></P><!-- Table Start --><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD ROWSPAN="7" COLSPAN="1" WIDTH="183" ALIGN="left"></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableHdR">Resource attributes </P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableHdR">Decimal<BR>values </P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableHdR">Hexadecimal<BR>values</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">resSysHeap</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">64</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">$40</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">resPurgeable</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">32</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">$20</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">resLocked</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">16</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">$10</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">resProtected</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">8</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">$08</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">resPreload</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">4</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">$04</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">resChanged</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">2</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">$02</P></TD></TR></TABLE><!-- Table End --><P CLASS="OptionText2">Link essentially ignores the <FONT FACE="courier">resChanged</FONT> attribute and does not check or enforce settings for the other resource attributes. Bits 0 and 7 ($01 and $80) are currently reserved and should not be set.</P><P CLASS="OptionText2">The default resource attributes for the <FONT FACE="courier">'CODE'</FONT> resources of an application are listed as follows:<BR><BR></P><!-- Table Start --><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD ROWSPAN="5" COLSPAN="1" WIDTH="183" ALIGN="left"></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableHdR">'CODE' rsrc</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableHdR">Attributes</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableHdR">Description</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">0 (jump table)</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">32&nbsp;&nbsp;$20</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">resPurgeable</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">1 (<FONT FACE="courier">Main</FONT>)</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">52&nbsp;&nbsp;$34</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">resLocked resPreload</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">Others</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableTextR">32&nbsp;&nbsp;$20</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableCodeR">resPurgeable</P></TD></TR></TABLE><!-- Table End --><P CLASS="OptionNote2"><B>Note</B><BR>When linking MPW tools (type <FONT FACE="courier">'MPST'</FONT> and creator <FONT FACE="courier">'MPS '</FONT>) all segments default to <FONT FACE="courier">resPurgeable</FONT>.Do not set the <FONT FACE="courier">resLocked</FONT> attribute for a tool. &#149;</P><P CLASS="Option1">-rn </P><P CLASS="OptionText1">Suppresses the setting of resource names. Normally, Link sets resource names to the corresponding segment names. Note that desk accessories must always be named.</P><P CLASS="Option1">-rt <I>type</I>=<I>ID</I></P><P CLASS="OptionText1">Sets the output resource type and ID. </P><P CLASS="OptionNote1"><B>Note</B><BR>When you link an assembly-language desk accessory or driver, Link uses PC-relative offsets and attempts to edit JSR, JMP, LEA, or PEA instructions from A5-relative to PC-relative addressing mode. Instructions that specify the A5-relative addressing generate an error message. &#149;</P><P CLASS="Option1">-sg <I>newSeg</I>=[<I>oldSeg1</I>[,<I>oldSeg2</I>]&#133;]&#133;</P><P CLASS="OptionText1">Changes segmentation so that code in the old segments (<I>oldSeg1</I>,<I>oldSeg2</I>,&#133;) is placed in the segment <I>newSeg</I>. If you do not specify the old segments, Link places all segments in <I>newSeg</I>.</P><P CLASS="Option1">-sn <I>oldSeg</I>=<I>newSeg</I></P><P CLASS="OptionText1">Puts the code residing in <I>oldSeg</I> in the segment newSeg. If there is already code in the segment <I>newSeg</I> this option has the effect of merging the code in the <I>oldSeg</I> segment with the code already in the <I>newSeg</I> segment.</P><P CLASS="OptionText1">The <FONT FACE="courier">-sn</FONT> and <FONT FACE="courier">-sg</FONT> options are very similar. The option <FONT FACE="courier">-sg</FONT> allows you to specify multiple segments to merge. The <FONT FACE="courier">-sn</FONT> option is retained to maintain compatibility with old makefiles.</P><P CLASS="OptionText1">For example, the first option below combines the three specified segments into one segment named <FONT FACE="courier">Main</FONT>; the second option renames <FONT FACE="courier">Main</FONT> to <FONT FACE="courier">MyDA</FONT>.</P><P CLASS="OptionCode1">Link&#133; &#8706;<BR>-sg Main=SAConsol,StdIO,%A5Init &#8706;<BR>-sn Main=&quot;MyDA&quot; &#8706;</P><P CLASS="Option1">-srt</P><P CLASS="OptionText1">Sorts global data by &quot;near&quot; and &quot;far&quot; references.</P><P CLASS="Option1">-srtsg <I>segName</I> | all</P><P CLASS="OptionText1">Places modules referenced through the jump table low in the segment. If a segment is greater than 32 KB, references from the jump table still reach (that is, the references are still in range). </P><P CLASS="OptionText1">This may help if you get the message &quot;Jump table offset into code segment is &gt; 32K.&quot;</P><P CLASS="Option1">-state</P><P CLASS="OptionText1">This option is only for compatibility with the ILink tool and has no effect when used on the Link command line.</P><P CLASS="Option1">-sym [on | full[,nolines][,nolabels][,novars][,notypes]]| <B>off</B> </P><P CLASS="OptionText1">Determines whether <FONT FACE="courier">Link</FONT> generates symbolic debugging information for SourceBug or SADE. Note that the parameters <FONT FACE="courier">on</FONT> and <FONT FACE="courier">full</FONT> are equivalent.</P><P CLASS="Option2">on | full</P><P CLASS="OptionText2">Generates a <FONT FACE="courier">.sym</FONT> file with symbolic debugger information. You can limit <FONT FACE="courier">-sym on | full</FONT> by also specifying one or more of the following parameters.</P><P CLASS="Option3">,nolines</P><P CLASS="OptionText3">Omits line information.</P><P CLASS="Option3">,nolabels</P><P CLASS="OptionText3">Omits label information.</P><P CLASS="Option3">,novars</P><P CLASS="OptionText3">Omits variable information.</P><P CLASS="Option3">,notypes </P><P CLASS="OptionText3">Omits type information.</P><P CLASS="Option2"><B>off</B></P><P CLASS="OptionText2">Does not generate a <FONT FACE="courier">.sym</FONT> file containing information for SourceBug or SADE (the default). </P><P CLASS="Option1">-t <I>type</I></P><P CLASS="OptionText1">Sets the output file type to <I>type</I>. The default type is <FONT FACE="courier">'APPL'</FONT>.</P><P CLASS="Option1">-uf <I>deleteFile</I></P><P CLASS="OptionText1">Outputs a list of unreferenced modules to the text file <I>deleteFile</I>. This option is useful in identifying dead source code. The output file, deleteFile, can be used with the Lib tool's -df option to build a specialized library that optimizes subsequent links. </P><P CLASS="Option1">-w</P><P CLASS="OptionText1">Suppresses warning messages.</P><P CLASS="OptionNote1"><B>Note</B><BR>Be careful when using this option because warnings generally indicate potential errors at runtime. &#149;</P><P CLASS="Option1">-wrap</P><P CLASS="OptionText1">If the jump table is larger than 32 KB, <FONT FACE="courier">-wrap</FONT> places excess jump-table entries in available global data space. Note that this option is not applicable if the global data area is filled.</P><P CLASS="Option1">-x <I>crossRefFile</I></P><P CLASS="OptionText1">Generates a cross-reference listing of active modules and entry points. The listing is ordered by module within each segment. For each module, the following information is listed: each active entry point in the module, other modules and entry points that are referenced by the module, and other modules that reference this module. For each entry point in a module, the modules that reference the entry point are listed. </P><P CLASS="SectionHd">EXAMPLES</P><P CLASS="Text1">The following command line links <FONT FACE="courier">myFile.c.o</FONT> and <FONT FACE="courier">anotherFile.c.o</FONT> and places the output in the file named <FONT FACE="courier">Linked</FONT>:</P><P CLASS="Code">Link myFile.c.o anotherFile.c.o -o Linked</P><P CLASS="Text1">The next example links the files defined in the MPW Shell variable <FONT FACE="courier">{LinkList}</FONT> into a ROM image file, placing the output in the file <FONT FACE="courier">MyROMImage</FONT>.The ROM is created as a resource of type <FONT FACE="courier">'MROM'</FONT> with ID=8. The file is specified as being created by MPW with a creator of <FONT FACE="courier">'MPS '</FONT> and a file type of <FONT FACE="courier">'ZROM'</FONT>.The Link tool's location-ordered listing is placed in the file <FONT FACE="courier">ROMLocListing</FONT>.</P><P CLASS="Code">Link -rt MROM=8 -c 'MPS ' -t ZROM &#8706;<BR>&nbsp;&nbsp;-l &gt; ROMLocListing -o MyROMImage {LinkList}</P><P CLASS="Text1">You can enable your program to generate its own profiling performance data by running it with<FONT FACE="courier">Proff.o</FONT> library code embedded. Embed the code by merging the stand-alone segment of the <FONT FACE="courier">Proff.o</FONT> library, <FONT FACE="courier">ProffSeg</FONT>, with a resident segment of your program using the <FONT FACE="courier">-sn</FONT> option. At the same time generate the symbolic debugging information using the -<FONT FACE="courier">sym full</FONT> option on a command line as follows:</P><P CLASS="Code">Link -sn ProffSeg=main -sym full</P><P CLASS="Text1">When you run the resulting program, an output file containing profiling and performance data is placed in the same directory as the target program. It is given the application name with <FONT FACE="courier">.proff</FONT> appended as a suffix. You then analyze this data file using PrintProff.</P><P CLASS="SectionHd">SEE ALSO</P><P CLASS="Text1"><FONT FACE="courier"><A HREF="lib.html">Lib</A></FONT></P><P CLASS="Text1"><FONT FACE="courier"><A HREF="printproff.html">PrintProff</A></FONT></P><P CLASS="Text1">&nbsp;<BR>&nbsp;</P><HR WIDTH="600" ALIGN="LEFT"><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="line.html">Previous</A></P></TD>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="index.html">Table of Contents</A></P></TD>		<TD WIDTH="200"><P CLASS="FooterLink"><A HREF="locknamerevisions.html">Next</A></P></TD>	</TR></TABLE><TABLE WIDTH="600" BORDER="0" CELLSPACING="0" CELLPADDING="0">	<TR>		<TD WIDTH="600">		<P CLASS="Copyright">Copyright Apple Computer, Inc. 1993-2000</P>		<P CLASS="Date">Last Updated July 2000</P>		</TD>	</TR></TABLE></TD></TR></TABLE><!--#include virtual="/footer" --></BODY></HTML>